import{d as K,u as Q,e as W,n as X,C as Y,c as n,a as t,b as a,r as i,w as v,v as tt,q as st,g as u,F as ot,y as et,t as c,j as p,h as A,E as C,s as at,p as nt,o as l}from"./index-QZaKag1-.js";const lt={class:"faq-page"},it={class:"table-card card"},rt={class:"table-header"},dt={class:"left"},ut={class:"title-row"},ct={class:"icon"},pt={class:"right"},vt={class:"searchbar"},ft={class:"icon"},gt={class:"searchbar"},_t={class:"select-dropdown"},ht={class:"table-body p-16"},mt={class:"table-outer"},bt={class:"table"},yt={key:0,class:"zoom-image"},Ct=["src"],kt={key:0,class:"badge success-badge"},St={key:1,class:"badge warning-badge"},Dt={key:2,class:"badge danger-badge"},It={class:"option-btns"},wt=["onClick"],Pt=["onClick"],Et=["onClick"],Vt=["onClick"],Tt=["onClick"],Nt={key:0,class:"table-no-data"},At={key:1,class:"table-footer"},Mt={class:"status-row"},zt={for:"approve",class:"data"},Ft={class:"data-inner approve-card"},$t={for:"pending",class:"data"},Ot={class:"data-inner pending-card"},Ut={for:"block",class:"data"},qt={class:"data-inner block-card"},xt={class:"modal-footer"},Gt={class:"btns"},Bt={__name:"Staff",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(M){const _=M,h=Q();nt();const k=at(),r=K(()=>h.state.Dashboard),e=W({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"STAFF",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,id:null,partnersAccountId:null,changeStatus:null});X(()=>{f()}),Y(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,f()},e.typingDelay)});function f(){h.dispatch("Dashboard/getStaffs",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,fromDate:_.fromDate,toDate:_.toDate,roles:"STAFF",all:_.all})}function z(d,s){e.changeStatus=s,e.id=d,r.value.statusModal=!0}function F(){h.dispatch("Partners/updatePartnersStatus",{id:e.id,status:e.changeStatus}),r.value.statusModal=!1}const $=d=>{e.currentPage=d,e.offset=e.limit*(d-1),f()};function O(){f()}function U(d,s){k.push({path:s,query:{id:d}})}function m(d,s,b){k.push({path:b,query:{id:d,settingId:s}})}return(d,s)=>{var S,D;const b=i("icon-partner"),q=i("icon-search"),x=i("icon-permission"),G=i("icon-status"),y=i("icon-profile"),L=i("Pagination"),B=i("icon-cross"),R=i("icon-success"),H=i("icon-warning"),j=i("icon-block"),Z=i("Modal");return l(),n("section",lt,[t("div",it,[t("div",rt,[t("div",dt,[t("div",ut,[t("div",ct,[a(b)]),s[9]||(s[9]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Staff : List"),t("h5",{class:"main-title"},"Our Staff List")],-1))])]),t("div",pt,[t("div",vt,[v(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.keyword=o),placeholder:"Search here"},null,512),[[tt,e.keyword]]),t("div",ft,[a(q)])]),t("div",gt,[t("div",_t,[v(t("select",{name:"",id:"","onUpdate:modelValue":s[1]||(s[1]=o=>e.status=o),onChange:O},s[10]||(s[10]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[st,e.status]])])])])]),t("div",ht,[t("div",mt,[t("table",bt,[s[16]||(s[16]=t("thead",null,[t("th",null,"#"),t("th",null,"Name"),t("th",null,"Phone"),t("th",null,"Firm Name"),t("th",null,"Designation"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(l(!0),n(ot,null,et(r.value.staffData,(o,J)=>{var I,w,P,E,V,T,N;return l(),n("tr",{key:J},[t("td",null,[o.profile?(l(),n("div",yt,[t("img",{src:`${o.profile}?width=200`,alt:""},null,8,Ct)])):u("",!0)]),t("td",null,c(o.name),1),t("td",null,c((I=o.account)==null?void 0:I.phoneNumber),1),t("td",null,c((w=o.organizationDetail)==null?void 0:w.name)+" ("+c((P=o.organizationDetail)==null?void 0:P.account.roles)+") ",1),t("td",null,c((E=o.designation)==null?void 0:E.name),1),t("td",null,[o.status==="ACTIVE"?(l(),n("div",kt,c(o.status),1)):u("",!0),o.status==="PENDING"?(l(),n("div",St,c(o.status),1)):u("",!0),o.status==="DEACTIVE"?(l(),n("div",Dt,c(o.status),1)):u("",!0)]),t("td",null,[t("div",It,[t("div",{class:"icon tooltip-wrapper",onClick:p(g=>U(o.accountId,"/crm/staff-permission"),["prevent"])},[a(x),s[11]||(s[11]=t("div",{class:"tooltip"},"Permission",-1))],8,wt),t("div",{class:"icon tooltip-wrapper",onClick:p(g=>z(o.accountId,o.status),["prevent"])},[a(G),s[12]||(s[12]=t("div",{class:"tooltip"},"Change Status",-1))],8,Pt),((V=o.organizationDetail)==null?void 0:V.account.roles)==="SCHOOL"?(l(),n("div",{key:0,class:"icon tooltip-wrapper",onClick:p(g=>m(o.accountId,o.settingId,"/crm/organization-staff-profile-layout"),["prevent"])},[a(y),s[13]||(s[13]=t("div",{class:"tooltip"},"Profile",-1))],8,Et)):u("",!0),((T=o.organizationDetail)==null?void 0:T.account.roles)==="ORGANIZATION"?(l(),n("div",{key:1,class:"icon tooltip-wrapper",onClick:p(g=>m(o.accountId,e.organizationSettingId,"/crm/organization-staff-profile-layout"),["prevent"])},[a(y),s[14]||(s[14]=t("div",{class:"tooltip"},"Profile",-1))],8,Vt)):u("",!0),((N=o.organizationDetail)==null?void 0:N.account.roles)==="SCHOOL"?(l(),n("div",{key:2,class:"icon tooltip-wrapper",onClick:p(g=>m(o.accountId,e.organizationSettingId,"/crm/college-staff-profile-layout"),["prevent"])},[a(y),s[15]||(s[15]=t("div",{class:"tooltip"},"Profile",-1))],8,Tt)):u("",!0)])])])}),128))])])]),((S=r.value.staffData)==null?void 0:S.length)<=0?(l(),n("div",Nt,s[17]||(s[17]=[t("div",null,"No records Found!",-1)]))):u("",!0),((D=r.value.staffData)==null?void 0:D.length)>0?(l(),n("div",At,[a(L,{currentPage:e.currentPage,totalItem:r.value.totalStaff,itemsPerPage:e.limit,"onUpdate:currentPage":s[2]||(s[2]=o=>$(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):u("",!0)])]),a(Z,{show:r.value.statusModal,"onUpdate:show":s[8]||(s[8]=o=>r.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:A(()=>[s[18]||(s[18]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[3]||(s[3]=p(o=>r.value.statusModal=!1,["prevent"]))},[a(B)])]),default:A(()=>[t("div",Mt,[t("label",zt,[v(t("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=o=>e.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Ft,[a(R),s[19]||(s[19]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",$t,[v(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>e.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Ot,[a(H),s[20]||(s[20]=t("div",{class:"title"},"PENDING",-1))])]),t("label",Ut,[v(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>e.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,e.changeStatus]]),t("div",qt,[a(j),s[21]||(s[21]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",xt,[t("div",Gt,[t("div",{class:"btn red-btn",onClick:s[7]||(s[7]=p(o=>r.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:F},"Submit")])])]),_:1},8,["show"])])}}};export{Bt as default};
