import{d as X,u as Y,e as Z,n as tt,C as st,c as l,a as t,b as n,r as a,w as _,v as ot,q as et,g as p,F as nt,y as at,h as b,i as it,t as c,j as u,E as C,s as lt,p as dt,o as d}from"./index-QZaKag1-.js";const rt={class:"faq-page"},ct={class:"table-card card"},ut={class:"table-header"},pt={class:"left"},gt={class:"title-row"},vt={class:"icon"},_t={class:"right"},ht={class:"searchbar"},mt={class:"icon"},yt={class:"searchbar"},ft={class:"select-dropdown"},bt={class:"table-body p-16"},Ct={class:"table-outer"},kt={class:"table"},It={key:0,class:"zoom-image"},St=["src"],wt={key:0,class:"badge success-badge"},Dt={key:1,class:"badge warning-badge"},Et={key:2,class:"badge danger-badge"},Vt={class:"option-btns"},Tt=["onClick"],Mt=["onClick"],Nt=["onClick"],Pt=["onClick"],zt=["onClick"],At=["onClick"],Ot=["onClick"],$t={key:0,class:"table-no-data"},Lt={key:1,class:"table-footer"},Ut={class:"status-row"},xt={for:"approve",class:"data"},qt={class:"data-inner approve-card"},Bt={for:"pending",class:"data"},Gt={class:"data-inner pending-card"},Ht={for:"block",class:"data"},Ft={class:"data-inner block-card"},Rt={class:"modal-footer"},jt={class:"btns"},Kt={__name:"CollegeList",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(T){const m=T,y=Y();dt();const k=lt(),i=X(()=>y.state.Dashboard),e=Z({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"SCHOOL",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,changeStatus:null});tt(()=>{h()}),st(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,h()},e.typingDelay)});function h(){y.dispatch("Dashboard/getOrganization",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,fromDate:m.fromDate,toDate:m.toDate,roles:e.roles,all:m.all})}function M(r,s){e.changeStatus=s,e.organizationId=r,i.value.statusModal=!0}function N(){y.dispatch("Organization/updateOrganizationStatus",{id:e.organizationId,status:e.changeStatus}),i.value.statusModal=!1}const P=r=>{e.currentPage=r,e.offset=e.limit*(r-1),h()};function z(){h()}function A(r,s){k.push({path:s,query:{id:r}})}function v(r,s,f){k.push({path:f,query:{id:r,settingId:s}})}return(r,s)=>{var I,S;const f=a("icon-college"),O=a("icon-search"),$=a("router-link"),L=a("icon-edit"),U=a("icon-status"),x=a("icon-menu"),q=a("icon-library-list"),B=a("icon-user-list"),G=a("icon-student-list"),H=a("icon-setting"),F=a("Pagination"),R=a("icon-cross"),j=a("icon-success"),J=a("icon-warning"),K=a("icon-block"),Q=a("Modal");return d(),l("section",rt,[t("div",ct,[t("div",ut,[t("div",pt,[t("div",gt,[t("div",vt,[n(f)]),s[9]||(s[9]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"SCHOOL : List"),t("h5",{class:"main-title"},"Our SCHOOL")],-1))])]),t("div",_t,[t("div",ht,[_(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.keyword=o),placeholder:"Search here"},null,512),[[ot,e.keyword]]),t("div",mt,[n(O)])]),t("div",yt,[t("div",ft,[_(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>e.status=o),onChange:z},s[10]||(s[10]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[et,e.status]])])])])]),t("div",bt,[t("div",Ct,[t("table",kt,[s[18]||(s[18]=t("thead",null,[t("th"),t("th",null,"Name"),t("th",null,"Contact No"),t("th",null,"Created By"),t("th",null,"State/City"),t("th",null,"Type"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(d(!0),l(nt,null,at(i.value.organizationData,(o,W)=>{var w,D,E,V;return d(),l("tr",{key:W},[t("td",null,[o.image?(d(),l("div",It,[t("img",{src:`${o.image}?width=200`,alt:""},null,8,St)])):p("",!0)]),t("td",null,[n($,{to:`/crm/college/setting/class-list?id=${o.id}&settingId=${o.settingId}`,class:"profile-link hover-color"},{default:b(()=>[it(c(o.name),1)]),_:2},1032,["to"])]),t("td",null,c(o.contactNo),1),t("td",null,c(((D=(w=o.updated)==null?void 0:w.staffDetail)==null?void 0:D.name)||((V=(E=o.updated)==null?void 0:E.partnerDetail[0])==null?void 0:V.firmName)),1),t("td",null,c(o.state)+"/"+c(o.city),1),t("td",null,c(o.type),1),t("td",null,[o.status==="ACTIVE"?(d(),l("div",wt,c(o.status),1)):p("",!0),o.status==="PENDING"?(d(),l("div",Dt,c(o.status),1)):p("",!0),o.status==="DEACTIVE"?(d(),l("div",Et,c(o.status),1)):p("",!0)]),t("td",null,[t("div",Vt,[t("div",{class:"icon tooltip-wrapper",onClick:g=>A(o.id,"/crm/edit-college")},[n(L),s[11]||(s[11]=t("div",{class:"tooltip"},"Edit",-1))],8,Tt),t("div",{class:"icon tooltip-wrapper",onClick:u(g=>M(o.id,o.status),["prevent"])},[n(U),s[12]||(s[12]=t("div",{class:"tooltip"},"Change Status",-1))],8,Mt),o.setting.type==="MULTI"?(d(),l("div",{key:0,class:"icon tooltip-wrapper",onClick:u(g=>v(o.accountId,o.settingId,"/crm/college/my-branch"),["prevent"])},[n(x),s[13]||(s[13]=t("div",{class:"tooltip"},"My Branch",-1))],8,Nt)):p("",!0),t("div",{class:"icon tooltip-wrapper",onClick:u(g=>v(o.id,o.settingId,"/crm/college/library"),["prevent"])},[n(q),s[14]||(s[14]=t("div",{class:"tooltip"},"Library",-1))],8,Pt),t("div",{class:"icon tooltip-wrapper",onClick:u(g=>v(o.id,o.settingId,"/crm/organization/my-staff"),["prevent"])},[n(B),s[15]||(s[15]=t("div",{class:"tooltip"},"My Staff",-1))],8,zt),t("div",{class:"icon tooltip-wrapper",onClick:u(g=>v(o.id,o.settingId,"/crm/college/my-student"),["prevent"])},[n(G),s[16]||(s[16]=t("div",{class:"tooltip"},"My Student",-1))],8,At),t("div",{class:"icon tooltip-wrapper",onClick:u(g=>v(o.id,o.settingId,"/crm/college/setting/class-list"),["prevent"])},[n(H),s[17]||(s[17]=t("div",{class:"tooltip"},"Setttngs",-1))],8,Ot)])])])}),128))])])]),((I=i.value.organizationData)==null?void 0:I.length)<=0?(d(),l("div",$t,s[19]||(s[19]=[t("div",null,"No records Found!",-1)]))):p("",!0),((S=i.value.organizationData)==null?void 0:S.length)>0?(d(),l("div",Lt,[n(F,{currentPage:e.currentPage,totalItem:i.value.totalOrganization,itemsPerPage:e.limit,"onUpdate:currentPage":s[2]||(s[2]=o=>P(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):p("",!0)])]),n(Q,{show:i.value.statusModal,"onUpdate:show":s[8]||(s[8]=o=>i.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:b(()=>[s[20]||(s[20]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[3]||(s[3]=u(o=>i.value.statusModal=!1,["prevent"]))},[n(R)])]),default:b(()=>[t("div",Ut,[t("label",xt,[_(t("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=o=>e.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,e.changeStatus]]),t("div",qt,[n(j),s[21]||(s[21]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",Bt,[_(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>e.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Gt,[n(J),s[22]||(s[22]=t("div",{class:"title"},"PENDING",-1))])]),t("label",Ht,[_(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>e.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Ft,[n(K),s[23]||(s[23]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",Rt,[t("div",jt,[t("div",{class:"btn red-btn",onClick:s[7]||(s[7]=u(o=>i.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:N},"Submit")])])]),_:1},8,["show"])])}}};export{Kt as default};
