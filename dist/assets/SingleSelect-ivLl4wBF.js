import{k as p,d as k,B as S,n as V,l as g,c as d,w as L,a as m,v as x,Q as C,F as B,y as _,A,t as N,o as i}from"./index-QZaKag1-.js";const q={class:"single-select"},O=["placeholder"],E={class:"dropdown-options show-drop"},F=["onClick"],b={__name:"SingleSelect",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search..."},options:{type:Array,required:!0},outside:{type:Boolean,default:!0}},emits:["update:modelValue","selected","search"],setup(a){const r=a;p("");let l=p(null);const o=S(),n=k({get:()=>r.modelValue,set:e=>{o.emit("update:modelValue",e)}}),v=e=>{n.value=e.name,o.emit("update:modelValue",e.name),o.emit("selected",e),u()},f=()=>{o.emit("update:modelValue",n.value),o.emit("selected",{id:null,name:n.value}),u()},y=e=>{o.emit("update:modelValue",n.value),o.emit("search",n.value)},h=e=>e.name.toLowerCase().includes(n.value?n.value.toLowerCase():""),u=()=>{const e=document.querySelector("body").querySelectorAll("input"),t=Array.from(e).indexOf(l.value);e[t].parentNode.classList.remove("show-drop"),t<e.length-1&&(e[t+1].focus(),e[t+1].parentNode.classList.add("show-drop"))},w=()=>{const e=document.querySelector("body").querySelectorAll("input"),t=Array.from(e).indexOf(l.value);t>=0&&e[t].parentNode.classList.add("show-drop")};V(()=>{r.outside&&window.addEventListener("click",c)}),g(()=>{r.outside&&window.removeEventListener("click",c)});const c=e=>{const t=e.target,s=l.value.parentNode;s.contains(t)||s.classList.remove("show-drop")};return(e,t)=>(i(),d("div",q,[L(m("input",{type:"text",ref_key:"inputField",ref:l,"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),placeholder:a.placeholder,onKeydown:C(f,["enter"]),onKeyup:t[1]||(t[1]=s=>y()),onClick:w},null,40,O),[[x,n.value]]),m("ul",E,[(i(!0),d(B,null,_(a.options,s=>(i(),d("li",{key:s.id,class:A({"hidden-option":!h(s)}),onClick:I=>v(s)},N(s.name),11,F))),128))])]))}};export{b as default};
