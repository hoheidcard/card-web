import{d as H,u as O,e as j,n as J,p as K,C as Q,c as d,a as t,b as e,r as a,w as v,v as W,h as c,j as _,g as p,F as X,y as Y,s as Z,o as l,t as r,i as tt,E as S}from"./index-QZaKag1-.js";const st={class:"faq-page"},ot={class:"container"},nt={class:"table-card card"},et={class:"table-header"},at={class:"left"},it={class:"title-row"},dt={class:"icon"},lt={class:"right"},rt={class:"searchbar"},ut={class:"icon"},ct={class:"icons"},pt={class:"icons"},gt={class:"table-body p-16"},vt={class:"table-outer"},_t={class:"table"},mt={key:0,class:"zoom-image"},ht=["src"],ft={class:"text-primary"},bt={key:0,class:"badge success-badge"},yt={key:1,class:"badge warning-badge"},St={key:2,class:"badge danger-badge"},It={class:"option-btns"},wt=["onClick"],kt=["onClick"],Ct={key:0,class:"table-no-data"},zt={key:1,class:"table-footer"},Pt={class:"status-row"},Nt={for:"approve",class:"data"},Vt={class:"data-inner approve-card"},Et={for:"pending",class:"data"},Dt={class:"data-inner pending-card"},Mt={for:"block",class:"data"},Tt={class:"data-inner block-card"},qt={class:"modal-footer"},At={class:"btns"},$t={__name:"MyStudentList",setup(xt){const m=O(),h=K(),P=Z(),i=H(()=>m.state.OrganizationStudent),o=j({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,studentId:null,organizationSettingId:null,changeStatus:null});J(()=>{h.query.id&&(o.organizationId=h.query.id,o.organizationSettingId=h.query.settingId,f())}),Q(()=>o.keyword,()=>{clearTimeout(o.typingTimer),o.typingTimer=setTimeout(()=>{o.limit=10,o.offset=0,o.currentPage=1,f()},o.typingDelay)});function f(){m.dispatch("OrganizationStudent/getStudent",{limit:o.limit,offset:o.offset,keyword:o.keyword,organizationDetailId:o.organizationId})}function N(u,s){o.changeStatus=s,o.studentId=u,i.value.statusModal=!0}function V(){m.dispatch("OrganizationStudent/updateStudentStatus",{id:o.studentId,status:o.changeStatus})}const E=u=>{o.currentPage=u,o.offset=o.limit*(u-1),f()};function I(u,s,b){P.push({path:b,query:{id:u,settingId:s}})}return(u,s)=>{var w,k;const b=a("icon-help"),D=a("icon-search"),M=a("icon-download"),g=a("router-link"),T=a("icon-plus"),q=a("icon-edit"),y=a("icon-card"),A=a("icon-status"),x=a("Pagination"),U=a("icon-cross"),$=a("icon-success"),L=a("icon-warning"),B=a("icon-block"),F=a("Modal");return l(),d("section",st,[t("div",ot,[t("div",nt,[t("div",et,[t("div",at,[t("div",it,[t("div",dt,[e(b)]),s[9]||(s[9]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Student : List"),t("h5",{class:"main-title"},"Student")],-1))])]),t("div",lt,[t("div",rt,[v(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>o.keyword=n),placeholder:"Search here"},null,512),[[W,o.keyword]]),t("div",ut,[e(D)])]),t("div",ct,[e(g,{to:"/crm/organization/import-student?id="+o.organizationId+"&settingId="+o.organizationSettingId,class:"icon tooltip-wrapper"},{default:c(()=>[e(M,{class:""}),s[10]||(s[10]=t("div",{class:"tooltip"},"Import List",-1))]),_:1},8,["to"])]),t("div",pt,[t("div",{class:"icon tooltip-wrapper",onClick:s[1]||(s[1]=_(n=>I(o.organizationId,o.organizationSettingId,"/crm/organization/create-my-student"),["prevent"]))},[e(T),s[11]||(s[11]=t("div",{class:"tooltip"},"Add Student",-1))])])])]),t("div",gt,[t("div",vt,[t("table",_t,[s[17]||(s[17]=t("thead",null,[t("th",null,"Image"),t("th",null,"SR No."),t("th",null,"S. Name"),t("th",null,"F. Name"),t("th",null,"Class-Section"),t("th",null,"Photo Number"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(l(!0),d(X,null,Y(i.value.studentData,(n,R)=>{var C,z;return l(),d("tr",{key:R},[t("td",null,[n.profile?(l(),d("div",mt,[t("img",{src:`${n.profile}?width=200`,alt:""},null,8,ht)])):p("",!0)]),t("td",null,r(n.srNo),1),t("td",ft,[e(g,{to:{path:"/crm/organization/student-profile",query:{studentId:n.id,id:o.organizationId,settingId:o.organizationSettingId}}},{default:c(()=>[tt(r(n.name),1)]),_:2},1032,["to"])]),t("td",null,r(n.fatherName),1),t("td",null,r((C=n.classList)==null?void 0:C.name)+"-"+r((z=n.classDiv)==null?void 0:z.name),1),t("td",null,r(n.photoNumber),1),t("td",null,[n.status==="ACTIVE"?(l(),d("div",bt,r(n.status),1)):p("",!0),n.status==="PENDING"?(l(),d("div",yt,r(n.status),1)):p("",!0),n.status==="DEACTIVE"?(l(),d("div",St,r(n.status),1)):p("",!0)]),t("td",null,[t("div",It,[t("div",{class:"icon tooltip-wrapper",onClick:G=>I(n.id,o.organizationSettingId,"/crm/organization/update-my-student")},[e(q),s[12]||(s[12]=t("div",{class:"tooltip"},"Edit",-1))],8,wt),e(g,{class:"icon tooltip-wrapper",to:{path:"/crm/organization/final-student-card",query:{id:n.id,status:"Class"}}},{default:c(()=>[e(y),s[13]||(s[13]=t("div",{class:"tooltip"},"Student",-1))]),_:2},1032,["to"]),e(g,{class:"icon tooltip-wrapper",to:{path:"/crm/organization/final-student-card",query:{id:n.id,status:"Parent"}}},{default:c(()=>[e(y),s[14]||(s[14]=t("div",{class:"tooltip"},"Parent",-1))]),_:2},1032,["to"]),e(g,{class:"icon tooltip-wrapper",to:{path:"/crm/organization/final-student-card",query:{id:n.id,status:"House"}}},{default:c(()=>[e(y),s[15]||(s[15]=t("div",{class:"tooltip"},"House",-1))]),_:2},1032,["to"]),t("div",{class:"icon tooltip-wrapper",onClick:_(G=>N(n.id,n.status),["prevent"])},[e(A),s[16]||(s[16]=t("div",{class:"tooltip"},"Change Status",-1))],8,kt)])])])}),128))])])]),((w=i.value.studentData)==null?void 0:w.length)<=0?(l(),d("div",Ct,s[18]||(s[18]=[t("div",null,"No records Found!",-1)]))):p("",!0),((k=i.value.studentData)==null?void 0:k.length)>0?(l(),d("div",zt,[e(x,{currentPage:o.currentPage,totalItem:i.value.totalStudent,itemsPerPage:o.limit,"onUpdate:currentPage":s[2]||(s[2]=n=>E(n))},null,8,["currentPage","totalItem","itemsPerPage"])])):p("",!0)])])]),e(F,{show:i.value.statusModal,"onUpdate:show":s[8]||(s[8]=n=>i.value.statusModal=n),class:"status-modal",headerClasses:"header-bg"},{header:c(()=>[s[19]||(s[19]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[3]||(s[3]=_(n=>i.value.statusModal=!1,["prevent"]))},[e(U)])]),default:c(()=>[t("div",Pt,[t("label",Nt,[v(t("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=n=>o.changeStatus=n),value:"ACTIVE",id:"approve",name:"status"},null,512),[[S,o.changeStatus]]),t("div",Vt,[e($),s[20]||(s[20]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",Et,[v(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=n=>o.changeStatus=n),value:"PENDING",id:"pending",name:"status"},null,512),[[S,o.changeStatus]]),t("div",Dt,[e(L),s[21]||(s[21]=t("div",{class:"title"},"PENDING",-1))])]),t("label",Mt,[v(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=n=>o.changeStatus=n),value:"DEACTIVE",id:"block",name:"status"},null,512),[[S,o.changeStatus]]),t("div",Tt,[e(B),s[22]||(s[22]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",qt,[t("div",At,[t("div",{class:"btn red-btn",onClick:s[7]||(s[7]=_(n=>i.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:V},"Submit")])])]),_:1},8,["show"])])}}};export{$t as default};
