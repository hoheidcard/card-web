import{d as z,u as K,e as I,k as C,m as l,n as W,p as J,c as r,a as t,b as f,r as h,F as Y,y as T,A as b,h as k,o as v,t as i,x as R,j as w,B as Q}from"./index-QZaKag1-.js";import{_ as X}from"./delete-ClllWuc2.js";const tt={class:"event-calendar-section"},et={class:"container calender-box flex gap-10"},st={class:"card"},ot={class:"top-row"},nt={class:"left"},lt={class:"arrows"},at={class:"right"},it={class:"btns"},dt=["onClick"],rt={class:"calendar-content"},vt={class:"main-list-time"},ct={class:"sub-list"},ut=["onClick"],ft={class:"event-badge"},mt={class:"right-container w-40"},_t={class:"card"},Dt={class:"patient-list"},pt=["onClick"],Mt={class:"top"},ht={class:"p-info"},Yt={class:"name"},Tt={class:"about"},yt={class:"p-id"},gt={class:"event-details"},Ct={class:"data"},bt={class:"val"},kt={class:"data"},wt={class:"val"},Et={class:"data"},Ot={class:"val"},Ft={class:"data"},At={class:"val"},It={class:"data"},Rt={class:"val"},St={class:"modal-footer"},Nt={class:"btns"},Bt={__name:"EventCalendar",setup(xt){const y=K(),S=J(),c=z(()=>y.state.Event),N=[{id:"SCHOOL",name:"SCHOOL"},{id:"ORGANIZATION",name:"ORGANIZATION"},{id:"PARTNER",name:"PARTNER"},{id:"SUB PARTNER",name:"SUB PARTNER"}],m=I({createModal:!1,eventModal:!1,confirmModal:!1,tab:1,timePicker:"00:00"}),o=I({submit:!1,limit:10,offset:0,keyword:"",editMode:!1,school:null,allSchoolStatus:!1,title:null,desc:null,eventDate:null,fromTime:"00:00",toTime:"00:00",eventFor:"SCHOOL",all:!1,eventIds:null,fromDate:null,toDate:null,for:N[0],eventTitle:null,eventDesc:null,evntDate:null,evtFromTime:null,evtToTime:null,evtFor:null,eventId:null,type:null}),x=Q(),E=C([]),d=C(null),L=["Month"],a=C("Month");let _=l(d).startOf(a.value),D=l(d).endOf(a.value);W(()=>{d.value=l().format("YYYY-MM-DD"),M(),g()});const $=()=>{x.emit("update:changeDate",{date:d.value,type:a.value})};function B(){d.value=l(_).add(32,"days").format("YYYY-MM-DD"),M(),g()}function P(){d.value=l(D).subtract(32,"days").format("YYYY-MM-DD"),M(),g()}function O(s){m.eventModal=!0,o.eventTitle=s.title,o.eventDesc=s.desc,o.evntDate=s.eventDate,o.evtFromTime=s.fromTime,o.evtToTime=s.toTime,o.evtFor=s.eventFor,o.eventId=s.id,o.type=s.type,o.title=s.title,o.desc=s.desc,o.eventDate=s.eventDate,o.fromTime=s.fromTime,o.toTime=s.toTime,o.eventFor=s.eventFor,o.all=s.all}const H=s=>{s!==a.value&&(a.value=s,$(),M())};function F(s){if(s)return l(s).format("MMM Do YYYY")}function p(s){if(s)return l(s,"HH:mm:ss").format("hh:mm A")}const U=s=>{if(s)return a.value==="Day"?c.value.eventData.filter(e=>l(e.eventDate).format("YYYY-MM-DD hh:mm A").toString()===s):c.value.eventData.filter(e=>l(e.eventDate).format("YYYY-MM-DD").toString()===s)},M=()=>{_=l(d.value).startOf(a.value),D=l(d.value).endOf(a.value);const s=[];let e=_.clone();for(;e<=D;)(a.value==="Week"||a.value==="Month")&&(s.push({time:a.value==="Month"?e.format("DD"):e.format("ddd"),date:e.format("YYYY-MM-DD")}),e.add(1,"day"));E.value=s};function g(){var s;y.dispatch("Event/getEvents",{id:S.query.id,limit:o.limit,offset:o.offset,keyword:o.keyword,fromDate:l(_).format("YYYY-MM-DD"),toDate:l(D).format("YYYY-MM-DD"),eventFor:(s=o.for)==null?void 0:s.id})}function V(){y.dispatch("Event/deleteEvent",{id:o.eventId})}return(s,e)=>{const G=h("icon-left-arrow"),Z=h("icon-right-arrow"),j=h("icon-cross"),A=h("Modal");return v(),r("div",tt,[t("div",et,[t("div",st,[t("div",ot,[t("div",nt,[t("div",lt,[t("div",{class:"icon",onClick:e[0]||(e[0]=n=>P())},[f(G)]),t("div",{class:"icon",onClick:e[1]||(e[1]=n=>B())},[f(Z)])])]),t("div",at,[t("div",it,[(v(),r(Y,null,T(L,n=>t("button",{type:"button",key:n,class:b(`btn ${a.value===n?"active":""}`),onClick:u=>H(n)},i(R(l)(d.value).format("MMMM yyyy")),11,dt)),64))])])]),t("div",rt,[t("ul",{class:b([a.value,"main-list"])},[(v(!0),r(Y,null,T(E.value,n=>(v(),r("li",{class:b(["main-list-item",R(l)().format("YYYY-MM-DD")==n.date?"current":""]),key:n.time},[t("div",vt,i(n.time),1),t("ul",ct,[(v(!0),r(Y,null,T(U(n.date),u=>(v(),r("li",{class:"sub-list-item",key:u.title,onClick:w(q=>O(u),["prevent"])},[t("div",ft,i(u.title),1)],8,ut))),128))])],2))),128))],2)])]),t("div",mt,[t("div",_t,[e[8]||(e[8]=t("div",{class:"top-row"},[t("div",{class:"apt-btn"},[t("div",{class:"icon"},"Event List")])],-1)),e[9]||(e[9]=t("div",{class:"tabs"},null,-1)),t("div",Dt,[(v(!0),r(Y,null,T(c.value.eventData,(n,u)=>(v(),r("div",{class:"list-item",key:u},[t("div",{class:"p-info-card card1 pointer",onClick:q=>O(n)},[t("div",Mt,[e[7]||(e[7]=t("div",{class:"p-img"},null,-1)),t("div",ht,[t("div",Yt,[t("strong",null,i(n.title),1)]),t("div",Tt,[t("span",null,i(F(n.eventDate)),1)]),t("div",yt,i(p(n.fromTime))+" - "+i(p(n.toTime)),1)])])],8,pt)]))),128))])])])]),f(A,{show:m.eventModal,"onUpdate:show":e[3]||(e[3]=n=>m.eventModal=n),class:"event-modal",headerClasses:"header-bg"},{header:k(()=>[e[10]||(e[10]=t("div",{class:"title",showHeader:"true"},"Details",-1)),t("div",{class:"close-btn",onClick:e[2]||(e[2]=w(n=>m.eventModal=!1,["prevent"]))},[f(j)])]),default:k(()=>[t("div",gt,[t("div",Ct,[e[11]||(e[11]=t("div",{class:"title"},"Title :",-1)),t("div",bt,i(o.eventTitle),1)]),t("div",kt,[e[12]||(e[12]=t("div",{class:"title"},"Description :",-1)),t("div",wt,i(o.eventDesc),1)]),t("div",Et,[e[13]||(e[13]=t("div",{class:"title"},"Date :",-1)),t("div",Ot,i(F(o.evntDate)),1)]),t("div",Ft,[e[14]||(e[14]=t("div",{class:"title"},"Time :",-1)),t("div",At,i(p(o.evtFromTime))+" to "+i(p(o.evtToTime)),1)]),t("div",It,[e[15]||(e[15]=t("div",{class:"title"},"Event For :",-1)),t("div",Rt,i(o.type==="UPPER"?o.eventFor:o.type),1)])])]),_:1},8,["show"]),f(A,{show:c.value.confirmModal,"onUpdate:show":e[6]||(e[6]=n=>c.value.confirmModal=n),class:"confirm-modal",headerClasses:"header-bg"},{default:k(()=>[e[16]||(e[16]=t("div",{class:"delete-icon"},[t("img",{src:X,alt:""})],-1)),e[17]||(e[17]=t("h4",{class:"text-gree"},"Are you sure want to Delete?",-1)),t("div",St,[t("div",Nt,[t("div",{class:"btn red-btn",onClick:e[4]||(e[4]=w(n=>c.value.confirmModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:e[5]||(e[5]=n=>V())},"Delete")])])]),_:1},8,["show"])])}}};export{Bt as default};
