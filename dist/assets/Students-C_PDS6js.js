import{d as W,u as X,e as Y,n as Z,C as tt,c as n,a as t,b as l,r as i,w as p,v as st,q as et,g as r,F as ot,y as at,t as u,D as z,h as v,i as A,j as f,E as S,s as nt,p as lt,o as a}from"./index-QZaKag1-.js";const it={class:"faq-page"},dt={class:"table-card card"},rt={class:"table-header"},ut={class:"left"},ct={class:"title-row"},pt={class:"icon"},gt={class:"right"},vt={class:"searchbar"},_t={class:"icon"},ht={class:"searchbar"},mt={class:"select-dropdown"},ft={class:"table-body p-16"},St={class:"table-outer"},bt={class:"table"},yt={key:0,class:"zoom-image"},kt=["src"],Ct={class:"text-primary"},Dt={key:0,class:"badge success-badge"},It={key:1,class:"badge warning-badge"},Et={key:2,class:"badge danger-badge"},wt={class:"option-btns"},Nt=["onClick"],Tt=["onClick"],Vt=["onClick"],Pt={key:0,class:"table-no-data"},Mt={key:1,class:"table-footer"},zt={class:"status-row"},At={for:"approve",class:"data"},Ot={class:"data-inner approve-card"},Ut={for:"pending",class:"data"},xt={class:"data-inner pending-card"},qt={for:"block",class:"data"},Lt={class:"data-inner block-card"},$t={class:"modal-footer"},Bt={class:"btns"},Ht={__name:"Students",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(O){const _=O,h=X();lt();const U=nt(),d=W(()=>h.state.Dashboard),o=Y({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"STUDENT",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,id:null,partnersAccountId:null,changeStatus:null});Z(()=>{g()}),tt(()=>o.keyword,()=>{clearTimeout(o.typingTimer),o.typingTimer=setTimeout(()=>{o.limit=10,o.offset=0,o.currentPage=1,g()},o.typingDelay)});function g(){h.dispatch("Dashboard/getStudents",{limit:o.limit,offset:o.offset,keyword:o.keyword,status:o.status,fromDate:_.fromDate,toDate:_.toDate,roles:"STUDENT",all:_.all})}function x(c,s){o.changeStatus=s,o.id=c,d.value.statusModal=!0}function q(){h.dispatch("OrganizationStudent/updateStudentStatus",{id:o.id,status:o.changeStatus}),d.value.statusModal=!1}const L=c=>{o.currentPage=c,o.offset=o.limit*(c-1),g()};function $(){g()}function b(c,s,m){U.push({path:m,query:{id:c,settingId:s}})}return(c,s)=>{var C,D;const m=i("icon-partner"),B=i("icon-search"),y=i("router-link"),k=i("icon-edit"),G=i("icon-status"),H=i("Pagination"),F=i("icon-cross"),R=i("icon-success"),j=i("icon-warning"),J=i("icon-block"),K=i("Modal");return a(),n("section",it,[t("div",dt,[t("div",rt,[t("div",ut,[t("div",ct,[t("div",pt,[l(m)]),s[9]||(s[9]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Students : List"),t("h5",{class:"main-title"},"Our Students")],-1))])]),t("div",gt,[t("div",vt,[p(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>o.keyword=e),placeholder:"Search here"},null,512),[[st,o.keyword]]),t("div",_t,[l(B)])]),t("div",ht,[t("div",mt,[p(t("select",{name:"",id:"","onUpdate:modelValue":s[1]||(s[1]=e=>o.status=e),onChange:$},s[10]||(s[10]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[et,o.status]])])])])]),t("div",ft,[t("div",St,[t("table",bt,[s[14]||(s[14]=t("thead",null,[t("th",null,"Image"),t("th",null,"SR No."),t("th",null,"S. Name"),t("th",null,"F. Name"),t("th",null,"Class-Section"),t("th",null,"School"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(a(!0),n(ot,null,at(d.value.studentData,(e,Q)=>{var I,E,w,N,T,V,P;return a(),n("tr",{key:Q},[t("td",null,[e.profile?(a(),n("div",yt,[t("img",{src:`${e.profile}?width=200`,alt:""},null,8,kt)])):r("",!0)]),t("td",null,u(e.srNo),1),t("td",Ct,[((I=e.organizationDetail)==null?void 0:I.account.roles)==="SCHOOL"?(a(),z(y,{key:0,to:{path:"/crm/organization/student-profile",query:{studentId:e.id,id:o.organizationId,settingId:o.organizationSettingId}}},{default:v(()=>[A(u(e.name),1)]),_:2},1032,["to"])):r("",!0),((E=e.organizationDetail)==null?void 0:E.account.roles)==="SCHOOL"?(a(),z(y,{key:1,to:{path:"/crm/college/student-profile",query:{studentId:e.id,id:o.organizationId,settingId:o.organizationSettingId}}},{default:v(()=>[A(u(e.name),1)]),_:2},1032,["to"])):r("",!0)]),t("td",null,u(e.fatherName),1),t("td",null,u((w=e.classList)==null?void 0:w.name)+"-"+u((N=e.classDiv)==null?void 0:N.name),1),t("td",null,u((T=e.organizationDetail)==null?void 0:T.name),1),t("td",null,[e.status==="ACTIVE"?(a(),n("div",Dt,u(e.status),1)):r("",!0),e.status==="PENDING"?(a(),n("div",It,u(e.status),1)):r("",!0),e.status==="DEACTIVE"?(a(),n("div",Et,u(e.status),1)):r("",!0)]),t("td",null,[t("div",wt,[((V=e.organizationDetail)==null?void 0:V.account.roles)==="SCHOOL"?(a(),n("div",{key:0,class:"icon tooltip-wrapper",onClick:M=>b(e.id,e.settingId,"/crm/organization/update-my-student")},[l(k),s[11]||(s[11]=t("div",{class:"tooltip"},"Edit",-1))],8,Nt)):r("",!0),((P=e.organizationDetail)==null?void 0:P.account.roles)==="SCHOOL"?(a(),n("div",{key:1,class:"icon tooltip-wrapper",onClick:M=>b(e.id,e.settingId,"/crm/college/update-my-student")},[l(k),s[12]||(s[12]=t("div",{class:"tooltip"},"Edit",-1))],8,Tt)):r("",!0),t("div",{class:"icon tooltip-wrapper",onClick:f(M=>x(e.id,e.status),["prevent"])},[l(G),s[13]||(s[13]=t("div",{class:"tooltip"},"Change Status",-1))],8,Vt)])])])}),128))])])]),((C=d.value.studentData)==null?void 0:C.length)<=0?(a(),n("div",Pt,s[15]||(s[15]=[t("div",null,"No records Found!",-1)]))):r("",!0),((D=d.value.studentData)==null?void 0:D.length)>0?(a(),n("div",Mt,[l(H,{currentPage:o.currentPage,totalItem:d.value.totalStudent,itemsPerPage:o.limit,"onUpdate:currentPage":s[2]||(s[2]=e=>L(e))},null,8,["currentPage","totalItem","itemsPerPage"])])):r("",!0)])]),l(K,{show:d.value.statusModal,"onUpdate:show":s[8]||(s[8]=e=>d.value.statusModal=e),class:"status-modal",headerClasses:"header-bg"},{header:v(()=>[s[16]||(s[16]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[3]||(s[3]=f(e=>d.value.statusModal=!1,["prevent"]))},[l(F)])]),default:v(()=>[t("div",zt,[t("label",At,[p(t("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=e=>o.changeStatus=e),value:"ACTIVE",id:"approve",name:"status"},null,512),[[S,o.changeStatus]]),t("div",Ot,[l(R),s[17]||(s[17]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",Ut,[p(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=e=>o.changeStatus=e),value:"PENDING",id:"pending",name:"status"},null,512),[[S,o.changeStatus]]),t("div",xt,[l(j),s[18]||(s[18]=t("div",{class:"title"},"PENDING",-1))])]),t("label",qt,[p(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=e=>o.changeStatus=e),value:"DEACTIVE",id:"block",name:"status"},null,512),[[S,o.changeStatus]]),t("div",Lt,[l(J),s[19]||(s[19]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",$t,[t("div",Bt,[t("div",{class:"btn red-btn",onClick:s[7]||(s[7]=f(e=>d.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:q},"Submit")])])]),_:1},8,["show"])])}}};export{Ht as default};
