import{d as Z,u as tt,e as st,n as ot,C as et,c as r,a as t,b as n,r as a,w as g,v as nt,q as at,g as v,F as lt,y as it,h as k,i as rt,t as d,j as u,E as C,s as dt,p as ct,o as c}from"./index-QZaKag1-.js";const ut={class:"faq-page"},pt={class:"table-card card"},vt={class:"table-header"},_t={class:"left"},gt={class:"title-row"},ht={class:"icon"},mt={class:"right"},ft={class:"searchbar"},bt={class:"icon"},kt={class:"searchbar"},Ct={class:"select-dropdown"},yt={class:"table-body p-16"},It={class:"table-outer"},wt={class:"table"},Pt={key:0,class:"zoom-image"},St=["src"],Dt={key:0,class:"badge success-badge"},Et={key:1,class:"badge warning-badge"},Vt={key:2,class:"badge danger-badge"},Nt={class:"option-btns"},Tt=["onClick"],Mt=["onClick"],At=["onClick"],$t=["onClick"],xt=["onClick"],Ut=["onClick"],qt=["onClick"],zt={key:0,class:"table-no-data"},Bt={key:1,class:"table-footer"},Gt={class:"status-row"},Rt={for:"approve",class:"data"},Ft={class:"data-inner approve-card"},Lt={for:"pending",class:"data"},Ot={class:"data-inner pending-card"},jt={for:"block",class:"data"},Ht={class:"data-inner block-card"},Jt={class:"modal-footer"},Kt={class:"btns"},Wt={__name:"PartnerList",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(T){const m=T,f=tt();ct();const y=dt(),l=Z(()=>f.state.Dashboard),e=st({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"PARTNER",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,partnersId:null,partnersAccountId:null,changeStatus:null});ot(()=>{h()}),et(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,h()},e.typingDelay)});function h(){f.dispatch("Dashboard/getPartners",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,fromDate:m.fromDate,toDate:m.toDate,roles:e.roles,all:m.all})}function M(i,s){e.changeStatus=s,e.partnersId=i,l.value.statusModal=!0}function A(){f.dispatch("Partners/updatePartnersStatus",{id:e.partnersId,status:e.changeStatus}),l.value.statusModal=!1}const $=i=>{e.currentPage=i,e.offset=e.limit*(i-1),h()};function x(){h()}function U(i,s){y.push({path:s,query:{id:i}})}function _(i,s,b){y.push({path:b,query:{id:i,settingId:s}})}return(i,s)=>{var I,w;const b=a("icon-partner"),q=a("icon-search"),z=a("router-link"),B=a("icon-edit"),G=a("icon-status"),R=a("icon-menu"),F=a("icon-school"),L=a("icon-college"),O=a("icon-organizations"),j=a("icon-setting"),H=a("Pagination"),J=a("icon-cross"),K=a("icon-success"),Q=a("icon-warning"),W=a("icon-block"),X=a("Modal");return c(),r("section",ut,[t("div",pt,[t("div",vt,[t("div",_t,[t("div",gt,[t("div",ht,[n(b)]),s[9]||(s[9]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Partners : List"),t("h5",{class:"main-title"},"Our Partners")],-1))])]),t("div",mt,[t("div",ft,[g(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.keyword=o),placeholder:"Search here"},null,512),[[nt,e.keyword]]),t("div",bt,[n(q)])]),t("div",kt,[t("div",Ct,[g(t("select",{name:"",id:"","onUpdate:modelValue":s[1]||(s[1]=o=>e.status=o),onChange:x},s[10]||(s[10]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[at,e.status]])])])])]),t("div",yt,[t("div",It,[t("table",wt,[s[18]||(s[18]=t("thead",null,[t("th"),t("th",null,"Name"),t("th",null,"Phone No"),t("th",null,"Created By"),t("th",null,"Address"),t("th",null,"Type"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(c(!0),r(lt,null,it(l.value.partnersData,(o,Y)=>{var P,S,D,E,V,N;return c(),r("tr",{key:Y},[t("td",null,[o.logo?(c(),r("div",Pt,[t("img",{src:`${o.logo}?width=200`,alt:""},null,8,St)])):v("",!0)]),t("td",null,[n(z,{to:`/crm/partners/setting/department?id=${o.id}&settingId=${o.settingId}`,class:"profile-link hover-color"},{default:k(()=>[rt(d(o.firmName),1)]),_:2},1032,["to"])]),t("td",null,d((P=o.account)==null?void 0:P.phoneNumber),1),t("td",null,d(((D=(S=o.updated)==null?void 0:S.staffDetail)==null?void 0:D.name)||((V=(E=o.updated)==null?void 0:E.partnerDetail[0])==null?void 0:V.firmName)),1),t("td",null,d(o.state)+"/"+d(o.city),1),t("td",null,d((N=o.account)==null?void 0:N.roles),1),t("td",null,[o.status==="ACTIVE"?(c(),r("div",Dt,d(o.status),1)):v("",!0),o.status==="PENDING"?(c(),r("div",Et,d(o.status),1)):v("",!0),o.status==="DEACTIVE"?(c(),r("div",Vt,d(o.status),1)):v("",!0)]),t("td",null,[t("div",Nt,[t("div",{class:"icon tooltip-wrapper",onClick:p=>U(o.id,"/crm/edit-partners")},[n(B),s[11]||(s[11]=t("div",{class:"tooltip"},"Edit",-1))],8,Tt),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>M(o.id,o.status),["prevent"])},[n(G),s[12]||(s[12]=t("div",{class:"tooltip"},"Change Status",-1))],8,Mt),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>_(o.accountId,o.settingId,"/crm/sub-partners"),["prevent"])},[n(R),s[13]||(s[13]=t("div",{class:"tooltip"},"Sub Partner",-1))],8,At),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>_(o.accountId,o.settingId,"/crm/partners/schools"),["prevent"])},[n(F),s[14]||(s[14]=t("div",{class:"tooltip"},"My School",-1))],8,$t),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>_(o.accountId,o.settingId,"/crm/partners/colleges"),["prevent"])},[n(L),s[15]||(s[15]=t("div",{class:"tooltip"},"My School",-1))],8,xt),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>_(o.accountId,o.settingId,"/crm/partners/organizations"),["prevent"])},[n(O),s[16]||(s[16]=t("div",{class:"tooltip"},"My Organizations",-1))],8,Ut),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>_(o.id,o.settingId,"/crm/partners/setting"),["prevent"])},[n(j),s[17]||(s[17]=t("div",{class:"tooltip"},"Setttngs",-1))],8,qt)])])])}),128))])])]),((I=l.value.partnersData)==null?void 0:I.length)<=0?(c(),r("div",zt,s[19]||(s[19]=[t("div",null,"No records Found!",-1)]))):v("",!0),((w=l.value.partnersData)==null?void 0:w.length)>0?(c(),r("div",Bt,[n(H,{currentPage:e.currentPage,totalItem:l.value.totalPartners,itemsPerPage:e.limit,"onUpdate:currentPage":s[2]||(s[2]=o=>$(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):v("",!0)])]),n(X,{show:l.value.statusModal,"onUpdate:show":s[8]||(s[8]=o=>l.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:k(()=>[s[20]||(s[20]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[3]||(s[3]=u(o=>l.value.statusModal=!1,["prevent"]))},[n(J)])]),default:k(()=>[t("div",Gt,[t("label",Rt,[g(t("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=o=>e.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Ft,[n(K),s[21]||(s[21]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",Lt,[g(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>e.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Ot,[n(Q),s[22]||(s[22]=t("div",{class:"title"},"PENDING",-1))])]),t("label",jt,[g(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>e.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Ht,[n(W),s[23]||(s[23]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",Jt,[t("div",Kt,[t("div",{class:"btn red-btn",onClick:s[7]||(s[7]=u(o=>l.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:A},"Submit")])])]),_:1},8,["show"])])}}};export{Wt as default};
