import{d as J,u as K,e as Q,n as W,C as X,c as d,a as t,b as a,r as e,w as p,v as Y,q as tt,g as u,F as st,y as ot,h as b,i as nt,t as r,j as g,E as y,s as at,p as et,o as c}from"./index-QZaKag1-.js";const it={class:"faq-page"},lt={class:"table-card card"},dt={class:"table-header"},rt={class:"left"},ct={class:"title-row"},ut={class:"icon"},pt={class:"right"},gt={class:"searchbar"},vt={class:"icon"},_t={class:"searchbar"},ht={class:"select-dropdown"},mt={class:"table-body p-16"},ft={class:"table-outer"},bt={class:"table"},yt={key:0,class:"zoom-image"},Ct=["src"],kt={key:0,class:"badge success-badge"},It={key:1,class:"badge warning-badge"},wt={key:2,class:"badge danger-badge"},Dt={class:"option-btns"},St=["onClick"],Et=["onClick"],zt=["onClick"],Vt=["onClick"],Nt={key:0,class:"table-no-data"},Tt={key:1,class:"table-footer"},Pt={class:"status-row"},Mt={for:"approve",class:"data"},At={class:"data-inner approve-card"},Ot={for:"pending",class:"data"},$t={class:"data-inner pending-card"},xt={for:"block",class:"data"},Ut={class:"data-inner block-card"},qt={class:"modal-footer"},Bt={class:"btns"},Rt={__name:"OrganizationList",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(V){const _=V,h=K();et();const C=at(),i=J(()=>h.state.Dashboard),n=Q({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"ORGANIZATION",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,changeStatus:null});W(()=>{v()}),X(()=>n.keyword,()=>{clearTimeout(n.typingTimer),n.typingTimer=setTimeout(()=>{n.limit=10,n.offset=0,n.currentPage=1,v()},n.typingDelay)});function v(){h.dispatch("Dashboard/getOrganization",{limit:n.limit,offset:n.offset,keyword:n.keyword,status:n.status,roles:n.roles,fromDate:_.fromDate,toDate:_.toDate,all:_.all})}function N(l,s){n.changeStatus=s,n.organizationId=l,i.value.statusModal=!0}function T(){h.dispatch("Organization/updateOrganizationStatus",{id:n.organizationId,status:n.changeStatus}),i.value.statusModal=!1}const P=l=>{n.currentPage=l,n.offset=n.limit*(l-1),v()};function M(){v()}function A(l,s){C.push({path:s,query:{id:l}})}function k(l,s,m){C.push({path:m,query:{id:l,settingId:s}})}return(l,s)=>{var I,w;const m=e("icon-organizations"),O=e("icon-search"),$=e("router-link"),x=e("icon-edit"),U=e("icon-status"),q=e("icon-menu"),B=e("icon-setting"),G=e("Pagination"),R=e("icon-cross"),F=e("icon-success"),L=e("icon-warning"),j=e("icon-block"),H=e("Modal");return c(),d("section",it,[t("div",lt,[t("div",dt,[t("div",rt,[t("div",ct,[t("div",ut,[a(m)]),s[9]||(s[9]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Organization : List"),t("h5",{class:"main-title"},"Our Organization")],-1))])]),t("div",pt,[t("div",gt,[p(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>n.keyword=o),placeholder:"Search here"},null,512),[[Y,n.keyword]]),t("div",vt,[a(O)])]),t("div",_t,[t("div",ht,[p(t("select",{name:"",id:"","onUpdate:modelValue":s[1]||(s[1]=o=>n.status=o),onChange:M},s[10]||(s[10]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[tt,n.status]])])])])]),t("div",mt,[t("div",ft,[t("table",bt,[s[15]||(s[15]=t("thead",null,[t("th"),t("th",null,"Name"),t("th",null,"Contact No"),t("th",null,"Created By"),t("th",null,"State/City"),t("th",null,"Type"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(c(!0),d(st,null,ot(i.value.organizationData,(o,Z)=>{var D,S,E,z;return c(),d("tr",{key:Z},[t("td",null,[o.image?(c(),d("div",yt,[t("img",{src:`${o.image}?width=200`,alt:""},null,8,Ct)])):u("",!0)]),t("td",null,[a($,{to:`/crm/organization/setting/department?id=${o.id}&settingId=${o.settingId}`,class:"profile-link hover-color"},{default:b(()=>[nt(r(o.name),1)]),_:2},1032,["to"])]),t("td",null,r(o.contactNo),1),t("td",null,r(((S=(D=o.updated)==null?void 0:D.staffDetail)==null?void 0:S.name)||((z=(E=o.updated)==null?void 0:E.partnerDetail[0])==null?void 0:z.firmName)),1),t("td",null,r(o.state)+"/"+r(o.city),1),t("td",null,r(o.type),1),t("td",null,[o.status==="ACTIVE"?(c(),d("div",kt,r(o.status),1)):u("",!0),o.status==="PENDING"?(c(),d("div",It,r(o.status),1)):u("",!0),o.status==="DEACTIVE"?(c(),d("div",wt,r(o.status),1)):u("",!0)]),t("td",null,[t("div",Dt,[t("div",{class:"icon tooltip-wrapper",onClick:f=>A(o.id,"/crm/edit-organization")},[a(x),s[11]||(s[11]=t("div",{class:"tooltip"},"Edit",-1))],8,St),t("div",{class:"icon tooltip-wrapper",onClick:g(f=>N(o.id,o.status),["prevent"])},[a(U),s[12]||(s[12]=t("div",{class:"tooltip"},"Change Status",-1))],8,Et),t("div",{class:"icon tooltip-wrapper",onClick:g(f=>k(o.accountId,o.settingId,"/crm/organization/my-branch"),["prevent"])},[a(q),s[13]||(s[13]=t("div",{class:"tooltip"},"My Branch",-1))],8,zt),t("div",{class:"icon tooltip-wrapper",onClick:g(f=>k(o.id,o.settingId,"/crm/organization/setting/designation"),["prevent"])},[a(B),s[14]||(s[14]=t("div",{class:"tooltip"},"Setttngs",-1))],8,Vt)])])])}),128))])])]),((I=i.value.organizationData)==null?void 0:I.length)<=0?(c(),d("div",Nt,s[16]||(s[16]=[t("div",null,"No records Found!",-1)]))):u("",!0),((w=i.value.organizationData)==null?void 0:w.length)>0?(c(),d("div",Tt,[a(G,{currentPage:n.currentPage,totalItem:i.value.totalOrganization,itemsPerPage:n.limit,"onUpdate:currentPage":s[2]||(s[2]=o=>P(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):u("",!0)])]),a(H,{show:i.value.statusModal,"onUpdate:show":s[8]||(s[8]=o=>i.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:b(()=>[s[17]||(s[17]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[3]||(s[3]=g(o=>i.value.statusModal=!1,["prevent"]))},[a(R)])]),default:b(()=>[t("div",Pt,[t("label",Mt,[p(t("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=o=>n.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[y,n.changeStatus]]),t("div",At,[a(F),s[18]||(s[18]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",Ot,[p(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>n.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[y,n.changeStatus]]),t("div",$t,[a(L),s[19]||(s[19]=t("div",{class:"title"},"PENDING",-1))])]),t("label",xt,[p(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>n.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[y,n.changeStatus]]),t("div",Ut,[a(j),s[20]||(s[20]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",qt,[t("div",Bt,[t("div",{class:"btn red-btn",onClick:s[7]||(s[7]=g(o=>i.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:T},"Submit")])])]),_:1},8,["show"])])}}};export{Rt as default};
