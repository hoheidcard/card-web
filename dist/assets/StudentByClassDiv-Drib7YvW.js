import{d as G,u as j,e as J,n as K,p as Q,C as W,c as d,a as t,b as n,r as i,w as y,v as X,j as r,g as p,F as Y,y as Z,h as c,s as tt,o as u,t as v,i as st,E as S}from"./index-QZaKag1-.js";const ot={class:"faq-page"},et={class:"container"},nt={class:"table-card card"},at={class:"table-header"},it={class:"left"},lt={class:"title-row"},dt={class:"icon"},rt={class:"right"},ut={class:"searchbar"},ct={class:"icon"},pt={class:"icons"},vt={class:"icons"},gt={class:"icons"},_t={class:"table-body p-16"},ht={class:"table-outer"},mt={class:"table"},bt=["onChange"],yt={key:0},ft={key:1},Ct={key:2},St={key:3},It={key:0,class:"zoom-image"},kt=["src"],wt={class:"text-primary"},zt={key:0,class:"badge success-badge"},Mt={key:1,class:"badge warning-badge"},Vt={key:2,class:"badge danger-badge"},Dt={class:"option-btns"},Et=["onClick"],Nt=["onClick"],Pt={key:0,class:"table-no-data"},Tt={class:"status-row"},At={for:"approve",class:"data"},$t={class:"data-inner approve-card"},qt={for:"pending",class:"data"},xt={class:"data-inner pending-card"},Lt={for:"block",class:"data"},Ut={class:"data-inner block-card"},Bt={class:"modal-footer"},Ot={class:"btns"},Rt={class:"modal-footer"},Ht={class:"btns"},Ft={class:"modal-footer"},Gt={class:"btns"},Kt={__name:"StudentByClassDiv",setup(jt){const g=j(),_=Q(),D=tt(),a=G(()=>g.state.OrganizationStudent),e=J({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,studentId:null,organizationSettingId:null,changeStatus:null,ids:[],classListId:null});K(()=>{_.query.id&&(e.organizationId=_.query.id,e.organizationSettingId=_.query.settingId,I(),g.dispatch("OrganizationStudent/getMyClasses",{settingId:_.query.settingId}))}),W(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,I()},e.typingDelay)});function E(l){const s=e.ids.findIndex(h=>h===l);s<0?e.ids.push(l):e.ids.splice(s,1)}const N=()=>{if(e.ids.length>0){const l=[];e.ids.forEach(s=>{l.push({id:s,card:!0})}),g.dispatch("OrganizationStudent/updateStudentCard",l)}else g.dispatch("Alert/error",{msg:"Please seclect student!"})},P=()=>{if(e.ids.length>0&&e.classListId){const l=[];e.ids.forEach(s=>{l.push({id:s,classListId:e.classListId})}),g.dispatch("OrganizationStudent/promoteClass",l)}else g.dispatch("Alert/error",{msg:"Please seclect student and class!"})};function I(){g.dispatch("OrganizationStudent/getStudentByClassDiv",{limit:e.limit,offset:e.offset,keyword:e.keyword,organizationDetailId:e.organizationId,classListId:_.query.classListId,classDivId:_.query.classDivId})}function T(l,s){e.changeStatus=s,e.studentId=l,a.value.statusModal=!0}function A(){g.dispatch("OrganizationStudent/updateStudentStatus",{id:e.studentId,status:e.changeStatus})}function k(l,s,h){D.push({path:h,query:{id:l,settingId:s}})}return(l,s)=>{var w;const h=i("icon-help"),$=i("icon-search"),m=i("icon-card"),q=i("icon-plus"),x=i("icon-asign"),b=i("router-link"),L=i("icon-edit"),U=i("icon-status"),f=i("icon-cross"),B=i("icon-success"),O=i("icon-warning"),R=i("icon-block"),C=i("Modal"),H=i("SingleSelectId");return u(),d("section",ot,[t("div",et,[t("div",nt,[t("div",at,[t("div",it,[t("div",lt,[t("div",dt,[n(h)]),s[17]||(s[17]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Student : List"),t("h5",{class:"main-title"},"Student")],-1))])]),t("div",rt,[t("div",ut,[y(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.keyword=o),placeholder:"Search here"},null,512),[[X,e.keyword]]),t("div",ct,[n($)])]),t("div",pt,[t("div",{class:"icon tooltip-wrapper",onClick:s[1]||(s[1]=r(o=>a.value.cardModal=!0,["prevent"]))},[n(m),s[18]||(s[18]=t("div",{class:"tooltip"},"Card",-1))])]),t("div",vt,[t("div",{class:"icon tooltip-wrapper",onClick:s[2]||(s[2]=r(o=>k(e.organizationId,e.organizationSettingId,"/crm/organization/create-my-student"),["prevent"]))},[n(q),s[19]||(s[19]=t("div",{class:"tooltip"},"Add Student",-1))])]),t("div",gt,[t("div",{class:"icon tooltip-wrapper",onClick:s[3]||(s[3]=r(o=>a.value.promoteModal=!0,["prevent"]))},[n(x),s[20]||(s[20]=t("div",{class:"tooltip"},"Promote Class",-1))])])])]),t("div",_t,[t("div",ht,[t("table",mt,[s[26]||(s[26]=t("thead",null,[t("th"),t("th",null,"Card"),t("th",null,"Image"),t("th",null,"SR No."),t("th",null,"S. Name"),t("th",null,"F. Name"),t("th",null,"Class-Section"),t("th",null,"Photo Number"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(u(!0),d(Y,null,Z(a.value.studentData,(o,F)=>{var z,M;return u(),d("tr",{key:F},[t("td",null,[t("input",{type:"checkbox",onChange:V=>E(o.id)},null,40,bt)]),t("td",null,[o.card==0?(u(),d("span",yt,"Remaining")):p("",!0),o.card==1?(u(),d("span",ft,"In Process")):p("",!0),o.card==2?(u(),d("span",Ct,"Printed")):p("",!0),o.card==3?(u(),d("span",St,"RePrinted")):p("",!0)]),t("td",null,[o.profile?(u(),d("div",It,[t("img",{src:`${o.profile}?width=200`,alt:""},null,8,kt)])):p("",!0)]),t("td",null,v(o.srNo),1),t("td",wt,[n(b,{to:{path:"/crm/organization/student-profile",query:{studentId:o.id,id:e.organizationId,settingId:e.organizationSettingId}}},{default:c(()=>[st(v(o.name),1)]),_:2},1032,["to"])]),t("td",null,v(o.fatherName),1),t("td",null,v((z=o.classList)==null?void 0:z.name)+"-"+v((M=o.classDiv)==null?void 0:M.name),1),t("td",null,v(o.photoNumber),1),t("td",null,[o.status==="ACTIVE"?(u(),d("div",zt,v(o.status),1)):p("",!0),o.status==="PENDING"?(u(),d("div",Mt,v(o.status),1)):p("",!0),o.status==="DEACTIVE"?(u(),d("div",Vt,v(o.status),1)):p("",!0)]),t("td",null,[t("div",Dt,[t("div",{class:"icon tooltip-wrapper",onClick:V=>k(o.id,e.organizationSettingId,"/crm/organization/update-my-student")},[n(L),s[21]||(s[21]=t("div",{class:"tooltip"},"Edit",-1))],8,Et),n(b,{class:"icon tooltip-wrapper",to:{path:"/crm/organization/final-student-card",query:{id:o.id,status:"Class"}}},{default:c(()=>[n(m),s[22]||(s[22]=t("div",{class:"tooltip"},"Student",-1))]),_:2},1032,["to"]),n(b,{class:"icon tooltip-wrapper",to:{path:"/crm/organization/final-student-card",query:{id:o.id,status:"Parent"}}},{default:c(()=>[n(m),s[23]||(s[23]=t("div",{class:"tooltip"},"Parent",-1))]),_:2},1032,["to"]),n(b,{class:"icon tooltip-wrapper",to:{path:"/crm/organization/final-student-card",query:{id:o.id,status:"House"}}},{default:c(()=>[n(m),s[24]||(s[24]=t("div",{class:"tooltip"},"House",-1))]),_:2},1032,["to"]),t("div",{class:"icon tooltip-wrapper",onClick:r(V=>T(o.id,o.status),["prevent"])},[n(U),s[25]||(s[25]=t("div",{class:"tooltip"},"Change Status",-1))],8,Nt)])])])}),128))])])]),((w=a.value.studentData)==null?void 0:w.length)<=0?(u(),d("div",Pt,s[27]||(s[27]=[t("div",null,"No records Found!",-1)]))):p("",!0)])])]),n(C,{show:a.value.statusModal,"onUpdate:show":s[9]||(s[9]=o=>a.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:c(()=>[s[28]||(s[28]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[4]||(s[4]=r(o=>a.value.statusModal=!1,["prevent"]))},[n(f)])]),default:c(()=>[t("div",Tt,[t("label",At,[y(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>e.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[S,e.changeStatus]]),t("div",$t,[n(B),s[29]||(s[29]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",qt,[y(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>e.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[S,e.changeStatus]]),t("div",xt,[n(O),s[30]||(s[30]=t("div",{class:"title"},"PENDING",-1))])]),t("label",Lt,[y(t("input",{type:"radio","onUpdate:modelValue":s[7]||(s[7]=o=>e.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[S,e.changeStatus]]),t("div",Ut,[n(R),s[31]||(s[31]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",Bt,[t("div",Ot,[t("div",{class:"btn red-btn",onClick:s[8]||(s[8]=r(o=>a.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:A},"Submit")])])]),_:1},8,["show"]),n(C,{show:a.value.cardModal,"onUpdate:show":s[12]||(s[12]=o=>a.value.cardModal=o),class:"status-modal",headerClasses:"header-bg"},{header:c(()=>[s[32]||(s[32]=t("div",{class:"title",showHeader:"true"}," Are you sure you want to submit? ",-1)),t("div",{class:"close-btn",onClick:s[10]||(s[10]=r(o=>a.value.cardModal=!1,["prevent"]))},[n(f)])]),default:c(()=>[t("div",Rt,[t("div",Ht,[t("div",{class:"btn red-btn",type:"button",onClick:s[11]||(s[11]=r(o=>a.value.cardModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",type:"submit",onClick:r(N,["prevent"])}," Submit ")])])]),_:1},8,["show"]),n(C,{show:a.value.promoteModal,"onUpdate:show":s[16]||(s[16]=o=>a.value.promoteModal=o),class:"status-modal",headerClasses:"header-bg"},{header:c(()=>[s[33]||(s[33]=t("div",{class:"title",showHeader:"true"}," Are you sure you want to submit? ",-1)),t("div",{class:"close-btn",onClick:s[13]||(s[13]=r(o=>a.value.promoteModal=!1,["prevent"]))},[n(f)])]),default:c(()=>[t("div",null,[n(H,{modelValue:e.classListId,"onUpdate:modelValue":s[14]||(s[14]=o=>e.classListId=o),options:a.value.classData},null,8,["modelValue","options"])]),t("div",Ft,[t("div",Gt,[t("div",{class:"btn red-btn",type:"button",onClick:s[15]||(s[15]=r(o=>a.value.promoteModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",type:"submit",onClick:r(P,["prevent"])}," Submit ")])])]),_:1},8,["show"])])}}};export{Kt as default};
