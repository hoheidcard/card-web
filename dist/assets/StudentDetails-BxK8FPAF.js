import{k as L,d as $,u as B,e as P,l as z,n as G,p as j,c as i,a as s,b as _,i as A,r as m,h as w,g as c,j as r,t as o,m as V,o as l,M as q}from"./index-QZaKag1-.js";import{_ as f}from"./camera-B4WFWT0E.js";import{C as Y}from"./cropper-DXBHp5yS.js";const H={class:"student-details-page"},T={class:"container flexx jjustify-center"},Z={class:"main-card mid-cardd"},W={class:"card-header"},J={class:"left"},K={class:"icon"},Q={class:"right"},X={class:"icons"},ss={class:"card-body"},ts={class:"row"},es={class:"col-20"},os={class:"img-upload flex flex-d-col align-center"},as=["src"],is={key:1,src:f,class:"dummy-img",alt:""},ls={key:0,class:"w-100 flex gap-10 pt-10"},ds={class:"col-20"},ns={class:"img-upload flex flex-d-col align-center"},vs=["src"],rs={key:1,src:f,class:"dummy-img",alt:""},cs={key:0,class:"w-100 flex gap-10 pt-10"},us={class:"col-20"},ps={class:"img-upload flex flex-d-col align-center"},_s=["src"],ms={key:1,src:f,class:"dummy-img",alt:""},gs={key:0,class:"w-100 flex gap-10 pt-10"},hs={class:"col-20"},fs={class:"img-upload flex flex-d-col align-center"},bs=["src"],ys={key:1,src:f,class:"dummy-img",alt:""},ws={key:0,class:"w-100 flex gap-10 pt-10"},Cs={class:"user-profile"},Ns={class:"data-list"},ks={class:"data"},Is={class:"val"},xs={class:"data-list"},Ms={class:"data"},Ss={class:"val"},Us={class:"data"},Rs={class:"val"},Ds={class:"data"},Fs={class:"val"},Os={class:"data"},Es={class:"val"},Ls={class:"data-list"},$s={class:"data"},Bs={class:"val"},Ps={class:"data"},zs={class:"val"},Gs={class:"data"},js={class:"val"},As={class:"data"},Vs={class:"val"},qs={class:"data-list"},Ys={class:"data"},Hs={class:"val"},Ts={class:"data"},Zs={class:"val"},Ws={class:"data"},Js={class:"val"},Ks={class:"data"},Qs={class:"val"},Xs={class:"data-list"},st={class:"data"},tt={class:"val"},et={class:"data"},ot={class:"val"},at={class:"data"},it={class:"val"},lt={class:"data"},dt={class:"val"},nt={class:"data-list"},vt={class:"data"},rt={class:"val"},ct={class:"data"},ut={class:"val"},pt={class:"data"},_t={class:"val"},mt={class:"data"},gt={class:"val"},ht={class:"data-list"},ft={class:"data"},bt={class:"val"},yt={class:"data"},wt={class:"val"},Ct={class:"data"},Nt={class:"val"},kt={class:"data"},It={class:"val"},xt={class:"data-list"},Mt={class:"data"},St={class:"val"},Ut={class:"data"},Rt={class:"val"},Dt={class:"data"},Ft={class:"val"},Ot={class:"data"},Et={class:"val"},Lt={class:"data-list"},$t={class:"data"},Bt={class:"val"},Pt={class:"data"},zt={class:"val"},Gt={class:"data"},jt={class:"val"},At={class:"data"},Vt={class:"val"},qt={class:"data-list"},Yt={class:"data"},Ht={class:"val"},Tt={class:"data"},Zt={class:"val"},Wt={class:"data"},Jt={class:"val"},Kt={class:"data"},Qt={class:"val"},Xt={class:"data-list"},se={class:"data"},te={class:"val"},ee={class:"data"},oe={class:"val"},ae={class:"data"},ie={class:"val"},le={class:"image-upload-crop"},de={key:0},ne=["src"],ve={key:1},re=["src"],ce={class:"modal-footer"},ue={class:"btns"},he={__name:"StudentDetails",setup(pe){const C=L(null),b=j(),u=B(),e=$(()=>u.state.OrganizationStudent),a=P({cropModal:!1,imageUrl:null,imageFile:null,croppedImageUrl:null,cropper:null,cropperEnable:!1,type:""}),S=()=>{a.cropper&&a.cropper.destroy(),a.cropperEnable=!1},U=()=>{a.cropper&&a.cropper.destroy(),a.cropperEnable=!0;const d=C.value;a.cropper=new Y(d,{aspectRatio:35/45,viewMode:1})},R=d=>{a.imageFile=d.target.files[0],a.imageFile&&a.imageFile.type.startsWith("image/")&&(a.imageUrl=URL.createObjectURL(a.imageFile))},D=()=>{const d=a.cropper.getCroppedCanvas();a.croppedImageUrl=d.toDataURL()};z(()=>{a.cropper&&a.cropper.destroy()}),G(()=>{u.dispatch("OrganizationStudent/getOneStudent",{id:b.query.studentId})});async function F(){if(!a.cropperEnable)u.dispatch("OrganizationStudent/updateStudentImage",{id:e.value.id,type:a.type,orgId:b.query.id,file:a.imageFile});else{const d=a.cropper.getCroppedCanvas(),t=await new Promise(v=>d.toBlob(v)),p=new File([t],"cropped-image.png",{type:"image/png"});u.dispatch("OrganizationStudent/updateStudentImage",{id:e.value.id,type:a.type,orgId:b.query.id,file:p})}a.cropModal=!1}function g(d){a.type=d,a.cropModal=!0}function O(d){return d?V(d).format("DD.MM.YYYY"):"-"}const h=async d=>{u.dispatch("Alert/success",{msg:"Downloading image"});const t=await q.get("https://service.abhitprints.in:3111/api/v1/card-orders/download-image?image="+d,{responseType:"blob"}),p=new Blob([t.data]),v=document.createElement("a");v.href=window.URL.createObjectURL(p);const y=d.substring(d.lastIndexOf("/")+1).replace(".webp",".jpg");v.setAttribute("download",y),document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(v.href)};return(d,t)=>{var k,I,x,M;const p=m("icon-student"),v=m("icon-edit"),N=m("router-link"),y=m("icon-cross"),E=m("Modal");return l(),i("div",H,[s("div",T,[s("div",Z,[s("div",W,[s("div",J,[s("div",K,[_(p)]),t[11]||(t[11]=A(" Student Information "))]),s("div",Q,[s("div",X,[_(N,{class:"icon",to:{path:"/crm/organization/update-my-student",query:{id:e.value.id,settingId:e.value.settingId}}},{default:w(()=>[_(v)]),_:1},8,["to"])])])]),s("div",ss,[s("div",ts,[s("div",es,[s("div",os,[t[12]||(t[12]=s("div",{class:"text text-small mb-10"},"Student Pic",-1)),s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:t[0]||(t[0]=n=>g("Student"))},[e.value.profile?(l(),i("img",{key:0,src:e.value.profile,class:"preview-image",alt:""},null,8,as)):(l(),i("img",is))]),e.value.profile?(l(),i("div",ls,[s("button",{class:"btn white-btn w-full",onClick:t[1]||(t[1]=r(n=>h(e.value.profile),["prevent"])),type:"button"}," Download ")])):c("",!0)])]),s("div",ds,[s("div",ns,[t[13]||(t[13]=s("div",{class:"text text-small mb-5"},"Father Pic",-1)),s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:t[2]||(t[2]=n=>g("Father"))},[e.value.fatherImage?(l(),i("img",{key:0,src:e.value.fatherImage,class:"preview-image",alt:""},null,8,vs)):(l(),i("img",rs))]),e.value.fatherImage?(l(),i("div",cs,[s("button",{class:"btn white-btn w-full",onClick:t[3]||(t[3]=r(n=>h(e.value.fatherImage),["prevent"])),type:"button"}," Download ")])):c("",!0)])]),s("div",us,[s("div",ps,[t[14]||(t[14]=s("div",{class:"text text-small mb-5"},"Mother Pic",-1)),s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:t[4]||(t[4]=n=>g("Mother"))},[e.value.motherImage?(l(),i("img",{key:0,src:e.value.motherImage,class:"preview-image",alt:""},null,8,_s)):(l(),i("img",ms))]),e.value.motherImage?(l(),i("div",gs,[s("button",{class:"btn white-btn w-full",onClick:t[5]||(t[5]=r(n=>h(e.value.motherImage),["prevent"])),type:"button"}," Download ")])):c("",!0)])]),s("div",hs,[s("div",fs,[t[15]||(t[15]=s("div",{class:"text text-small mb-5"},"Guardian Pic",-1)),s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:t[6]||(t[6]=n=>g("Guardian"))},[e.value.guardianImage?(l(),i("img",{key:0,src:e.value.guardianImage,class:"preview-image",alt:""},null,8,bs)):(l(),i("img",ys))]),e.value.guardianImage?(l(),i("div",ws,[s("button",{class:"btn white-btn w-full",onClick:t[7]||(t[7]=r(n=>h(e.value.guardianImage),["prevent"])),type:"button"}," Download ")])):c("",!0)])])]),t[56]||(t[56]=s("br",null,null,-1)),s("div",Cs,[s("div",Ns,[s("div",ks,[t[16]||(t[16]=s("div",{class:"title"},"SCHOOL :",-1)),s("div",Is,o((k=e.value.organizationDetail)==null?void 0:k.name),1)])]),s("div",xs,[s("div",Ms,[t[17]||(t[17]=s("div",{class:"title"},"Id :",-1)),s("div",Ss,o(e.value.id),1)]),s("div",Us,[t[18]||(t[18]=s("div",{class:"title"},"Reg. No :",-1)),s("div",Rs,o(e.value.regNo),1)]),s("div",Ds,[t[19]||(t[19]=s("div",{class:"title"},"Admission No. :",-1)),s("div",Fs,o(e.value.admissionNo),1)]),s("div",Os,[t[20]||(t[20]=s("div",{class:"title"},"UID No. :",-1)),s("div",Es,o(e.value.admissionNo),1)])]),s("div",Ls,[s("div",$s,[t[21]||(t[21]=s("div",{class:"title"},"PEN No :",-1)),s("div",Bs,o(e.value.PEN),1)]),s("div",Ps,[t[22]||(t[22]=s("div",{class:"title"},"Student. No :",-1)),s("div",zs,o(e.value.studentNo),1)]),s("div",Gs,[t[23]||(t[23]=s("div",{class:"title"},"Photo No. :",-1)),s("div",js,o(e.value.photoNumber),1)]),s("div",As,[t[24]||(t[24]=s("div",{class:"title"},"Rfid No. :",-1)),s("div",Vs,o(e.value.rfidNo),1)])]),s("div",qs,[s("div",Ys,[t[25]||(t[25]=s("div",{class:"title"},"Roll No :",-1)),s("div",Hs,o(e.value.rollNo>0?e.value.rollNo:""),1)]),s("div",Ts,[t[26]||(t[26]=s("div",{class:"title"},"Name :",-1)),s("div",Zs,o(e.value.name),1)]),s("div",Ws,[t[27]||(t[27]=s("div",{class:"title"},"Contact No. :",-1)),s("div",Js,o(e.value.contactNo),1)]),s("div",Ks,[t[28]||(t[28]=s("div",{class:"title"},"Email id :",-1)),s("div",Qs,o(e.value.emailId),1)])]),s("div",Xs,[s("div",st,[t[29]||(t[29]=s("div",{class:"title"},"Alt Contact No :",-1)),s("div",tt,o(e.value.altContactNo),1)]),s("div",et,[t[30]||(t[30]=s("div",{class:"title"},"Class :",-1)),s("div",ot,o((I=e.value.classList)==null?void 0:I.name),1)]),s("div",at,[t[31]||(t[31]=s("div",{class:"title"},"Section :",-1)),s("div",it,o((x=e.value.classDiv)==null?void 0:x.name),1)]),s("div",lt,[t[32]||(t[32]=s("div",{class:"title"},"Zone :",-1)),s("div",dt,o((M=e.value.houseZone)==null?void 0:M.name),1)])]),s("div",nt,[s("div",vt,[t[33]||(t[33]=s("div",{class:"title"},"Gender :",-1)),s("div",rt,o(e.value.gender),1)]),s("div",ct,[t[34]||(t[34]=s("div",{class:"title"},"DOB :",-1)),s("div",ut,o(O(e.value.dob)),1)]),s("div",pt,[t[35]||(t[35]=s("div",{class:"title"},"Blood Group :",-1)),s("div",_t,o(e.value.bloodGroup),1)]),s("div",mt,[t[36]||(t[36]=s("div",{class:"title"},"Aadhar No. :",-1)),s("div",gt,o(e.value.aadharNumber),1)])]),s("div",ht,[s("div",ft,[t[37]||(t[37]=s("div",{class:"title"},"Cast :",-1)),s("div",bt,o(e.value.cast),1)]),s("div",yt,[t[38]||(t[38]=s("div",{class:"title"},"Religion :",-1)),s("div",wt,o(e.value.relation),1)]),s("div",Ct,[t[39]||(t[39]=s("div",{class:"title"},"Nationality :",-1)),s("div",Nt,o(e.value.nationality),1)]),s("div",kt,[t[40]||(t[40]=s("div",{class:"title"},"Guardian Relation :",-1)),s("div",It,o(e.value.guardianRelation),1)])]),s("div",xt,[s("div",Mt,[t[41]||(t[41]=s("div",{class:"title"},"Guardian Name :",-1)),s("div",St,o(e.value.guardianName),1)]),s("div",Ut,[t[42]||(t[42]=s("div",{class:"title"},"Guardian Contact No :",-1)),s("div",Rt,o(e.value.guardianContactNo),1)]),s("div",Dt,[t[43]||(t[43]=s("div",{class:"title"},"Father Name :",-1)),s("div",Ft,o(e.value.fatherName),1)]),s("div",Ot,[t[44]||(t[44]=s("div",{class:"title"},"Father Contact No :",-1)),s("div",Et,o(e.value.fatherContactNo),1)])]),s("div",Lt,[s("div",$t,[t[45]||(t[45]=s("div",{class:"title"},"Mother Name :",-1)),s("div",Bt,o(e.value.motherName),1)]),s("div",Pt,[t[46]||(t[46]=s("div",{class:"title"},"Mother Contact No :",-1)),s("div",zt,o(e.value.motherContactNo),1)]),s("div",Gt,[t[47]||(t[47]=s("div",{class:"title"},"Stream :",-1)),s("div",jt,o(e.value.stream),1)]),s("div",At,[t[48]||(t[48]=s("div",{class:"title"},"Transport :",-1)),s("div",Vt,o(e.value.transport),1)])]),s("div",qt,[s("div",Yt,[t[49]||(t[49]=s("div",{class:"title"},"Conteen :",-1)),s("div",Ht,o(e.value.canteen),1)]),s("div",Tt,[t[50]||(t[50]=s("div",{class:"title"},"Library :",-1)),s("div",Zt,o(e.value.library),1)]),s("div",Wt,[t[51]||(t[51]=s("div",{class:"title"},"Hostel :",-1)),s("div",Jt,o(e.value.hostel),1)]),s("div",Kt,[t[52]||(t[52]=s("div",{class:"title"},"City :",-1)),s("div",Qt,o(e.value.city),1)])]),s("div",Xt,[s("div",se,[t[53]||(t[53]=s("div",{class:"title"},"State :",-1)),s("div",te,o(e.value.state),1)]),s("div",ee,[t[54]||(t[54]=s("div",{class:"title"},"Pincode :",-1)),s("div",oe,o(e.value.pincode),1)]),s("div",ae,[t[55]||(t[55]=s("div",{class:"title"},"Address :",-1)),s("div",ie,o(e.value.address),1)])])])])])]),_(E,{show:a.cropModal,"onUpdate:show":t[10]||(t[10]=n=>a.cropModal=n),class:"status-modal",headerClasses:"header-bg"},{header:w(()=>[t[57]||(t[57]=s("div",{class:"title",showHeader:"true"},"Upload Image",-1)),s("div",{class:"close-btn",onClick:t[8]||(t[8]=r(n=>a.cropModal=!1,["prevent"]))},[_(y)])]),default:w(()=>[s("div",le,[s("input",{type:"file",onChange:R},null,32),a.imageUrl?(l(),i("div",de,[s("img",{ref_key:"imageRef",ref:C,src:a.imageUrl,alt:"Source Image",style:{"max-width":"100%"}},null,8,ne),t[58]||(t[58]=s("br",null,null,-1)),a.cropperEnable?(l(),i("button",{key:0,type:"button",class:"btn green-btn",onClick:D}," Crop Image ")):c("",!0),t[59]||(t[59]=s("br",null,null,-1))])):c("",!0),a.croppedImageUrl?(l(),i("div",ve,[s("img",{src:a.croppedImageUrl,alt:"Cropped Image",style:{"max-width":"100%",height:"150px"}},null,8,re)])):c("",!0)]),s("div",ce,[s("div",ue,[s("div",{class:"btn red-btn",onClick:t[9]||(t[9]=r(n=>a.cropModal=!1,["prevent"]))}," Cancel "),a.cropperEnable?(l(),i("div",{key:1,class:"btn green-btn",onClick:r(S,["prevent"])}," Crop ")):(l(),i("div",{key:0,class:"btn green-btn",onClick:r(U,["prevent"])}," Crop ")),s("div",{class:"btn white-btn",onClick:F},"Upload")])])]),_:1},8,["show"])])}}};export{he as default};
