import{d as m,u as fe,e as G,k as U,m as i,n as pe,c as a,a as t,b as u,r as f,j as p,F as E,y as k,A,h as b,p as _e,o as d,t as n,x as N,g as M,w as P,v as $,B as De}from"./index-QZaKag1-.js";import{_ as Te}from"./delete-ClllWuc2.js";const Me={class:"event-calendar-section"},be={class:"container calender-box flex gap-10"},ye={class:"card"},Ye={class:"top-row"},he={class:"left"},ge={class:"arrows"},Ee={class:"right"},ke={class:"icons"},Ce={class:"btns"},we=["onClick"],Fe={class:"calendar-content"},Se={class:"main-list-time"},Ve={class:"sub-list"},Oe=["onClick"],Ie={class:"event-badge"},Ue={class:"right-container w-40"},Ae={class:"card"},Ne={class:"patient-list"},Pe=["onClick"],$e={class:"top"},Re={class:"p-info"},xe={class:"name"},Le={class:"about"},He={class:"p-id"},Be={class:"title",showHeader:"true"},ze={key:0,class:"tab-content"},Ge={action:"",class:"form"},Ze={class:"form-item mb-16"},je={key:0,class:"err-msg"},qe={class:"form-item mb-16"},Ke={key:0,class:"err-msg"},We={class:"form-item mb-16"},Je={class:"date-input"},Qe=["min"],Xe={class:"icon"},et={key:0,class:"err-msg"},tt={class:"row"},st={class:"form-item mb-10 col-5"},ot={key:0,class:"err-msg"},lt={class:"form-item mb-10 col-5"},nt={key:0,class:"err-msg"},it={class:"form-item mb-10 col-5"},at={class:"modal-footer"},dt={class:"btns"},rt={class:"event-details"},vt={class:"data"},ut={class:"val"},ct={class:"data"},mt={class:"val"},ft={class:"data"},pt={class:"val"},_t={class:"data"},Dt={class:"val"},Tt={class:"data"},Mt={class:"val"},bt={class:"modal-footer"},yt={class:"btns"},Yt={class:"modal-footer"},ht={class:"btns"},Ct={__name:"NoticeCalendar",setup(gt){const D=fe(),Z=_e();m(()=>D.state.Organization);const r=m(()=>D.state.Event),R=[{id:"STAFF",name:"STAFF"},{id:"STUDENT",name:"STUDENT"}],j=[{id:"SCHOOL",name:"SCHOOL"},{id:"ORGANIZATION",name:"ORGANIZATION"},{id:"PARTNER",name:"PARTNER"},{id:"SUB PARTNER",name:"SUB PARTNER"}],_=G({createModal:!1,eventModal:!1,confirmModal:!1,tab:1,timePicker:"00:00"}),e=G({submit:!1,limit:10,offset:0,keyword:"",editMode:!1,school:null,allSchoolStatus:!1,title:null,desc:null,eventDate:null,fromTime:"00:00",toTime:"00:00",eventFor:"SCHOOL",all:!1,eventIds:null,fromDate:null,toDate:null,for:j[0],type:R[0].id,eventTitle:null,eventDesc:null,evntDate:null,evtFromTime:null,evtToTime:null,evtFor:null,eventId:null}),q=De(),x=U([]),c=U(null),K=["Month"],v=U("Month");let y=i(c).startOf(v.value),Y=i(c).endOf(v.value);pe(()=>{c.value=i().format("YYYY-MM-DD"),g(),C()});const W=()=>{q.emit("update:changeDate",{date:c.value,type:v.value})};function J(){c.value=i(y).add(32,"days").format("YYYY-MM-DD"),g(),C()}function Q(){c.value=i(Y).subtract(32,"days").format("YYYY-MM-DD"),g(),C()}function L(l){_.eventModal=!0,e.eventTitle=l.title,e.eventDesc=l.desc,e.evntDate=l.eventDate,e.evtFromTime=l.fromTime,e.evtToTime=l.toTime,e.evtFor=l.eventFor,e.eventId=l.id,e.type=l.type,e.title=l.title,e.desc=l.desc,e.eventDate=l.eventDate,e.fromTime=l.fromTime,e.toTime=l.toTime,e.eventFor=l.eventFor,e.all=l.all}const X=l=>{l!==v.value&&(v.value=l,W(),g())};function H(l){if(l)return i(l).format("MMM Do YYYY")}function h(l){if(l)return i(l,"HH:mm:ss").format("hh:mm A")}const ee=l=>{if(l)return v.value==="Day"?r.value.eventData.filter(s=>i(s.eventDate).format("YYYY-MM-DD hh:mm A").toString()===l):r.value.eventData.filter(s=>i(s.eventDate).format("YYYY-MM-DD").toString()===l)},g=()=>{y=i(c.value).startOf(v.value),Y=i(c.value).endOf(v.value);const l=[];let s=y.clone();for(;s<=Y;)(v.value==="Week"||v.value==="Month")&&(l.push({time:v.value==="Month"?s.format("DD"):s.format("ddd"),date:s.format("YYYY-MM-DD")}),s.add(1,"day"));x.value=l};function C(){var l;D.dispatch("Event/getEvent",{limit:e.limit,offset:e.offset,keyword:e.keyword,fromDate:i(y).format("YYYY-MM-DD"),toDate:i(Y).format("YYYY-MM-DD"),eventFor:(l=e.for)==null?void 0:l.id})}function te(){D.dispatch("Event/deleteEvent",{id:e.eventId})}function se(){if(e.type==="STAFF"||e.type==="STUDENT"?(e.eventFor="SCHOOL",e.eventIds=[{organizationDetailId:Z.query.id}]):e.type="UPPER",w.value||F.value||S.value||V.value||O.value||oe.value||le.value)return e.submit=!0,null;e.submit=!1,e.editMode?D.dispatch("Event/updateEvent",{title:e.title,desc:e.desc,eventDate:e.eventDate,fromTime:e.fromTime,toTime:e.toTime,eventFor:e.eventFor,all:e.all,eventIds:e.all?null:e.eventIds,id:e.eventId,type:e.type}):D.dispatch("Event/addEvent",{title:e.title,desc:e.desc,eventDate:e.eventDate,fromTime:e.fromTime,toTime:e.toTime,eventFor:e.eventFor,all:e.all,eventIds:e.all?null:e.eventIds,type:e.type})}const w=m(()=>{if(!e.title)return"Please Enter Title"}),F=m(()=>{if(!e.desc)return"Please Enter Event Description"}),S=m(()=>{if(!e.eventDate)return"Please Select Date"}),V=m(()=>{if(e.fromTime==="00:00")return"Please Select Time"}),O=m(()=>{if(e.toTime==="00:00")return"Please Select Time"}),oe=m(()=>{if(!e.eventFor)return"Please Select Event For"}),le=m(()=>{var l;if(e.all)return null;if(((l=e.eventIds)==null?void 0:l.length)<=0)return"Please Select Organization"});function ne(){_.eventModal=!1,r.value.createModal=!0,e.editMode=!0}function ie(){r.value.createModal=!0,e.editMode=!1,e.title=null,e.desc=null,e.eventDate=null,e.fromTime="00:00:00",e.toTime="00:00:00",e.eventFor=null,e.all=!1}function ae(){_.eventModal=!1,r.value.confirmModal=!0}return(l,s)=>{const de=f("icon-left-arrow"),re=f("icon-right-arrow"),ve=f("icon-plus"),B=f("icon-cross"),ue=f("icon-calendar"),z=f("time-picker"),ce=f("Select"),I=f("Modal");return d(),a("div",Me,[t("div",be,[t("div",ye,[t("div",Ye,[t("div",he,[t("div",ge,[t("div",{class:"icon",onClick:s[0]||(s[0]=o=>Q())},[u(de)]),t("div",{class:"icon",onClick:s[1]||(s[1]=o=>J())},[u(re)])])]),t("div",Ee,[t("div",ke,[t("div",{class:"icon tooltip-wrapper",onClick:s[2]||(s[2]=p(o=>ie(),["prevent"]))},[u(ve),s[20]||(s[20]=t("div",{class:"tooltip"},"Create Event",-1))])]),t("div",Ce,[(d(),a(E,null,k(K,o=>t("button",{type:"button",key:o,class:A(`btn ${v.value===o?"active":""}`),onClick:T=>X(o)},n(N(i)(c.value).format("MMMM")),11,we)),64))])])]),t("div",Fe,[t("ul",{class:A([v.value,"main-list"])},[(d(!0),a(E,null,k(x.value,o=>(d(),a("li",{class:A(["main-list-item",N(i)().format("YYYY-MM-DD")==o.date?"current":""]),key:o.time},[t("div",Se,n(o.time),1),t("ul",Ve,[(d(!0),a(E,null,k(ee(o.date),T=>(d(),a("li",{class:"sub-list-item",key:T.title,onClick:p(me=>L(T),["prevent"])},[t("div",Ie,n(T.title),1)],8,Oe))),128))])],2))),128))],2)])]),t("div",Ue,[t("div",Ae,[s[22]||(s[22]=t("div",{class:"top-row"},[t("div",{class:"apt-btn"},[t("div",{class:"icon"},"Event List")])],-1)),s[23]||(s[23]=t("div",{class:"tabs"},null,-1)),t("div",Ne,[(d(!0),a(E,null,k(r.value.eventData,(o,T)=>(d(),a("div",{class:"list-item",key:T},[t("div",{class:"p-info-card card1 pointer",onClick:me=>L(o)},[t("div",$e,[s[21]||(s[21]=t("div",{class:"p-img"},null,-1)),t("div",Re,[t("div",xe,[t("strong",null,n(o.title),1)]),t("div",Le,[t("span",null,n(H(o.eventDate)),1)]),t("div",He,n(h(o.fromTime))+" - "+n(h(o.toTime)),1)])])],8,Pe)]))),128))])])])]),u(I,{show:r.value.createModal,"onUpdate:show":s[12]||(s[12]=o=>r.value.createModal=o),class:"create-event-modal",headerClasses:"header-bg"},{header:b(()=>[t("div",Be,n(e.editMode?"Update Event":"Create Event"),1),t("div",{class:"close-btn",onClick:s[3]||(s[3]=p(o=>r.value.createModal=!1,["prevent"]))},[u(B)])]),default:b(()=>[_.tab===1?(d(),a("div",ze,[t("form",Ge,[t("div",Ze,[s[24]||(s[24]=t("div",{class:"title"},"Title",-1)),P(t("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=o=>e.title=o),placeholder:"Name of event"},null,512),[[$,e.title]]),e.submit&&w.value?(d(),a("div",je,n(w.value),1)):M("",!0)]),t("div",qe,[s[25]||(s[25]=t("div",{class:"title"},"Description",-1)),P(t("textarea",{name:"",id:"","onUpdate:modelValue":s[5]||(s[5]=o=>e.desc=o),rows:"5",placeholder:"Enter"},null,512),[[$,e.desc]]),e.submit&&F.value?(d(),a("div",Ke,n(F.value),1)):M("",!0)]),t("div",We,[s[26]||(s[26]=t("div",{class:"title"},"Date",-1)),t("div",Je,[P(t("input",{type:"date","onUpdate:modelValue":s[6]||(s[6]=o=>e.eventDate=o),class:"w-100-i",min:N(i)().format("YYYY-MM-DD")},null,8,Qe),[[$,e.eventDate]]),t("div",Xe,[u(ue)])]),e.submit&&S.value?(d(),a("div",et,n(S.value),1)):M("",!0)]),t("div",tt,[t("div",st,[s[27]||(s[27]=t("div",{class:"title"},"From Time",-1)),u(z,{class:"mb-10",modelValue:e.fromTime,"onUpdate:modelValue":s[7]||(s[7]=o=>e.fromTime=o)},null,8,["modelValue"]),e.submit&&V.value?(d(),a("div",ot,n(V.value),1)):M("",!0)]),t("div",lt,[s[28]||(s[28]=t("div",{class:"title"},"To Time",-1)),u(z,{class:"mb-10",modelValue:e.toTime,"onUpdate:modelValue":s[8]||(s[8]=o=>e.toTime=o)},null,8,["modelValue"]),e.submit&&O.value?(d(),a("div",nt,n(O.value),1)):M("",!0)])]),t("div",it,[s[29]||(s[29]=t("div",{class:"title"},"Event Type",-1)),u(ce,{modelValue:e.type,"onUpdate:modelValue":s[9]||(s[9]=o=>e.type=o),options:R,placeholder:"Select"},null,8,["modelValue"])]),t("div",at,[t("div",dt,[t("div",{class:"btn red-btn",onClick:s[10]||(s[10]=p(o=>r.value.createModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:s[11]||(s[11]=o=>se())},n(e.editMode?"Update":"Create"),1)])])])])):M("",!0)]),_:1},8,["show"]),u(I,{show:_.eventModal,"onUpdate:show":s[16]||(s[16]=o=>_.eventModal=o),class:"event-modal",headerClasses:"header-bg"},{header:b(()=>[s[30]||(s[30]=t("div",{class:"title",showHeader:"true"},"Event Details",-1)),t("div",{class:"close-btn",onClick:s[13]||(s[13]=p(o=>_.eventModal=!1,["prevent"]))},[u(B)])]),default:b(()=>[t("div",rt,[t("div",vt,[s[31]||(s[31]=t("div",{class:"title"},"Event Title :",-1)),t("div",ut,n(e.eventTitle),1)]),t("div",ct,[s[32]||(s[32]=t("div",{class:"title"},"Description :",-1)),t("div",mt,n(e.eventDesc),1)]),t("div",ft,[s[33]||(s[33]=t("div",{class:"title"},"Date :",-1)),t("div",pt,n(H(e.evntDate)),1)]),t("div",_t,[s[34]||(s[34]=t("div",{class:"title"},"Time :",-1)),t("div",Dt,n(h(e.evtFromTime))+" to "+n(h(e.evtToTime)),1)]),t("div",Tt,[s[35]||(s[35]=t("div",{class:"title"},"Event For :",-1)),t("div",Mt,n(e.type==="UPPER"?e.eventFor:e.type),1)])]),t("div",bt,[t("div",yt,[t("div",{class:"btn red-btn",onClick:s[14]||(s[14]=p(o=>ae(),["prevent"]))},"Delete"),t("div",{class:"btn white-btn",onClick:s[15]||(s[15]=p(o=>ne(),["prevent"]))},"Edit")])])]),_:1},8,["show"]),u(I,{show:r.value.confirmModal,"onUpdate:show":s[19]||(s[19]=o=>r.value.confirmModal=o),class:"confirm-modal",headerClasses:"header-bg"},{default:b(()=>[s[36]||(s[36]=t("div",{class:"delete-icon"},[t("img",{src:Te,alt:""})],-1)),s[37]||(s[37]=t("h4",{class:"text-gree"},"Are you sure want to Delete?",-1)),t("div",Yt,[t("div",ht,[t("div",{class:"btn red-btn",onClick:s[17]||(s[17]=p(o=>r.value.confirmModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:s[18]||(s[18]=o=>te())},"Delete")])])]),_:1},8,["show"])])}}};export{Ct as default};
