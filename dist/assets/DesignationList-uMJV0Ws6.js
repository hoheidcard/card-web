import{d as C,u as tt,e as ot,n as et,p as st,c as u,a as t,b as d,r as a,j as r,g as b,F as z,y as $,h as p,s as it,o as v,w as k,z as nt,t as g,v as E,E as dt,i as lt}from"./index-QZaKag1-.js";import{_ as at}from"./delete-ClllWuc2.js";const rt={class:"user-activity user-profile"},ct={class:"table-card"},ut={class:"table-header"},pt={class:"left"},vt={class:"title-row"},gt={class:"icon"},mt={class:"right"},ft={class:"searchbar"},_t={class:"icon"},ht={class:"icons"},Ct={class:"icons"},bt={class:"icons"},kt={class:"table-body mt-16"},yt={class:"table-outer"},wt={class:"table"},Mt=["onUpdate:modelValue","onChange"],St={class:"option-btns"},It=["onClick"],Dt=["onClick"],Pt=["onClick"],xt={key:0,class:"table-no-data"},zt={class:"title",showHeader:"true"},$t={class:"form mb-16"},Et={class:"form-item mb-16 col-10"},Nt={key:0,class:"err-msg"},Vt={class:"form-item mb-16 col-10"},Ut={key:0,class:"err-msg"},At={class:"modal-footer"},qt={class:"btns"},Ot={class:"modal-footer"},Ft={class:"btns"},Bt={class:"form mb-16"},Ht={class:"form-item mb-16 col-10"},Lt={class:"i-grid"},Rt=["value"],Tt={class:"plan-details"},jt=["src"],Kt={class:"modal-footer"},Jt={class:"btns"},Gt={class:"title",showHeader:"true"},Qt={class:"i-card"},Wt={class:"plan-details"},Xt=["src"],oo={__name:"DesignationList",setup(Yt){const c=tt(),y=st(),N=it(),n=C(()=>c.state.OrganizationSettings),V=C(()=>c.state.IdCardStock),e=ot({organizationSettingId:null,organizationId:null,editMode:!1,designationId:null,name:null,priority:null,idCardStockId:null,productDetailModal:!1,product:null,ids:[]});et(()=>{y.query.id&&(e.organizationSettingId=y.query.settingId,e.organizationId=y.query.id)});function U(){n.value.addModal=!0,e.editMode=!1,e.name=null,e.priority=null}function A(i){n.value.addModal=!0,e.editMode=!0,e.designationId=i.id,e.name=i.name,e.priority=i.priority}function q(i){e.designationId=i,n.value.confirmModal=!0}function O(){e.idCardStockId=null,n.value.productModal=!0,I("")}function F(i){e.productDetailModal=!0,e.product=i}const I=i=>{c.dispatch("IdCardStock/getIdCardStocks",{limit:10,offset:0,keyword:i})},B=()=>{if(e.ids.length>0&&e.idCardStockId){const i=[];e.ids.forEach(o=>{i.push({id:o,idCardsStockId:e.idCardStockId})}),c.dispatch("OrganizationSettings/assignDesignationProduct",i)}else c.dispatch("Alert/error",{msg:"Either no designation or select product!"})},H=i=>{e.ids.length>0?N.push({path:"/crm/organization/final-staff-id-card",query:{classId:JSON.stringify(e.ids),organizationId:e.organizationId,status:i}}):c.dispatch("Alert/error",{msg:"Please seclect class!"})};function L(){if(w.value||M.value){e.submit=!0;return}e.submit=!1,e.editMode?c.dispatch("OrganizationSettings/updateDesignation",{id:e.designationId,name:e.name,priority:e.priority,settingId:e.organizationSettingId}):c.dispatch("OrganizationSettings/addDesignation",{name:e.name,priority:e.priority,settingId:e.organizationSettingId})}function R(){c.dispatch("OrganizationSettings/deleteDesignation",{id:e.designationId,status:"DELETED"})}function T(i){const o=e.ids.findIndex(S=>S===i);o<0?e.ids.push(i):e.ids.splice(o,1)}const w=C(()=>{if(!e.name)return"Please Enter Name"}),M=C(()=>{if(!e.priority)return"Please Enter Priority"});function j(i){let o=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(o)||i.keyCode===8||i.keyCode===9||i.keyCode===37||i.keyCode===39||i.keyCode>=96&&i.keyCode<=105)return!0;i.preventDefault()}return(i,o)=>{var D;const S=a("icon-user"),K=a("icon-search"),J=a("icon-plus"),G=a("icon-card"),Q=a("icon-asign"),W=a("icon-edit"),X=a("icon-info"),Y=a("icon-delete"),f=a("icon-cross"),_=a("Modal"),Z=a("router-link");return v(),u("section",rt,[t("div",ct,[t("div",ut,[t("div",pt,[t("div",vt,[t("div",gt,[d(S)]),o[18]||(o[18]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Designation : List"),t("h5",{class:"main-title"},"Our Designation")],-1))])]),t("div",mt,[t("div",ft,[o[19]||(o[19]=t("input",{type:"text",placeholder:"Search here"},null,-1)),t("div",_t,[d(K)])]),t("div",ht,[t("div",{class:"icon tooltip-wrapper",onClick:r(U,["prevent"])},[d(J),o[20]||(o[20]=t("div",{class:"tooltip"},"Add Designation",-1))])]),t("div",Ct,[t("div",{class:"icon tooltip-wrapper",onClick:o[0]||(o[0]=r(s=>H(),["prevent"]))},[d(G),o[21]||(o[21]=t("div",{class:"tooltip"},"Final Card",-1))])]),t("div",bt,[t("div",{class:"icon tooltip-wrapper",onClick:o[1]||(o[1]=r(s=>O(),["prevent"]))},[d(Q),o[22]||(o[22]=t("div",{class:"tooltip"},"Assign Product",-1))])])])]),t("div",kt,[t("div",yt,[t("table",wt,[o[26]||(o[26]=t("thead",null,[t("th"),t("th",null,"Designation Name"),t("th",null,"Priority"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(v(!0),u(z,null,$(n.value.designation,(s,m)=>(v(),u("tr",{key:m},[t("td",null,[k(t("input",{type:"checkbox","onUpdate:modelValue":l=>s.checked=l,onChange:l=>T(s.id)},null,40,Mt),[[nt,s.checked]])]),t("td",null,g(s.name),1),t("td",null,g(s.priority),1),t("td",null,[t("div",St,[t("div",{class:"icon tooltip-wrapper",onClick:l=>A(s)},[d(W),o[23]||(o[23]=t("div",{class:"tooltip"},"Edit",-1))],8,It),s.idCardsStock?(v(),u("div",{key:0,class:"icon tooltip-wrapper",onClick:l=>F(s)},[d(X),o[24]||(o[24]=t("div",{class:"tooltip"},"View Product",-1))],8,Dt)):b("",!0),t("div",{class:"icon tooltip-wrapper",onClick:r(l=>q(s.id),["prevent"])},[d(Y),o[25]||(o[25]=t("div",{class:"tooltip"},"Delete",-1))],8,Pt)])])]))),128))])])]),((D=n.value.designation)==null?void 0:D.length)<=0?(v(),u("div",xt,o[27]||(o[27]=[t("div",null,"No records Found!",-1)]))):b("",!0)])]),d(_,{show:n.value.addModal,"onUpdate:show":o[7]||(o[7]=s=>n.value.addModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:p(()=>[t("div",zt,g(e.editMode?"Update Designation":"Add Designation"),1),t("div",{class:"close-btn",onClick:o[2]||(o[2]=r(s=>n.value.addModal=!1,["prevent"]))},[d(f)])]),default:p(()=>[t("form",$t,[t("div",Et,[o[28]||(o[28]=t("div",{class:"title"},"Name",-1)),k(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>e.name=s),placeholder:"Enter Name",maxlength:"50"},null,512),[[E,e.name]]),e.submit&&w.value?(v(),u("div",Nt,g(w.value),1)):b("",!0)]),t("div",Vt,[o[29]||(o[29]=t("div",{class:"title"},"Priority",-1)),k(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>e.priority=s),placeholder:"Enter Priority",onKeydown:o[5]||(o[5]=s=>j(s)),maxlength:"10"},null,544),[[E,e.priority]]),e.submit&&M.value?(v(),u("div",Ut,g(M.value),1)):b("",!0)])]),t("div",At,[t("div",qt,[t("div",{class:"btn red-btn",onClick:o[6]||(o[6]=r(s=>n.value.addModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:L},"Submit")])])]),_:1},8,["show"]),d(_,{show:n.value.confirmModal,"onUpdate:show":o[10]||(o[10]=s=>n.value.confirmModal=s),class:"confirm-modal",headerClasses:"header-bg"},{header:p(()=>[o[30]||(o[30]=t("div",{class:"title",showHeader:"true"},"Delete",-1)),t("div",{class:"close-btn",onClick:o[8]||(o[8]=r(s=>n.value.confirmModal=!1,["prevent"]))},[d(f)])]),default:p(()=>[o[31]||(o[31]=t("div",{class:"delete-icon"},[t("img",{src:at,alt:""})],-1)),o[32]||(o[32]=t("h4",{class:"text-gree"},"Are you sure want to Delete?",-1)),t("div",Ot,[t("div",Ft,[t("div",{class:"btn red-btn",onClick:o[9]||(o[9]=r(s=>n.value.confirmModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:R},"Delete")])])]),_:1},8,["show"]),d(_,{show:n.value.productModal,"onUpdate:show":o[15]||(o[15]=s=>n.value.productModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:p(()=>[o[33]||(o[33]=t("div",{class:"title",showHeader:"true"},"Select product",-1)),t("div",{class:"close-btn",onClick:o[11]||(o[11]=r(s=>n.value.productModal=!1,["prevent"]))},[d(f)])]),default:p(()=>[t("div",null,[t("form",Bt,[t("div",Ht,[o[34]||(o[34]=t("div",{class:"title"},"Search Product",-1)),t("input",{type:"text",placeholder:"Search Product",onKeydown:o[12]||(o[12]=s=>I(s.target.value))},null,32)])]),t("div",Lt,[(v(!0),u(z,null,$(V.value.data,(s,m)=>{var l;return v(),u("label",{class:"i-card",key:m},[k(t("input",{name:"plan",class:"radio",type:"radio","onUpdate:modelValue":o[13]||(o[13]=h=>e.idCardStockId=h),value:s.id},null,8,Rt),[[dt,e.idCardStockId]]),t("span",Tt,[t("img",{src:`${(l=s.productImage[0])==null?void 0:l.file}?width=200`,alt:""},null,8,jt),t("span",null,g(s.title),1)])])}),128))])]),t("div",Kt,[t("div",Jt,[t("div",{class:"btn red-btn",onClick:o[14]||(o[14]=r(s=>n.value.productModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:B},"Assign Product")])])]),_:1},8,["show"]),d(_,{show:e.productDetailModal,"onUpdate:show":o[17]||(o[17]=s=>e.productDetailModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:p(()=>{var s;return[t("div",Gt," Product For ("+g((s=e.product)==null?void 0:s.name)+") ",1),t("div",{class:"close-btn",onClick:o[16]||(o[16]=r(m=>e.productDetailModal=!1,["prevent"]))},[d(f)])]}),default:p(()=>{var s,m,l,h,P,x;return[t("div",null,[t("label",Qt,[t("span",Wt,[t("img",{src:`${(l=(m=(s=e.product)==null?void 0:s.idCardsStock)==null?void 0:m.productImage[0])==null?void 0:l.file}?width=200`,alt:"",style:{height:"auto",width:"100%"}},null,8,Xt),t("span",null,g((P=(h=e.product)==null?void 0:h.idCardsStock)==null?void 0:P.title),1)])]),d(Z,{class:"btn white-btn",to:{path:"/crm/editor",query:{id:(x=e==null?void 0:e.product)==null?void 0:x.id,from:"Designation",type:"Staff",settingId:e==null?void 0:e.organizationSettingId}}},{default:p(()=>o[35]||(o[35]=[lt(" Editor ")])),_:1},8,["to"])])]}),_:1},8,["show"])])}}};export{oo as default};
