import{d as X,u as Y,e as Z,n as tt,C as st,c as i,a as t,b as e,r as a,w as _,v as ot,q as nt,j as c,g as p,F as et,y as at,h as b,p as it,s as lt,o as l,i as dt,t as u,E as f}from"./index-QZaKag1-.js";const rt={class:"faq-page"},ct={class:"container"},ut={class:"table-card card"},pt={class:"table-header"},vt={class:"left"},gt={class:"title-row"},_t={class:"icon"},ht={class:"right"},mt={class:"searchbar"},yt={class:"icon"},Ct={class:"searchbar"},bt={class:"select-dropdown"},ft={class:"icons"},kt={class:"table-body p-16"},It={class:"table-outer"},wt={class:"table"},St={key:0,class:"zoom-image"},Et=["src"],zt={key:0,class:"badge success-badge"},Vt={key:1,class:"badge warning-badge"},Tt={key:2,class:"badge danger-badge"},Dt={class:"option-btns"},Nt=["onClick"],Mt=["onClick"],Pt=["onClick"],Ot=["onClick"],At=["onClick"],$t=["onClick"],Lt=["onClick"],Ut={key:0,class:"table-no-data"},xt={key:1,class:"table-footer"},Bt={class:"status-row"},Gt={for:"approve",class:"data"},Ht={class:"data-inner approve-card"},qt={for:"pending",class:"data"},Ft={class:"data-inner pending-card"},Rt={for:"block",class:"data"},jt={class:"data-inner block-card"},Jt={class:"modal-footer"},Kt={class:"btns"},Xt={__name:"List",setup(Qt){const m=Y();it();const k=lt(),d=X(()=>m.state.Organization),n=Z({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"SCHOOL",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,changeStatus:null});tt(()=>{h()}),st(()=>n.keyword,()=>{clearTimeout(n.typingTimer),n.typingTimer=setTimeout(()=>{n.limit=10,n.offset=0,n.currentPage=1,h()},n.typingDelay)});function h(){m.dispatch("Organization/getOrganization",{limit:n.limit,offset:n.offset,keyword:n.keyword,status:n.status,roles:n.roles})}function N(r,s){n.changeStatus=s,n.organizationId=r,d.value.statusModal=!0}function M(){m.dispatch("Organization/updateOrganizationStatus",{id:n.organizationId,status:n.changeStatus})}const P=r=>{n.currentPage=r,n.offset=n.limit*(r-1),h()};function O(){h()}function I(r,s){k.push({path:s,query:{id:r}})}function g(r,s,y,C){k.push({path:y,query:{id:r,settingId:s,accountId:C}})}return(r,s)=>{var w,S;const y=a("icon-school"),C=a("icon-search"),A=a("icon-plus"),$=a("router-link"),L=a("icon-edit"),U=a("icon-status"),x=a("icon-menu"),B=a("icon-library-list"),G=a("icon-user-list"),H=a("icon-student-list"),q=a("icon-setting"),F=a("Pagination"),R=a("icon-cross"),j=a("icon-success"),J=a("icon-warning"),K=a("icon-block"),Q=a("Modal");return l(),i("section",rt,[t("div",ct,[t("div",ut,[t("div",pt,[t("div",vt,[t("div",gt,[t("div",_t,[e(y)]),s[10]||(s[10]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"SCHOOL : List"),t("h5",{class:"main-title"},"Our SCHOOL")],-1))])]),t("div",ht,[t("div",mt,[_(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>n.keyword=o),placeholder:"Search here"},null,512),[[ot,n.keyword]]),t("div",yt,[e(C)])]),t("div",Ct,[t("div",bt,[_(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>n.status=o),onChange:O},s[11]||(s[11]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[nt,n.status]])])]),t("div",ft,[t("div",{class:"icon tooltip-wrapper",onClick:s[2]||(s[2]=c(o=>I(null,"/crm/add-organization"),["prevent"]))},[e(A),s[12]||(s[12]=t("div",{class:"tooltip"},"Add SCHOOL",-1))])])])]),t("div",kt,[t("div",It,[t("table",wt,[s[20]||(s[20]=t("thead",null,[t("th",null,"#"),t("th",null,"Name"),t("th",null,"Contact No"),t("th",null,"Created By"),t("th",null,"State/City"),t("th",null,"Type"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(l(!0),i(et,null,at(d.value.organizationData,(o,W)=>{var E,z,V,T,D;return l(),i("tr",{key:W},[t("td",null,[o.image?(l(),i("div",St,[t("img",{src:`${o.image}?width=200`,alt:""},null,8,Et)])):p("",!0)]),t("td",null,[e($,{to:`/crm/organization/setting/class-list?id=${o.id}&settingId=${o.settingId}`,class:"profile-link hover-color"},{default:b(()=>[dt(u(o.name),1)]),_:2},1032,["to"])]),t("td",null,u(o.contactNo),1),t("td",null,u(((z=(E=o.updated)==null?void 0:E.staffDetail)==null?void 0:z.name)||((T=(V=o.updated)==null?void 0:V.partnerDetail[0])==null?void 0:T.firmName)),1),t("td",null,u(o.state)+"/"+u(o.city),1),t("td",null,u(o.type),1),t("td",null,[o.status==="ACTIVE"?(l(),i("div",zt,u(o.status),1)):p("",!0),o.status==="PENDING"?(l(),i("div",Vt,u(o.status),1)):p("",!0),o.status==="DEACTIVE"?(l(),i("div",Tt,u(o.status),1)):p("",!0)]),t("td",null,[t("div",Dt,[t("div",{class:"icon tooltip-wrapper",onClick:v=>I(o.id,"/crm/edit-organization")},[e(L),s[13]||(s[13]=t("div",{class:"tooltip"},"Edit",-1))],8,Nt),t("div",{class:"icon tooltip-wrapper",onClick:c(v=>N(o.id,o.status),["prevent"])},[e(U),s[14]||(s[14]=t("div",{class:"tooltip"},"Change Status",-1))],8,Mt),((D=o.setting)==null?void 0:D.type)==="MULTI"?(l(),i("div",{key:0,class:"icon tooltip-wrapper",onClick:c(v=>g(o.id,o.settingId,"/crm/organization/my-branch",o.accountId),["prevent"])},[e(x),s[15]||(s[15]=t("div",{class:"tooltip"},"My Branch",-1))],8,Pt)):p("",!0),t("div",{class:"icon tooltip-wrapper",onClick:c(v=>g(o.id,o.settingId,"/crm/organization/library"),["prevent"])},[e(B),s[16]||(s[16]=t("div",{class:"tooltip"},"Library",-1))],8,Ot),t("div",{class:"icon tooltip-wrapper",onClick:c(v=>g(o.id,o.settingId,"/crm/organization/my-staff",o.accountId),["prevent"])},[e(G),s[17]||(s[17]=t("div",{class:"tooltip"},"My Staff",-1))],8,At),t("div",{class:"icon tooltip-wrapper",onClick:c(v=>g(o.id,o.settingId,"/crm/organization/my-student"),["prevent"])},[e(H),s[18]||(s[18]=t("div",{class:"tooltip"},"My Student",-1))],8,$t),t("div",{class:"icon tooltip-wrapper",onClick:c(v=>g(o.id,o.settingId,"/crm/organization/setting/class-list"),["prevent"])},[e(q),s[19]||(s[19]=t("div",{class:"tooltip"},"Setttngs",-1))],8,Lt)])])])}),128))])])]),((w=d.value.organizationData)==null?void 0:w.length)<=0?(l(),i("div",Ut,s[21]||(s[21]=[t("div",null,"No records Found!",-1)]))):p("",!0),((S=d.value.organizationData)==null?void 0:S.length)>0?(l(),i("div",xt,[e(F,{currentPage:n.currentPage,totalItem:d.value.totalOrganization,itemsPerPage:n.limit,"onUpdate:currentPage":s[3]||(s[3]=o=>P(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):p("",!0)])])]),e(Q,{show:d.value.statusModal,"onUpdate:show":s[9]||(s[9]=o=>d.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:b(()=>[s[22]||(s[22]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[4]||(s[4]=c(o=>d.value.statusModal=!1,["prevent"]))},[e(R)])]),default:b(()=>[t("div",Bt,[t("label",Gt,[_(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>n.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[f,n.changeStatus]]),t("div",Ht,[e(j),s[23]||(s[23]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",qt,[_(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>n.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[f,n.changeStatus]]),t("div",Ft,[e(J),s[24]||(s[24]=t("div",{class:"title"},"PENDING",-1))])]),t("label",Rt,[_(t("input",{type:"radio","onUpdate:modelValue":s[7]||(s[7]=o=>n.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[f,n.changeStatus]]),t("div",jt,[e(K),s[25]||(s[25]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",Jt,[t("div",Kt,[t("div",{class:"btn red-btn",onClick:s[8]||(s[8]=c(o=>d.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:M},"Submit")])])]),_:1},8,["show"])])}}};export{Xt as default};
