import{k as i,c,a as h,g as D,w as K,F as g,y as k,i as L,t as b,j as w,x as v,v as j,P as F,Q as C,R as N,B as R,u as Q,o as u}from"./index-QZaKag1-.js";const q={class:"multi-select"},E={class:"tab-input"},O={class:"tabs"},P=["onClick"],U=["placeholder","onKeydown"],$={key:0,class:"search-results"},z=["onClick"],J={__name:"MultiSelect",props:{options:{type:Array,required:!0},tabs:{type:Array,default:[]},placeholder:{type:String,default:"Select"}},emits:["update:modelValue","selected","specific","removed","errorMsg","selectedArr"],setup(y){const A=Q(),S=y;let e=i(""),o=i([]),r=i([]),p=i(null),m=i([]),d=i(!1);const t=R(),T=()=>{e.value!==""&&(o.value.push(e.value),t.emit("specific",{id:null,name:e.value}),t.emit("selected",o.value),e.value="",d.value=!1)},x=()=>{e.value=""},M=(s,l)=>{t.emit("removed",s),o.value.splice(l,1),r.value.splice(l,1),t.emit("selected",o.value),t.emit("selectedArr",r.value)},I=s=>{t.emit("search",s.target.value)},V=s=>{r.value.findIndex(n=>n.id===s.id)<0?(o.value.push(s.name),r.value.push(s)):(p.value="Already Selected!",t.emit("errorMsg",p.value),A.dispatch("Alert/error",{msg:"Already Selected!"})),setTimeout(()=>{p.value=null,t.emit("errorMsg",p.value)},2e3),t.emit("specific",s),t.emit("selected",o.value),t.emit("selectedArr",r.value),e.value="",m.value=[],d.value=!1},_=()=>{const s=e.value.toLowerCase()||"";m.value=S.options.filter(l=>{var n;return(n=l.name)==null?void 0:n.toLowerCase().includes(s)}),d.value=!0},B=()=>{d.value=!1};return(s,l)=>{const n=F("click-outside");return u(),c("div",q,[h("div",E,[h("div",O,[(u(!0),c(g,null,k(v(r),(a,f)=>(u(),c("span",{key:f,class:"tab"},[L(b(a.name)+" ",1),h("button",{onClick:w(G=>M(a,f),["prevent"])},"â¤«",8,P)]))),128))]),K(h("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>N(e)?e.value=a:e=a),placeholder:y.placeholder,onInput:_,onFocus:_,onKeydown:C(w(T,["prevent"]),["enter"]),onKeyup:[C(x,["enter"]),l[1]||(l[1]=a=>I(a))]},null,40,U),[[j,v(e)],[n,B]])]),v(d)&&v(m).length>0?(u(),c("ul",$,[(u(!0),c(g,null,k(v(m),a=>(u(),c("li",{key:a.id,onClick:f=>V(a)},b(a.name),9,z))),128))])):D("",!0)])}}};export{J as default};
