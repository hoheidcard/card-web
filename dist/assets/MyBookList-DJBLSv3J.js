import{d as v,u as rt,e as ut,n as ct,p as vt,C as pt,c as l,a as e,b as r,r as c,w as p,v as k,q as gt,j as m,g as u,F as mt,y as bt,h,s as ft,o as i,t as n,E as L}from"./index-QZaKag1-.js";import{_ as yt}from"./no-image-Cge9pZ0v.js";import{_ as kt}from"./img-D4b0CCTT.js";const ht={class:"faq-page"},_t={class:"container"},Ct={class:"table-card card"},It={class:"table-header"},wt={class:"left"},St={class:"title-row"},Vt={class:"icon"},Dt={class:"right"},Pt={class:"searchbar"},Et={class:"icon"},Mt={class:"searchbar"},Ut={class:"select-dropdown"},Bt={class:"icons"},Lt={class:"table-body p-16"},zt={class:"table-outer"},At={class:"table"},Nt={class:"s-name flex align-center gap-10"},qt=["src"],Tt={key:1,src:yt,class:"h-w-3r",alt:""},xt={key:0,class:"badge success-badge"},Ot={key:1,class:"badge warning-badge"},$t={key:2,class:"badge danger-badge"},jt={class:"option-btns"},Ft=["onClick"],Gt=["onClick"],Rt=["onClick"],Ht={key:0,class:"table-no-data"},Qt={key:1,class:"table-footer"},Kt={class:"title",showHeader:"true"},Jt={class:"form mb-16"},Wt={class:"form-item mb-16"},Xt={key:0,class:"err-msg"},Yt={class:"form-item mb-16"},Zt={key:0,class:"err-msg"},te={class:"row"},ee={class:"form-item mb-16 col-5"},oe={key:0,class:"err-msg"},se={class:"form-item mb-16 col-5"},ae={key:0,class:"err-msg"},le={class:"row"},ie={class:"form-item mb-16 col-5"},ne={key:0,class:"err-msg"},de={class:"form-item mb-16 col-5"},re={key:0,class:"err-msg"},ue={key:0,class:"form-item mb-16"},ce={key:0,class:"err-msg"},ve={class:"form-item mb-16"},pe={key:0,class:"err-msg"},ge={class:"modal-footer"},me={class:"btns"},be={class:"form mb-16"},fe={class:"upload-section"},ye={class:"pic-upload"},ke=["src"],he={key:1,src:kt,class:"dummy-img pic",alt:""},_e={for:"imgUpload-doc",class:"upload-file-block"},Ce={key:0,class:"err-msg"},Ie={class:"modal-footer justify-center"},we={class:"btns"},Se={class:"status-row"},Ve={for:"approve",class:"data"},De={class:"data-inner approve-card"},Pe={for:"pending",class:"data"},Ee={class:"data-inner pending-card"},Me={for:"block",class:"data"},Ue={class:"data-inner block-card"},Be={class:"modal-footer"},Le={class:"btns"},Te={__name:"MyBookList",setup(ze){const g=rt(),M=vt();ft();const d=v(()=>g.state.OrganizationLibrary),z=v(()=>g.state.OrganizationSettings),t=ut({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,bookId:null,organizationSettingId:null,changeStatus:null,imagePreview:null,imagelink:null,file:null,name:null,shortDesc:null,quantity:null,author:null,code:null,bookCategoryId:null,classListId:null,bookId:null,bookCategory:null,class:null});ct(()=>{M.query.id&&(t.organizationId=M.query.id,t.organizationSettingId=M.query.settingId,_())}),pt(()=>t.keyword,()=>{clearTimeout(t.typingTimer),t.typingTimer=setTimeout(()=>{t.limit=10,t.offset=0,t.currentPage=1,_()},t.typingDelay)});function A(){g.dispatch("OrganizationSettings/getOneOrganizationSettings",{id:t.organizationSettingId})}function _(){g.dispatch("OrganizationLibrary/getBooks",{limit:t.limit,offset:t.offset,keyword:t.keyword,status:t.status,organizationDetailId:t.organizationId})}function G(){d.value.libraryModal=!0,t.editMode=!1,A()}function R(a){var o,b,y,E;d.value.libraryModal=!0,t.editMode=!0,A(),t.bookId=a.id,t.name=a.name,t.shortDesc=a.shortDesc,t.quantity=a.quantity,t.author=a.author,t.code=a.code,t.bookCategoryId=(o=a.bookCategory)==null?void 0:o.id,t.classListId=(b=a.classList)==null?void 0:b.id,t.bookCategory=(y=a.bookCategory)==null?void 0:y.name,t.class=(E=a.classList)==null?void 0:E.name}function H(a,o){d.value.fileUploadModal=!0,t.bookId=a,t.imagePreview=o}function Q(a,o){t.changeStatus=o,t.bookId=a,d.value.statusModal=!0}function K(a){t.bookCategoryId=a.id}function J(a){t.classListId=a.id}async function N(a){if(a){const o=await a.target;if(o.files[0].type==="image/png"||o.files[0].type==="image/jpg"||o.files[0].type==="image/jpeg"){if(o.files){const b=new FileReader;b.onload=y=>{t.imagePreview=y.target.result},o.files[0]&&(b.readAsDataURL(o.files[0]),t.file=o.files[0])}}else t.imagePreview=null,g.dispatch("Alert/error",{msg:"Upload image in png, jpeg, jpg format."})}}function W(){if(f.value){t.submit=!0;return}t.submit=!1,g.dispatch("OrganizationLibrary/updateImage",{id:t.bookId,file:t.file})}function X(){if(t.editMode){if(C.value||I.value||w.value||S.value||V.value||D.value||P.value){t.submit=!0;return}t.submit=!1,g.dispatch("OrganizationLibrary/editBooks",{name:t.name,shortDesc:t.shortDesc,quantity:t.quantity,author:t.author,code:t.code,bookCategoryId:t.bookCategoryId,classListId:t.classListId,organizationDetailId:t.organizationId,id:t.bookId,bookCategory:t.bookCategory,className:t.class})}else{if(C.value||I.value||w.value||S.value||V.value||D.value||P.value||f.value){t.submit=!0;return}t.submit=!1,g.dispatch("OrganizationLibrary/addBooks",{name:t.name,shortDesc:t.shortDesc,quantity:t.quantity,author:t.author,code:t.code,bookCategoryId:t.bookCategoryId,classListId:t.classListId,file:t.file,organizationDetailId:t.organizationId})}}function Y(){g.dispatch("OrganizationLibrary/updateBooksStatus",{id:t.bookId,status:t.changeStatus})}const Z=a=>{t.currentPage=a,t.offset=t.limit*(a-1),_()};function tt(){_()}const C=v(()=>{if(!t.name)return"Please Enter Name"}),I=v(()=>{if(!t.author)return"Please Enter Author"}),w=v(()=>{if(!t.quantity)return"Please Enter Quantity"}),S=v(()=>{if(!t.code)return"Please Enter Code"}),V=v(()=>{if(!t.bookCategoryId)return"Please Enter Book Category"}),D=v(()=>{if(!t.classListId)return"Please Select Class"}),P=v(()=>{if(!t.shortDesc)return"Please Enter Short Description"}),f=v(()=>{if(!t.file)return"Please Select a File"});function et(a){let o=String.fromCharCode(a.keyCode);if(/^[0-9]+$/.test(o)||a.keyCode===8||a.keyCode===9||a.keyCode===37||a.keyCode===39||a.keyCode>=96&&a.keyCode<=105)return!0;a.preventDefault()}return(a,o)=>{var T,x;const b=c("icon-help"),y=c("icon-search"),E=c("icon-plus"),ot=c("icon-edit"),st=c("icon-status"),at=c("icon-image-edit"),lt=c("Pagination"),U=c("icon-cross"),q=c("Select"),B=c("Modal"),it=c("icon-success"),nt=c("icon-warning"),dt=c("icon-block");return i(),l("section",ht,[e("div",_t,[e("div",Ct,[e("div",It,[e("div",wt,[e("div",St,[e("div",Vt,[r(b)]),o[26]||(o[26]=e("div",{class:"titles"},[e("div",{class:"sub-title"},"Book : List"),e("h5",{class:"main-title"},"Book")],-1))])]),e("div",Dt,[e("div",Pt,[p(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>t.keyword=s),placeholder:"Search here"},null,512),[[k,t.keyword]]),e("div",Et,[r(y)])]),e("div",Mt,[e("div",Ut,[p(e("select",{name:"",id:"","onUpdate:modelValue":o[1]||(o[1]=s=>t.status=s),onChange:tt},o[27]||(o[27]=[e("option",{value:"ACTIVE"},"ACTIVE",-1),e("option",{value:"PENDING"},"PENDING",-1),e("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[gt,t.status]])])]),e("div",Bt,[e("div",{class:"icon tooltip-wrapper",onClick:o[2]||(o[2]=m(s=>G(),["prevent"]))},[r(E),o[28]||(o[28]=e("div",{class:"tooltip"},"Add Books",-1))])])])]),e("div",Lt,[e("div",zt,[e("table",At,[o[32]||(o[32]=e("thead",null,[e("th",null,"#"),e("th",null,"Image"),e("th",null,"Name"),e("th",null,"Auther"),e("th",null,"Code"),e("th",null,"Book Category"),e("th",null,"Class"),e("th",null,"Quantity"),e("th",null,"Status"),e("th",{class:"text-center"},"Action")],-1)),e("tbody",null,[(i(!0),l(mt,null,bt(d.value.bookData,(s,O)=>{var $,j;return i(),l("tr",{key:O},[e("td",null,n(O+1),1),e("td",null,[e("div",Nt,[s.image?(i(),l("img",{key:0,src:s.image,class:"h-w-3r",alt:""},null,8,qt)):(i(),l("img",Tt))])]),e("td",null,n(s.name),1),e("td",null,n(s.author),1),e("td",null,n(s.code),1),e("td",null,n(($=s.bookCategory)==null?void 0:$.name),1),e("td",null,n((j=s.classList)==null?void 0:j.name),1),e("td",null,n(s.quantity),1),e("td",null,[s.status==="ACTIVE"?(i(),l("div",xt,n(s.status),1)):u("",!0),s.status==="PENDING"?(i(),l("div",Ot,n(s.status),1)):u("",!0),s.status==="DEACTIVE"?(i(),l("div",$t,n(s.status),1)):u("",!0)]),e("td",null,[e("div",jt,[e("div",{class:"icon tooltip-wrapper",onClick:F=>R(s)},[r(ot),o[29]||(o[29]=e("div",{class:"tooltip"},"Edit",-1))],8,Ft),e("div",{class:"icon tooltip-wrapper",onClick:m(F=>Q(s.id,s.status),["prevent"])},[r(st),o[30]||(o[30]=e("div",{class:"tooltip"},"Change Status",-1))],8,Gt),e("div",{class:"icon tooltip-wrapper",onClick:m(F=>H(s.id,s.image),["prevent"])},[r(at),o[31]||(o[31]=e("div",{class:"tooltip"},"Change Image",-1))],8,Rt)])])])}),128))])])]),((T=d.value.bookData)==null?void 0:T.length)<=0?(i(),l("div",Ht,o[33]||(o[33]=[e("div",null,"No records Found!",-1)]))):u("",!0),((x=d.value.bookData)==null?void 0:x.length)>0?(i(),l("div",Qt,[r(lt,{currentPage:t.currentPage,totalItem:d.value.totalBook,itemsPerPage:t.limit,"onUpdate:currentPage":o[3]||(o[3]=s=>Z(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):u("",!0)])])]),r(B,{show:d.value.libraryModal,"onUpdate:show":o[15]||(o[15]=s=>d.value.libraryModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:h(()=>[e("div",Kt,n(t.editMode?"Update Books":"Add Books"),1),e("div",{class:"close-btn",onClick:o[4]||(o[4]=m(s=>d.value.libraryModal=!1,["prevent"]))},[r(U)])]),default:h(()=>[e("form",Jt,[e("div",Wt,[o[34]||(o[34]=e("div",{class:"title"},"Book Name",-1)),p(e("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>t.name=s),placeholder:"Enter Book Name",maxlength:"30"},null,512),[[k,t.name]]),t.submit&&C.value?(i(),l("div",Xt,n(C.value),1)):u("",!0)]),e("div",Yt,[o[35]||(o[35]=e("div",{class:"title"},"Author",-1)),p(e("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=s=>t.author=s),placeholder:"Enter Author Name",maxlength:"30"},null,512),[[k,t.author]]),t.submit&&I.value?(i(),l("div",Zt,n(I.value),1)):u("",!0)]),e("div",te,[e("div",ee,[o[36]||(o[36]=e("div",{class:"title"},"Quantity",-1)),p(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>t.quantity=s),placeholder:"Enter quantity",onKeydown:o[8]||(o[8]=s=>et(s)),maxlength:"7"},null,544),[[k,t.quantity]]),t.submit&&w.value?(i(),l("div",oe,n(w.value),1)):u("",!0)]),e("div",se,[o[37]||(o[37]=e("div",{class:"title"},"Code",-1)),p(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=s=>t.code=s),placeholder:"Enter code",maxlength:"10"},null,512),[[k,t.code]]),t.submit&&S.value?(i(),l("div",ae,n(S.value),1)):u("",!0)])]),e("div",le,[e("div",ie,[o[38]||(o[38]=e("div",{class:"title"},"Book Category",-1)),r(q,{modelValue:t.bookCategory,"onUpdate:modelValue":o[10]||(o[10]=s=>t.bookCategory=s),options:z.value.bookCategory,placeholder:t.bookCategory?t.bookCategory:"Select",onSelected:K},null,8,["modelValue","options","placeholder"]),t.submit&&V.value?(i(),l("div",ne,n(V.value),1)):u("",!0)]),e("div",de,[o[39]||(o[39]=e("div",{class:"title"},"Class",-1)),r(q,{modelValue:t.class,"onUpdate:modelValue":o[11]||(o[11]=s=>t.class=s),options:z.value.classList,placeholder:t.class?t.class:"Select",onSelected:J},null,8,["modelValue","options","placeholder"]),t.submit&&D.value?(i(),l("div",re,n(D.value),1)):u("",!0)])]),t.editMode?u("",!0):(i(),l("div",ue,[o[40]||(o[40]=e("div",{class:"title"},"Image",-1)),e("input",{type:"file",onChange:o[12]||(o[12]=s=>N(s))},null,32),t.submit&&f.value?(i(),l("div",ce,n(f.value),1)):u("",!0)])),e("div",ve,[o[41]||(o[41]=e("div",{class:"title"},"Short Description",-1)),p(e("textarea",{name:"",id:"","onUpdate:modelValue":o[13]||(o[13]=s=>t.shortDesc=s),rows:"4",placeholder:"Short Description"},null,512),[[k,t.shortDesc]]),t.submit&&P.value?(i(),l("div",pe,n(P.value),1)):u("",!0)])]),e("div",ge,[e("div",me,[e("div",{class:"btn red-btn",onClick:o[14]||(o[14]=m(s=>d.value.libraryModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:X},"Submit")])])]),_:1},8,["show"]),r(B,{show:d.value.fileUploadModal,"onUpdate:show":o[19]||(o[19]=s=>d.value.fileUploadModal=s),centerModal:!0,headerClasses:"header-bg"},{header:h(()=>[o[42]||(o[42]=e("div",{class:"title",showHeader:"true"},"Update Image",-1)),e("div",{class:"close-btn",onClick:o[16]||(o[16]=m(s=>d.value.fileUploadModal=!1,["prevent"]))},[r(U)])]),default:h(()=>[e("form",be,[e("div",fe,[e("div",ye,[t.imagePreview?(i(),l("img",{key:0,src:t.imagePreview,class:"preview-image pic",id:"profilePic",alt:""},null,8,ke)):(i(),l("img",he)),e("label",_e,n(t.imagePreview?"Change Doc":"Upload Doc"),1),e("input",{class:"uploadProfileInput",type:"file",name:"profile_doc",id:"imgUpload-doc",onChange:o[17]||(o[17]=s=>N(s)),style:{display:"none"}},null,32)]),t.submit&&f.value?(i(),l("div",Ce,n(f.value),1)):u("",!0)])]),e("div",Ie,[e("div",we,[e("div",{class:"btn red-btn",onClick:o[18]||(o[18]=m(s=>d.value.fileUploadModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:W},"Submit")])])]),_:1},8,["show"]),r(B,{show:d.value.statusModal,"onUpdate:show":o[25]||(o[25]=s=>d.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:h(()=>[o[43]||(o[43]=e("div",{class:"title",showHeader:"true"},"Change Status",-1)),e("div",{class:"close-btn",onClick:o[20]||(o[20]=m(s=>d.value.statusModal=!1,["prevent"]))},[r(U)])]),default:h(()=>[e("div",Se,[e("label",Ve,[p(e("input",{type:"radio","onUpdate:modelValue":o[21]||(o[21]=s=>t.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[L,t.changeStatus]]),e("div",De,[r(it),o[44]||(o[44]=e("div",{class:"title"},"ACTIVE",-1))])]),e("label",Pe,[p(e("input",{type:"radio","onUpdate:modelValue":o[22]||(o[22]=s=>t.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[L,t.changeStatus]]),e("div",Ee,[r(nt),o[45]||(o[45]=e("div",{class:"title"},"PENDING",-1))])]),e("label",Me,[p(e("input",{type:"radio","onUpdate:modelValue":o[23]||(o[23]=s=>t.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[L,t.changeStatus]]),e("div",Ue,[r(dt),o[46]||(o[46]=e("div",{class:"title"},"DEACTIVE",-1))])])]),e("div",Be,[e("div",Le,[e("div",{class:"btn red-btn",onClick:o[24]||(o[24]=m(s=>d.value.statusModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:Y},"Submit")])])]),_:1},8,["show"])])}}};export{Te as default};
