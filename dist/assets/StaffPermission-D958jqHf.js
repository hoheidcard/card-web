import{d as V,u as A,e as I,n as w,p as E,c as r,a as s,b as U,r as j,t as v,w as p,z as f,f as B,F as b,y as S,s as N,o as c}from"./index-QZaKag1-.js";const q={class:"faq-page"},D={class:"container"},O={class:"table-card card"},R={class:"table-header"},F={class:"left"},M={class:"title-row"},$={class:"icon"},z={class:"titles"},L={class:"main-title"},T={class:"right"},G={class:"searchbar"},H={class:"toggle-input"},J={class:"toggle-control"},K={class:"table-body p-16"},Q={class:"permission-page user-profile"},W={class:"left-title"},X={class:"title"},Y={class:"right-permissions"},Z={class:"input-row"},ss={class:"toggle-input"},ts={class:"toggle-control"},es=["onUpdate:modelValue","onChange"],as={class:"toggle-input"},os={class:"toggle-control"},ls=["onUpdate:modelValue","onChange"],ds={__name:"StaffPermission",setup(is){const u=A(),_=E();N();const a=V(()=>u.state.Staff),n=I({staffId:null,staffAccountId:null,allStatus:!1,all:!1});w(()=>{_.query.id&&(n.staffAccountId=_.query.id,y())});function y(){u.dispatch("Staff/getOneStaff",{id:n.staffAccountId})}function h(){u.dispatch("Staff/updatePermission",{menu:a.value.permissiondata})}function P(o,t){const l=a.value.permissiondata.findIndex(e=>e.id===o);l>=0&&a.value.permissiondata[l].userPermission.forEach(d=>{d.status=t})}function k(o){const t=a.value.permissiondata.findIndex(l=>l.id===o);if(t>=0){const e=a.value.permissiondata[t].userPermission.every(d=>d.status===!0);a.value.permissiondata[t].allStatus=e}}function C(){n.all?a.value.permissiondata.forEach(o=>{o.allStatus=!0,o.userPermission.forEach(t=>{t.status=!0})}):a.value.permissiondata.forEach(o=>{o.allStatus=!1,o.userPermission.forEach(t=>{t.status=!1})})}return(o,t)=>{const l=j("icon-permission");return c(),r("section",q,[s("div",D,[s("div",O,[s("div",R,[s("div",F,[s("div",M,[s("div",$,[U(l)]),s("div",z,[t[1]||(t[1]=s("div",{class:"sub-title"},"Staff : Permission",-1)),s("h5",L,v(a.value.name),1)])])]),s("div",T,[t[3]||(t[3]=s("div",{class:"searchbar"},[s("span",null,"All")],-1)),s("div",G,[s("div",H,[s("label",J,[p(s("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>n.all=e),onChange:C},null,544),[[f,n.all]]),t[2]||(t[2]=s("span",{class:"control"},null,-1))])])]),s("div",{class:"btns justify-end"},[s("div",{class:"btn white-btn",onClick:h}," Save Changes ")])])]),s("div",K,[s("section",Q,[t[7]||(t[7]=B('<div class="title text-primary top-header"><div class="title">Permission</div><div class="title">All</div><div class="title">Create</div><div class="title">Read</div><div class="title">Update</div><div class="title">Delete</div></div>',1)),(c(!0),r(b,null,S(a.value.permissiondata,(e,d)=>(c(),r("div",{class:"per-table",key:d},[s("div",W,[s("div",X,v(e.title),1)]),s("div",Y,[s("div",Z,[s("div",ss,[t[5]||(t[5]=s("p",null,"All",-1)),s("label",ts,[p(s("input",{type:"checkbox","onUpdate:modelValue":i=>e.allStatus=i,onChange:i=>P(e.id,e.allStatus)},null,40,es),[[f,e.allStatus]]),t[4]||(t[4]=s("span",{class:"control"},null,-1))])])]),(c(!0),r(b,null,S(e.userPermission,(i,x)=>{var m;return c(),r("div",{class:"input-row",key:x},[s("div",as,[s("p",null,v((m=i.permission)==null?void 0:m.name),1),s("label",os,[p(s("input",{type:"checkbox","onUpdate:modelValue":g=>i.status=g,onChange:g=>k(e.id)},null,40,ls),[[f,i.status]]),t[6]||(t[6]=s("span",{class:"control"},null,-1))])])])}),128))])]))),128))]),s("div",{class:"btns justify-end mt-10"},[s("div",{class:"btn white-btn",onClick:h}," Save Changes ")])])])])])}}};export{ds as default};
