import{d as f,u as St,e as Ct,n as kt,p as Dt,C as wt,c as i,a as t,b as a,r as u,w as v,v as g,q as R,h as b,j as m,g as r,F as Vt,y as Pt,s as Et,o as l,t as c,x as At,m as Y,E as x}from"./index-QZaKag1-.js";const Mt={class:"faq-page"},Nt={class:"container"},zt={class:"table-card card"},xt={class:"table-header"},Ot={class:"left"},Tt={class:"title-row"},qt={class:"icon"},Ut={class:"right"},$t={class:"searchbar"},Bt={class:"icon"},Lt={class:"searchbar"},Gt={class:"select-dropdown"},Rt={class:"icons"},Yt={class:"icons"},Ft={class:"icons"},Ht={class:"table-body p-16"},Kt={class:"table-outer"},jt={class:"table"},Qt=["onChange"],Zt={key:0},Jt={key:1},Wt={key:2},Xt={key:3},te={key:0,class:"zoom-image"},ee=["src"],se={key:0,class:"badge success-badge"},oe={key:1,class:"badge warning-badge"},ne={key:2,class:"badge danger-badge"},ae={class:"option-btns"},ie=["onClick"],le=["onClick"],de=["onClick"],re=["onClick"],ue={key:0,class:"table-no-data"},ce={key:1,class:"table-footer"},ve={class:"form mb-16"},pe={class:"form-item mb-16 col-10"},fe=["min"],me={key:0,class:"err-msg"},ge={class:"form-item mb-16 col-10"},be={key:0,class:"err-msg"},ye={class:"form-item mb-16 col-10"},_e={key:0,class:"err-msg"},he={class:"form-item mb-16 col-10"},Ie={key:0,class:"err-msg"},Se={class:"form-item mb-16 col-10"},Ce={class:"modal-footer"},ke={class:"btns"},De={class:"title",showHeader:"true"},we={class:"form mb-16"},Ve={class:"form-item mb-16"},Pe={key:0,class:"err-msg"},Ee={class:"form-item mb-16"},Ae={key:0,class:"err-msg"},Me={class:"row"},Ne={class:"form-item mb-16 col-5"},ze={class:"select-dropdown"},xe={key:0,class:"err-msg"},Oe={class:"form-item mb-16 col-5"},Te=["max"],qe={key:0,class:"err-msg"},Ue={class:"form-item mb-16"},$e={key:0,class:"err-msg"},Be={class:"modal-footer"},Le={class:"btns"},Ge={class:"status-row"},Re={for:"approve",class:"data"},Ye={class:"data-inner approve-card"},Fe={for:"pending",class:"data"},He={class:"data-inner pending-card"},Ke={for:"block",class:"data"},je={class:"data-inner block-card"},Qe={class:"modal-footer"},Ze={class:"btns"},Xe={__name:"MyStaffList",setup(Je){const p=St(),y=Dt(),O=Et(),d=f(()=>p.state.OrganizationStaff),F=f(()=>p.state.Designation),H=f(()=>p.state.DeliveryPartner),s=Ct({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"SCHOOL",staffType:"ORGANIZATION",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,organizationSettingId:null,changeStatus:null,accountId:null,staffId:null,staffAccountId:null,name:null,emailId:null,phoneNumber:null,password:null,gender:"MALE",dob:null,designation:"",designationId:null,searchKey:null,deliveryDate:null,parentCard:!1,qty:0,deliveryAddress:null,contactNumber:null,deliveryPartnerId:null,ids:[],idCardStockId:null});kt(()=>{y.query.id&&(s.organizationId=y.query.id,s.organizationSettingId=y.query.settingId,s.accountId=y.query.accountId,h(),p.dispatch("DeliveryPartner/getDeliveryPartners"))}),wt(()=>s.keyword,()=>{clearTimeout(s.typingTimer),s.typingTimer=setTimeout(()=>{s.limit=10,s.offset=0,s.currentPage=1,h()},s.typingDelay)});function K(n){const e=s.ids.findIndex(_=>_===n);e<0?s.ids.push(n):s.ids.splice(e,1)}const j=()=>{if(s.ids.length>0){if(P.value||V.value||A.value||E.value){s.submit=!0;return}s.submit=!1,p.dispatch("OrganizationSettings/createStaffOrder",{staff:s.ids,deliveryDate:s.deliveryDate,deliveryAddress:s.deliveryAddress,contactNumber:s.contactNumber,qty:s.qty,deliveryPartnerId:s.deliveryPartnerId,settingId:s.organizationSettingId})}else p.dispatch("Alert/error",{msg:"Please seclect staff!"})};function h(){p.dispatch("OrganizationStaff/getBranchStaff",{limit:s.limit,offset:s.offset,keyword:s.keyword,status:s.status,type:s.staffType,organizationDetailId:s.organizationId})}function Q(){p.dispatch("Designation/getMyDesignationBySetting",{settingId:y.query.settingId})}function Z(n,e){s.changeStatus=e,s.organizationAccountId=n,d.value.statusModal=!0}function J(n){var e;console.log(n),d.value.branchStaffModal=!0,s.editMode=!0,s.staffId=n.id,s.staffAccountId=n.accountId,s.name=n.name,s.emailId=n.emailId,s.dob=n.dob,s.gender=n.gender,s.designationId=n.designationId,s.designation=(e=n.designation)==null?void 0:e.name,Q()}function W(){p.dispatch("OrganizationStaff/updateBranchStaffStatus",{id:s.organizationAccountId,status:s.changeStatus})}const X=n=>{s.currentPage=n,s.offset=s.limit*(n-1),h()};function tt(){h()}const et=n=>{s.designationId=n.id},st=n=>{s.searchKey=n};function ot(n){return n?Y(n).format("DD.MM.YYYY"):"-"}function nt(n,e){O.push({path:e,query:{id:n}})}function T(n,e,_,M){O.push({path:_,query:{id:n,settingId:e,accountId:M}})}function at(){if(S.value||C.value||k.value||D.value||w.value){s.submit=!0;return}s.submit=!1,p.dispatch("OrganizationStaff/updateStaff",{id:s.staffAccountId,name:s.name,emailId:s.emailId,dob:s.dob,gender:s.gender,designationId:s.designationId,designationName:s.designation})}const it=()=>{p.dispatch("CardOrder/downloadStaffCSVByOrganizationId",{id:s.organizationSettingId})},lt=()=>{p.dispatch("CardOrder/downloadStaffFileByOrganizationId",{id:s.organizationSettingId})},S=f(()=>{if(!s.name)return"Please Enter Name"}),C=f(()=>{let n=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(s.emailId){if(!n.test(s.emailId))return"Please Enter Valid Email!"}else return"Please Enter Email!"}),k=f(()=>{if(!s.designationId)return"Please Select Designation"}),D=f(()=>{if(!s.gender)return"Please Select Gender"}),w=f(()=>{if(!s.dob)return"Please Select Date of Birth"}),V=f(()=>{if(!s.deliveryDate)return"Please select delivery date"}),P=f(()=>{if(!s.deliveryAddress)return"Please enter delivery address"}),E=f(()=>{if(!s.contactNumber)return"Please enter contact no"}),A=f(()=>{if(s.qty<=0)return"Please enter approx quantity"});function dt(n){let e=String.fromCharCode(n.keyCode);if(/^[0-9]+$/.test(e)||n.keyCode===8||n.keyCode===9||n.keyCode===37||n.keyCode===39||n.keyCode>=96&&n.keyCode<=105)return!0;n.preventDefault()}return(n,e)=>{var $,B;const _=u("icon-help"),M=u("icon-search"),rt=u("icon-download"),q=u("router-link"),U=u("icon-card"),ut=u("icon-plus"),ct=u("icon-edit"),vt=u("icon-permission"),pt=u("icon-status"),ft=u("icon-profile"),mt=u("Pagination"),N=u("icon-cross"),gt=u("single-select-id"),z=u("Modal"),bt=u("SingleSelect"),yt=u("icon-success"),_t=u("icon-warning"),ht=u("icon-block");return l(),i("section",Mt,[t("div",Nt,[t("div",zt,[t("div",xt,[t("div",Ot,[t("div",Tt,[t("div",qt,[a(_)]),e[28]||(e[28]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Staff : List"),t("h5",{class:"main-title"},"Staff List")],-1))])]),t("div",Ut,[t("div",$t,[v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.keyword=o),placeholder:"Search here"},null,512),[[g,s.keyword]]),t("div",Bt,[a(M)])]),t("div",Lt,[t("div",Gt,[v(t("select",{name:"",id:"","onUpdate:modelValue":e[1]||(e[1]=o=>s.status=o),onChange:tt},e[29]||(e[29]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[R,s.status]])])]),t("div",Rt,[a(q,{to:"/crm/organization/import-staff?id="+s.organizationId+"&settingId="+s.organizationSettingId,class:"icon tooltip-wrapper"},{default:b(()=>[a(rt,{class:""}),e[30]||(e[30]=t("div",{class:"tooltip"},"Import List",-1))]),_:1},8,["to"])]),t("div",Yt,[t("div",{class:"icon tooltip-wrapper",onClick:e[2]||(e[2]=m(o=>d.value.orderModal=!0,["prevent"]))},[a(U),e[31]||(e[31]=t("div",{class:"tooltip"},"Card/Order",-1))])]),t("div",Ft,[t("div",{class:"icon tooltip-wrapper",onClick:e[3]||(e[3]=m(o=>T(s.organizationId,s.organizationSettingId,"/crm/organization/add-staff",s.accountId),["prevent"]))},[a(ut),e[32]||(e[32]=t("div",{class:"tooltip"},"Add Staff",-1))])])])]),t("div",Ht,[t("div",Kt,[t("table",jt,[e[38]||(e[38]=t("thead",null,[t("th"),t("th",null,"Card"),t("th",null,"Image"),t("th",null,"Name"),t("th",null,"Phone"),t("th",null,"Dob"),t("th",null,"Designation"),t("th",null,"Photo Number"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(l(!0),i(Vt,null,Pt(d.value.branchStaffData,(o,It)=>{var L,G;return l(),i("tr",{key:It},[t("td",null,[t("input",{type:"checkbox",onChange:I=>K(o.id)},null,40,Qt)]),t("td",null,[o.card==0?(l(),i("span",Zt,"Remaining")):r("",!0),o.card==1?(l(),i("span",Jt,"In Process")):r("",!0),o.card==2?(l(),i("span",Wt,"Printed")):r("",!0),o.card==3?(l(),i("span",Xt,"RePrinted")):r("",!0)]),t("td",null,[o.profile?(l(),i("div",te,[t("img",{src:`${o.profile}?width=200`,alt:""},null,8,ee)])):r("",!0)]),t("td",null,c(o.name),1),t("td",null,c((L=o.account)==null?void 0:L.phoneNumber),1),t("td",null,c(ot(o.dob)),1),t("td",null,c((G=o.designation)==null?void 0:G.name),1),t("td",null,c(o.photoNumber),1),t("td",null,[o.status==="ACTIVE"?(l(),i("div",se,c(o.status),1)):r("",!0),o.status==="PENDING"?(l(),i("div",oe,c(o.status),1)):r("",!0),o.status==="DEACTIVE"?(l(),i("div",ne,c(o.status),1)):r("",!0)]),t("td",null,[t("div",ae,[t("div",{class:"icon tooltip-wrapper",onClick:I=>J(o)},[a(ct),e[33]||(e[33]=t("div",{class:"tooltip"},"Edit",-1))],8,ie),a(q,{class:"icon tooltip-wrapper",to:{path:"/crm/organization/final-staff-card",query:{id:o.id,status:"Designation"}}},{default:b(()=>[a(U),e[34]||(e[34]=t("div",{class:"tooltip"},"Staff",-1))]),_:2},1032,["to"]),t("div",{class:"icon tooltip-wrapper",onClick:m(I=>nt(o.accountId,"/crm/staff-permission"),["prevent"])},[a(vt),e[35]||(e[35]=t("div",{class:"tooltip"},"Permission",-1))],8,le),t("div",{class:"icon tooltip-wrapper",onClick:m(I=>Z(o.accountId,o.status),["prevent"])},[a(pt),e[36]||(e[36]=t("div",{class:"tooltip"},"Change Status",-1))],8,de),t("div",{class:"icon tooltip-wrapper",onClick:m(I=>T(o.accountId,s.organizationSettingId,"/crm/organization-staff-profile-layout"),["prevent"])},[a(ft),e[37]||(e[37]=t("div",{class:"tooltip"},"Profile",-1))],8,re)])])])}),128))])])]),(($=d.value.branchStaffData)==null?void 0:$.length)<=0?(l(),i("div",ue,e[39]||(e[39]=[t("div",null,"No records Found!",-1)]))):r("",!0),((B=d.value.branchStaffData)==null?void 0:B.length)>0?(l(),i("div",ce,[a(mt,{currentPage:s.currentPage,totalItem:d.value.totalBranchStaff,itemsPerPage:s.limit,"onUpdate:currentPage":e[4]||(e[4]=o=>X(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):r("",!0)])])]),a(z,{show:d.value.orderModal,"onUpdate:show":e[13]||(e[13]=o=>d.value.orderModal=o),class:"faq-modal",headerClasses:"header-bg"},{header:b(()=>[e[40]||(e[40]=t("div",{class:"title",showHeader:"true"},"Generate Order",-1)),t("div",{class:"close-btn",onClick:e[5]||(e[5]=m(o=>d.value.orderModal=!1,["prevent"]))},[a(N)])]),default:b(()=>[t("div",{class:"modal-footer"},[t("div",{class:"btns"},[t("div",{class:"btn white-btn",onClick:it},"Down. CSV"),t("div",{class:"btn white-btn",onClick:lt},"Dwon. Photo")])]),e[46]||(e[46]=t("h4",{style:{"text-align":"center"}},"OR",-1)),t("form",ve,[t("div",pe,[e[41]||(e[41]=t("div",{class:"title"},"Delivery Date",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=o=>s.deliveryDate=o),placeholder:"Delivery Date",min:s.todayDate},null,8,fe),[[g,s.deliveryDate]]),s.submit&&V.value?(l(),i("div",me,c(V.value),1)):r("",!0)]),t("div",ge,[e[42]||(e[42]=t("div",{class:"title"},"Approx Quantity",-1)),v(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=o=>s.qty=o),placeholder:"Approx Quantity"},null,512),[[g,s.qty]]),s.submit&&A.value?(l(),i("div",be,c(A.value),1)):r("",!0)]),t("div",ye,[e[43]||(e[43]=t("div",{class:"title"},"Delivery Contact No",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>s.contactNumber=o),placeholder:"Delivery Contact Number",onKeydown:e[9]||(e[9]=o=>dt(o)),maxlength:"10"},null,544),[[g,s.contactNumber]]),s.submit&&E.value?(l(),i("div",_e,c(E.value),1)):r("",!0)]),t("div",he,[e[44]||(e[44]=t("div",{class:"title"},"Delivery Address",-1)),v(t("textarea",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>s.deliveryAddress=o),placeholder:"Delivery Address",maxlength:"200",rows:"4"},null,512),[[g,s.deliveryAddress]]),s.submit&&P.value?(l(),i("div",Ie,c(P.value),1)):r("",!0)]),t("div",Se,[e[45]||(e[45]=t("div",{class:"title"},"Delivery Partner",-1)),a(gt,{modelValue:s.deliveryPartnerId,"onUpdate:modelValue":e[11]||(e[11]=o=>s.deliveryPartnerId=o),options:H.value.data},null,8,["modelValue","options"])])]),t("div",Ce,[t("div",ke,[t("div",{class:"btn red-btn",onClick:e[12]||(e[12]=m(o=>d.value.orderModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:j},"Create Order")])])]),_:1},8,["show"]),a(z,{show:d.value.branchStaffModal,"onUpdate:show":e[21]||(e[21]=o=>d.value.branchStaffModal=o),class:"faq-modal",headerClasses:"header-bg"},{header:b(()=>[t("div",De,c(s.editMode?"Update Staff":"Add Staff"),1),t("div",{class:"close-btn",onClick:e[14]||(e[14]=m(o=>d.value.branchStaffModal=!1,["prevent"]))},[a(N)])]),default:b(()=>[t("form",we,[t("div",Ve,[e[47]||(e[47]=t("div",{class:"title"},"Name",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=o=>s.name=o),placeholder:"Enter Name",maxlength:"30"},null,512),[[g,s.name]]),s.submit&&S.value?(l(),i("div",Pe,c(S.value),1)):r("",!0)]),t("div",Ee,[e[48]||(e[48]=t("div",{class:"title"},"Office Email",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=o=>s.emailId=o),placeholder:"Enter E-mail ",maxlength:"50"},null,512),[[g,s.emailId]]),s.submit&&C.value?(l(),i("div",Ae,c(C.value),1)):r("",!0)]),t("div",Me,[t("div",Ne,[e[50]||(e[50]=t("div",{class:"title"},"Gender",-1)),t("div",ze,[v(t("select",{name:"",id:"","onUpdate:modelValue":e[17]||(e[17]=o=>s.gender=o)},e[49]||(e[49]=[t("option",{value:"null",disabled:""},"Select Gender",-1),t("option",{value:"MALE"},"MALE",-1),t("option",{value:"FEMALE"},"FEMALE",-1),t("option",{value:"OTHER"},"OTHER",-1)]),512),[[R,s.gender]])]),s.submit&&D.value?(l(),i("div",xe,c(D.value),1)):r("",!0)]),t("div",Oe,[e[51]||(e[51]=t("div",{class:"title"},"Dob",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[18]||(e[18]=o=>s.dob=o),max:At(Y)().format("YYYY-MM-DD")},null,8,Te),[[g,s.dob]]),s.submit&&w.value?(l(),i("div",qe,c(w.value),1)):r("",!0)])]),t("div",Ue,[e[52]||(e[52]=t("div",{class:"title"},"Designation",-1)),a(bt,{options:F.value.designationData,onSelected:et,modelValue:s.designation,"onUpdate:modelValue":e[19]||(e[19]=o=>s.designation=o),next:!1,placeholder:"Select Designation",onSearch:st},null,8,["options","modelValue"]),s.submit&&k.value?(l(),i("div",$e,c(k.value),1)):r("",!0)])]),t("div",Be,[t("div",Le,[t("div",{class:"btn red-btn",onClick:e[20]||(e[20]=m(o=>d.value.branchStaffModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:at},"Submit")])])]),_:1},8,["show"]),a(z,{show:d.value.statusModal,"onUpdate:show":e[27]||(e[27]=o=>d.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:b(()=>[e[53]||(e[53]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:e[22]||(e[22]=m(o=>d.value.statusModal=!1,["prevent"]))},[a(N)])]),default:b(()=>[t("div",Ge,[t("label",Re,[v(t("input",{type:"radio","onUpdate:modelValue":e[23]||(e[23]=o=>s.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[x,s.changeStatus]]),t("div",Ye,[a(yt),e[54]||(e[54]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",Fe,[v(t("input",{type:"radio","onUpdate:modelValue":e[24]||(e[24]=o=>s.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[x,s.changeStatus]]),t("div",He,[a(_t),e[55]||(e[55]=t("div",{class:"title"},"PENDING",-1))])]),t("label",Ke,[v(t("input",{type:"radio","onUpdate:modelValue":e[25]||(e[25]=o=>s.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[x,s.changeStatus]]),t("div",je,[a(ht),e[56]||(e[56]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",Qe,[t("div",Ze,[t("div",{class:"btn red-btn",onClick:e[26]||(e[26]=m(o=>d.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:W},"Submit")])])]),_:1},8,["show"])])}}};export{Xe as default};
