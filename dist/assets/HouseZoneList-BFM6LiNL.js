import{d as b,u as G,e as J,n as Q,p as W,c as p,a as t,b as d,r as a,j as r,g as M,F as x,y as D,h as u,s as X,o as v,w as S,z as Y,t as h,v as tt,E as ot,i as et}from"./index-QZaKag1-.js";import{_ as st}from"./delete-ClllWuc2.js";const nt={class:"user-activity user-profile"},dt={class:"table-card"},it={class:"table-header"},lt={class:"left"},at={class:"title-row"},rt={class:"icon"},ut={class:"right"},ct={class:"searchbar"},pt={class:"icon"},vt={class:"icons"},mt={class:"icons"},ht={class:"table-body mt-16"},_t={class:"table-outer"},ft={class:"table"},gt=["onUpdate:modelValue","onChange"],bt={class:"option-btns"},kt=["onClick"],Ct=["onClick"],wt=["onClick"],Mt={key:0,class:"table-no-data"},St={class:"title",showHeader:"true"},It={class:"form mb-16"},yt={class:"form-item mb-16 col-10"},Zt={key:0,class:"err-msg"},Ht={class:"modal-footer"},xt={class:"btns"},Dt={class:"form mb-16"},zt={class:"form-item mb-16 col-10"},Pt={class:"i-grid"},$t=["value"],Et={class:"plan-details"},Ut=["src"],Vt={class:"modal-footer"},At={class:"btns"},Nt={class:"modal-footer"},qt={class:"btns"},Ot={class:"title",showHeader:"true"},Bt={class:"i-card"},Ft={class:"plan-details"},Lt=["src"],Kt={__name:"HouseZoneList",setup(Rt){const c=G(),k=W();X();const n=b(()=>c.state.OrganizationSettings),z=b(()=>c.state.IdCardStock),e=J({organizationSettingId:null,organizationId:null,editMode:!1,houseZoneId:null,name:null,priority:null,idCardStockId:null,ids:[]});Q(()=>{k.query.id&&(e.organizationSettingId=k.query.settingId,e.organizationId=k.query.id)});function P(){n.value.addModal=!0,e.editMode=!1,e.name=null}function $(i){n.value.addModal=!0,e.editMode=!0,e.houseZoneId=i.id,e.name=i.name}function E(i){e.houseZoneId=i,n.value.confirmModal=!0}function U(){if(C.value){e.submit=!0;return}e.submit=!1,e.editMode?c.dispatch("OrganizationSettings/updateHouseZone",{id:e.houseZoneId,name:e.name,settingId:e.organizationSettingId}):c.dispatch("OrganizationSettings/addHouseZone",{name:e.name,settingId:e.organizationSettingId})}function V(){c.dispatch("OrganizationSettings/deleteHouseZone",{id:e.houseZoneId,status:"DELETED"})}function A(i){const o=e.ids.findIndex(w=>w===i);o<0?e.ids.push(i):e.ids.splice(o,1)}function N(){e.idCardStockId=null,n.value.productModal=!0,I("")}function q(i){e.productDetailModal=!0,e.product=i}const I=i=>{c.dispatch("IdCardStock/getIdCardStocks",{limit:10,offset:0,keyword:i})},O=()=>{if(e.ids.length>0&&e.idCardStockId){const i=[];e.ids.forEach(o=>{i.push({id:o,idCardsStockId:e.idCardStockId})}),c.dispatch("OrganizationSettings/assignHouseProduct",i)}else c.dispatch("Alert/error",{msg:"Either no house zone or select product!"})},C=b(()=>{if(!e.name)return"Please Enter Name"});return b(()=>{if(!e.priority)return"Please Enter Priority"}),(i,o)=>{var y;const w=a("icon-user"),B=a("icon-search"),F=a("icon-plus"),L=a("icon-asign"),R=a("icon-edit"),T=a("icon-info"),j=a("icon-delete"),_=a("icon-cross"),f=a("Modal"),K=a("router-link");return v(),p("section",nt,[t("div",dt,[t("div",it,[t("div",lt,[t("div",at,[t("div",rt,[d(w)]),o[15]||(o[15]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"House Zone : List"),t("h5",{class:"main-title"},"Our House Zone")],-1))])]),t("div",ut,[t("div",ct,[o[16]||(o[16]=t("input",{type:"text",placeholder:"Search here"},null,-1)),t("div",pt,[d(B)])]),t("div",vt,[t("div",{class:"icon tooltip-wrapper",onClick:r(P,["prevent"])},[d(F),o[17]||(o[17]=t("div",{class:"tooltip"},"Add House Zone",-1))])]),t("div",mt,[t("div",{class:"icon tooltip-wrapper",onClick:o[0]||(o[0]=r(s=>N(),["prevent"]))},[d(L),o[18]||(o[18]=t("div",{class:"tooltip"},"Assign Product",-1))])])])]),t("div",ht,[t("div",_t,[t("table",ft,[o[22]||(o[22]=t("thead",null,[t("th"),t("th",null,"House Zone"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(v(!0),p(x,null,D(n.value.houseZone,(s,m)=>(v(),p("tr",{key:m},[t("td",null,[S(t("input",{type:"checkbox","onUpdate:modelValue":l=>s.checked=l,onChange:l=>A(s.id)},null,40,gt),[[Y,s.checked]])]),t("td",null,h(s.name),1),t("td",null,[t("div",bt,[t("div",{class:"icon tooltip-wrapper",onClick:l=>$(s)},[d(R),o[19]||(o[19]=t("div",{class:"tooltip"},"Edit",-1))],8,kt),s.idCardsStock?(v(),p("div",{key:0,class:"icon tooltip-wrapper",onClick:l=>q(s)},[d(T),o[20]||(o[20]=t("div",{class:"tooltip"},"View Product",-1))],8,Ct)):M("",!0),t("div",{class:"icon tooltip-wrapper",onClick:r(l=>E(s.id),["prevent"])},[d(j),o[21]||(o[21]=t("div",{class:"tooltip"},"Delete",-1))],8,wt)])])]))),128))])])]),((y=n.value.houseZone)==null?void 0:y.length)<=0?(v(),p("div",Mt,o[23]||(o[23]=[t("div",null,"No records Found!",-1)]))):M("",!0)])]),d(f,{show:n.value.addModal,"onUpdate:show":o[4]||(o[4]=s=>n.value.addModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:u(()=>[t("div",St,h(e.editMode?"Update House Zone":"Add House Zone"),1),t("div",{class:"close-btn",onClick:o[1]||(o[1]=r(s=>n.value.addModal=!1,["prevent"]))},[d(_)])]),default:u(()=>[t("form",It,[t("div",yt,[o[24]||(o[24]=t("div",{class:"title"},"Name",-1)),S(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>e.name=s),placeholder:"Enter Name",maxlength:"50"},null,512),[[tt,e.name]]),e.submit&&C.value?(v(),p("div",Zt,h(C.value),1)):M("",!0)])]),t("div",Ht,[t("div",xt,[t("div",{class:"btn red-btn",onClick:o[3]||(o[3]=r(s=>n.value.addModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:U},"Submit")])])]),_:1},8,["show"]),d(f,{show:n.value.productModal,"onUpdate:show":o[9]||(o[9]=s=>n.value.productModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:u(()=>[o[25]||(o[25]=t("div",{class:"title",showHeader:"true"},"Select product",-1)),t("div",{class:"close-btn",onClick:o[5]||(o[5]=r(s=>n.value.productModal=!1,["prevent"]))},[d(_)])]),default:u(()=>[t("div",null,[t("form",Dt,[t("div",zt,[o[26]||(o[26]=t("div",{class:"title"},"Search Product",-1)),t("input",{type:"text",placeholder:"Search Product",onKeydown:o[6]||(o[6]=s=>I(s.target.value))},null,32)])]),t("div",Pt,[(v(!0),p(x,null,D(z.value.data,(s,m)=>{var l;return v(),p("label",{class:"i-card",key:m},[S(t("input",{name:"plan",class:"radio",type:"radio","onUpdate:modelValue":o[7]||(o[7]=g=>e.idCardStockId=g),value:s.id},null,8,$t),[[ot,e.idCardStockId]]),t("span",Et,[t("img",{src:`${(l=s.productImage[0])==null?void 0:l.file}?width=200`,alt:""},null,8,Ut),t("span",null,h(s.title),1)])])}),128))])]),t("div",Vt,[t("div",At,[t("div",{class:"btn red-btn",onClick:o[8]||(o[8]=r(s=>n.value.productModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:O},"Assign Product")])])]),_:1},8,["show"]),d(f,{show:n.value.confirmModal,"onUpdate:show":o[12]||(o[12]=s=>n.value.confirmModal=s),class:"confirm-modal",headerClasses:"header-bg"},{header:u(()=>[o[27]||(o[27]=t("div",{class:"title",showHeader:"true"},"Delete",-1)),t("div",{class:"close-btn",onClick:o[10]||(o[10]=r(s=>n.value.confirmModal=!1,["prevent"]))},[d(_)])]),default:u(()=>[o[28]||(o[28]=t("div",{class:"delete-icon"},[t("img",{src:st,alt:""})],-1)),o[29]||(o[29]=t("h4",{class:"text-gree"},"Are you sure want to Delete?",-1)),t("div",Nt,[t("div",qt,[t("div",{class:"btn red-btn",onClick:o[11]||(o[11]=r(s=>n.value.confirmModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:V},"Delete")])])]),_:1},8,["show"]),d(f,{show:e.productDetailModal,"onUpdate:show":o[14]||(o[14]=s=>e.productDetailModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:u(()=>{var s;return[t("div",Ot," Product For ("+h((s=e.product)==null?void 0:s.name)+") ",1),t("div",{class:"close-btn",onClick:o[13]||(o[13]=r(m=>e.productDetailModal=!1,["prevent"]))},[d(_)])]}),default:u(()=>{var s,m,l,g,Z,H;return[t("div",null,[t("label",Bt,[t("span",Ft,[t("img",{src:`${(l=(m=(s=e.product)==null?void 0:s.idCardsStock)==null?void 0:m.productImage[0])==null?void 0:l.file}?width=200`,alt:"",style:{height:"auto",width:"100%"}},null,8,Lt),t("span",null,h((Z=(g=e.product)==null?void 0:g.idCardsStock)==null?void 0:Z.title),1)])]),d(K,{class:"btn white-btn",to:{path:"/crm/editor",query:{id:(H=e==null?void 0:e.product)==null?void 0:H.id,from:"House",type:"Student",settingId:e==null?void 0:e.organizationSettingId}}},{default:u(()=>o[30]||(o[30]=[et(" Editor ")])),_:1},8,["to"])])]}),_:1},8,["show"])])}}};export{Kt as default};
