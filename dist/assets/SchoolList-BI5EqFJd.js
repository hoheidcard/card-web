import{d as X,u as Y,e as Z,n as tt,C as st,c as l,a as t,b as e,r as a,w as _,v as ot,q as nt,g as p,F as et,y as at,h as b,i as it,t as c,j as u,E as C,s as lt,p as dt,o as d}from"./index-QZaKag1-.js";const rt={class:"faq-page"},ct={class:"table-card card"},ut={class:"table-header"},pt={class:"left"},vt={class:"title-row"},gt={class:"icon"},_t={class:"right"},ht={class:"searchbar"},mt={class:"icon"},yt={class:"searchbar"},ft={class:"select-dropdown"},bt={class:"table-body p-16"},Ct={class:"table-outer"},kt={class:"table"},St={key:0,class:"zoom-image"},It=["src"],wt={key:0,class:"badge success-badge"},Dt={key:1,class:"badge warning-badge"},Et={key:2,class:"badge danger-badge"},Vt={class:"option-btns"},zt=["onClick"],Tt=["onClick"],Mt=["onClick"],Nt=["onClick"],Pt=["onClick"],At=["onClick"],$t=["onClick"],Ot={key:0,class:"table-no-data"},Ut={key:1,class:"table-footer"},xt={class:"status-row"},qt={for:"approve",class:"data"},Bt={class:"data-inner approve-card"},Lt={for:"pending",class:"data"},Gt={class:"data-inner pending-card"},Ft={for:"block",class:"data"},Rt={class:"data-inner block-card"},Ht={class:"modal-footer"},jt={class:"btns"},Kt={__name:"SchoolList",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(z){const m=z,y=Y();dt();const k=lt(),i=X(()=>y.state.Dashboard),n=Z({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"SCHOOL",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,changeStatus:null});tt(()=>{h()}),st(()=>n.keyword,()=>{clearTimeout(n.typingTimer),n.typingTimer=setTimeout(()=>{n.limit=10,n.offset=0,n.currentPage=1,h()},n.typingDelay)});function h(){y.dispatch("Dashboard/getOrganization",{limit:n.limit,offset:n.offset,keyword:n.keyword,status:n.status,roles:n.roles,fromDate:m.fromDate,toDate:m.toDate,all:m.all})}function T(r,s){n.changeStatus=s,n.organizationId=r,i.value.statusModal=!0}function M(){y.dispatch("Organization/updateOrganizationStatus",{id:n.organizationId,status:n.changeStatus}),i.value.statusModal=!1}const N=r=>{n.currentPage=r,n.offset=n.limit*(r-1),h()};function P(){h()}function A(r,s){k.push({path:s,query:{id:r}})}function g(r,s,f){k.push({path:f,query:{id:r,settingId:s}})}return(r,s)=>{var S,I;const f=a("icon-school"),$=a("icon-search"),O=a("router-link"),U=a("icon-edit"),x=a("icon-status"),q=a("icon-menu"),B=a("icon-library-list"),L=a("icon-user-list"),G=a("icon-student-list"),F=a("icon-setting"),R=a("Pagination"),H=a("icon-cross"),j=a("icon-success"),J=a("icon-warning"),K=a("icon-block"),Q=a("Modal");return d(),l("section",rt,[t("div",ct,[t("div",ut,[t("div",pt,[t("div",vt,[t("div",gt,[e(f)]),s[9]||(s[9]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"School : List"),t("h5",{class:"main-title"},"Our School")],-1))])]),t("div",_t,[t("div",ht,[_(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>n.keyword=o),placeholder:"Search here"},null,512),[[ot,n.keyword]]),t("div",mt,[e($)])]),t("div",yt,[t("div",ft,[_(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>n.status=o),onChange:P},s[10]||(s[10]=[t("option",{value:"ACTIVE"},"ACTIVE",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[nt,n.status]])])])])]),t("div",bt,[t("div",Ct,[t("table",kt,[s[18]||(s[18]=t("thead",null,[t("th"),t("th",null,"Name"),t("th",null,"Contact No"),t("th",null,"Created By"),t("th",null,"State/City"),t("th",null,"Type"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(d(!0),l(et,null,at(i.value.organizationData,(o,W)=>{var w,D,E,V;return d(),l("tr",{key:W},[t("td",null,[o.image?(d(),l("div",St,[t("img",{src:`${o.image}?width=200`,alt:""},null,8,It)])):p("",!0)]),t("td",null,[e(O,{to:`/crm/organization/setting/class-list?id=${o.id}&settingId=${o.settingId}`,class:"profile-link hover-color"},{default:b(()=>[it(c(o.name),1)]),_:2},1032,["to"])]),t("td",null,c(o.contactNo),1),t("td",null,c(((D=(w=o.updated)==null?void 0:w.staffDetail)==null?void 0:D.name)||((V=(E=o.updated)==null?void 0:E.partnerDetail[0])==null?void 0:V.firmName)),1),t("td",null,c(o.state)+"/"+c(o.city),1),t("td",null,c(o.type),1),t("td",null,[o.status==="ACTIVE"?(d(),l("div",wt,c(o.status),1)):p("",!0),o.status==="PENDING"?(d(),l("div",Dt,c(o.status),1)):p("",!0),o.status==="DEACTIVE"?(d(),l("div",Et,c(o.status),1)):p("",!0)]),t("td",null,[t("div",Vt,[t("div",{class:"icon tooltip-wrapper",onClick:v=>A(o.id,"/crm/edit-organization")},[e(U),s[11]||(s[11]=t("div",{class:"tooltip"},"Edit",-1))],8,zt),t("div",{class:"icon tooltip-wrapper",onClick:u(v=>T(o.id,o.status),["prevent"])},[e(x),s[12]||(s[12]=t("div",{class:"tooltip"},"Change Status",-1))],8,Tt),o.setting.type==="MULTI"?(d(),l("div",{key:0,class:"icon tooltip-wrapper",onClick:u(v=>g(o.accountId,o.settingId,"/crm/organization/my-branch"),["prevent"])},[e(q),s[13]||(s[13]=t("div",{class:"tooltip"},"My Branch",-1))],8,Mt)):p("",!0),t("div",{class:"icon tooltip-wrapper",onClick:u(v=>g(o.id,o.settingId,"/crm/organization/library"),["prevent"])},[e(B),s[14]||(s[14]=t("div",{class:"tooltip"},"Library",-1))],8,Nt),t("div",{class:"icon tooltip-wrapper",onClick:u(v=>g(o.id,o.settingId,"/crm/organization/my-staff"),["prevent"])},[e(L),s[15]||(s[15]=t("div",{class:"tooltip"},"My Staff",-1))],8,Pt),t("div",{class:"icon tooltip-wrapper",onClick:u(v=>g(o.id,o.settingId,"/crm/organization/my-student"),["prevent"])},[e(G),s[16]||(s[16]=t("div",{class:"tooltip"},"My Student",-1))],8,At),t("div",{class:"icon tooltip-wrapper",onClick:u(v=>g(o.id,o.settingId,"/crm/organization/setting/class-list"),["prevent"])},[e(F),s[17]||(s[17]=t("div",{class:"tooltip"},"Setttngs",-1))],8,$t)])])])}),128))])])]),((S=i.value.organizationData)==null?void 0:S.length)<=0?(d(),l("div",Ot,s[19]||(s[19]=[t("div",null,"No records Found!",-1)]))):p("",!0),((I=i.value.organizationData)==null?void 0:I.length)>0?(d(),l("div",Ut,[e(R,{currentPage:n.currentPage,totalItem:i.value.totalOrganization,itemsPerPage:n.limit,"onUpdate:currentPage":s[2]||(s[2]=o=>N(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):p("",!0)])]),e(Q,{show:i.value.statusModal,"onUpdate:show":s[8]||(s[8]=o=>i.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:b(()=>[s[20]||(s[20]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[3]||(s[3]=u(o=>i.value.statusModal=!1,["prevent"]))},[e(H)])]),default:b(()=>[t("div",xt,[t("label",qt,[_(t("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=o=>n.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,n.changeStatus]]),t("div",Bt,[e(j),s[21]||(s[21]=t("div",{class:"title"},"ACTIVE",-1))])]),t("label",Lt,[_(t("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>n.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[C,n.changeStatus]]),t("div",Gt,[e(J),s[22]||(s[22]=t("div",{class:"title"},"PENDING",-1))])]),t("label",Ft,[_(t("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>n.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,n.changeStatus]]),t("div",Rt,[e(K),s[23]||(s[23]=t("div",{class:"title"},"DEACTIVE",-1))])])]),t("div",Ht,[t("div",jt,[t("div",{class:"btn red-btn",onClick:s[7]||(s[7]=u(o=>i.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:M},"Submit")])])]),_:1},8,["show"])])}}};export{Kt as default};
