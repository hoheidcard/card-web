import{d as x,u as B,e as q,c as a,a as e,b as r,r as v,F as b,y as I,h as w,o as d,w as k,t as c,O as F,j as S,q as h,D as V}from"./index-QZaKag1-.js";import{_ as H}from"./delete-ClllWuc2.js";const N={class:"dr-schedule"},G={class:"table-card mb-10"},J={class:"table-header"},K={class:"left"},Q={class:"title-row"},R={class:"icon"},W={class:"schedule-question"},X={class:"switch"},Y=["checked","onChange"],Z={class:"schedule-answer"},ee={class:"icons schedule-plus"},te=["onClick"],se={class:"cards"},le={class:"main-title"},ie={class:""},oe={class:""},de={class:""},ne={class:"icons flex align-center gap-10"},ae={class:"hed-icon icon tooltip-wrapper"},ue={class:"hed-icon icon tooltip-wrapper"},re={class:"time-row row"},ce={class:"form-item col-6 mb-16"},me={class:"form-item col-6 mb-16"},ve={class:"title",showHeader:"true"},fe={class:"single-card"},_e={class:"form-item mb-10 col-5"},pe={class:"select-dropdown"},be=["value"],Ie={class:"form-item mb-10 col-5"},Te={class:"select-dropdown"},we=["value"],ke={class:"form-item mb-10 col-5"},Se={class:"select-dropdown"},Ve=["value"],he={class:"time-row row"},Me={class:"form-item col-6 mb-16"},Ce={class:"form-item col-6 mb-16"},ge={type:"submit",class:"btn white-btn w-100"},De={class:"btns"},Le={__name:"StaffTimeTable",setup(je){const _=B(),n=x(()=>_.state.OrganizationStaff),s=q({submit:!1,limit:10,offset:0,keyword:"",status:!0,org:null,confirmModal:!1,editMode:!1,addModal:!1,periodStatus:!0,offline:!1,online:!1,redioStatus:null,clinicVisitStatus:!1,time_start:"00:00:00",time_end:"00:00:00",staffTimeTableId:null,subjectId:null,classListId:null,classDivId:null,periodId:null,scheduleId:null,edit_time_start:null,edit_time_end:null});function y(o,t){s.periodId=o,s.staffTimeTableId=t,s.confirmModal=!0}function U(){_.dispatch("OrganizationStaff/deletePeriod",{scheduleId:s.staffTimeTableId,id:s.periodId}),s.confirmModal=!1}function L(){const o={time_start:s.time_start,time_end:s.time_end,staffTimeTableId:s.staffTimeTableId,subjectId:s.subjectId,classListId:s.classListId,classDivId:s.classDivId};s.editMode?(_.dispatch("OrganizationStaff/updatePeriod",{periodId:s.periodId,data:o}),n.value.addModal=!1):(_.dispatch("OrganizationStaff/addTimeTable",{data:o}),n.value.addModal=!1)}function P(o){s.staffTimeTableId=o.id,s.editMode=!1,s.edit_time_start=null,s.edit_time_end=null,n.value.addModal=!0}function $(o){s.staffTimeTableId=o.staffTimeTableId,s.periodId=o.id,s.subjectId=o.subjectId,s.classListId=o.classListId,s.classDivId=o.classDivId,s.time_end=o.time_end,s.time_start=o.time_start,s.editMode=!0,n.value.addModal=!0}function A(o,t,T){n.value.staffTimeTable[o].status=!T,_.dispatch("OrganizationStaff/scheduleStatus",{id:t,status:!T})}return(o,t)=>{const T=v("icon-user"),O=v("icon-plus"),z=v("icon-edit"),E=v("icon-delete"),f=v("time-picker"),M=v("icon-cross"),C=v("Modal");return d(),a("section",N,[e("div",G,[e("div",J,[e("div",K,[e("div",Q,[e("div",R,[r(T)]),t[12]||(t[12]=e("div",{class:"titles"},[e("div",{class:"sub-title"},"Time Table : List"),e("h5",{class:"main-title"},"Time Table")],-1))])]),t[13]||(t[13]=e("div",{class:"right"},null,-1))])]),(d(!0),a(b,null,I(n.value.staffTimeTable,(l,m)=>(d(),a("div",{key:m,class:"schedule-item"},[e("h2",W,[e("span",null,c(l.name),1),e("label",X,[e("input",{type:"checkbox",checked:l.status,onChange:i=>A(m,l.id,l.status)},null,40,Y),t[14]||(t[14]=e("span",{class:"slider"},null,-1))])]),k(e("div",Z,[e("div",ee,[e("div",{class:"icon tooltip-wrapper",onClick:i=>P(l)},[r(O),t[15]||(t[15]=e("div",{class:"tooltip"},"Add Schedule",-1))],8,te)]),e("div",se,[(d(!0),a(b,null,I(l.period,(i,u)=>{var g,D,j;return d(),a("div",{class:"single-card",key:u},[e("div",le,[e("div",null,[e("div",ie,"Subject : "+c((g=i.subject)==null?void 0:g.name),1),e("div",oe,"Class : "+c((D=i.classList)==null?void 0:D.name),1),e("div",de,"Section : "+c((j=i.classDiv)==null?void 0:j.name),1)]),e("div",ne,[e("div",ae,[r(z,{onClick:p=>$(i)},null,8,["onClick"]),t[16]||(t[16]=e("div",{class:"tooltip"},"Edit Schedule",-1))]),e("div",ue,[r(E,{onClick:p=>y(i.id,l.id)},null,8,["onClick"]),t[17]||(t[17]=e("div",{class:"tooltip"},"Delete Schedule",-1))])])]),e("div",null,[e("div",re,[e("div",ce,[t[18]||(t[18]=e("div",{class:"title"},"Start Time",-1)),r(f,{modelValue:i.time_start,"onUpdate:modelValue":p=>i.time_start=p,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),e("div",me,[t[19]||(t[19]=e("div",{class:"title"},"End Time",-1)),r(f,{modelValue:i.time_end,"onUpdate:modelValue":p=>i.time_end=p,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])])])])}),128))])],512),[[F,l.status]])]))),128)),r(C,{show:n.value.addModal,"onUpdate:show":t[8]||(t[8]=l=>n.value.addModal=l),class:"add-schdule",headerClasses:"header-bg"},{header:w(()=>[e("div",ve,c(s.editMode?"Update Period":"Add Period"),1),e("div",{class:"close-btn",onClick:t[0]||(t[0]=S(l=>n.value.addModal=!1,["prevent"]))},[r(M)])]),default:w(()=>[e("form",{action:"",class:"form",onSubmit:S(L,["prevent"])},[e("div",fe,[e("div",_e,[t[21]||(t[21]=e("div",{class:"title"},"Subject",-1)),e("div",pe,[k(e("select",{name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=l=>s.subjectId=l)},[t[20]||(t[20]=e("option",{value:null},"Select",-1)),(d(!0),a(b,null,I(n.value.staffSubject,(l,m)=>{var i,u;return d(),a("option",{key:m,value:(i=l.subject)==null?void 0:i.id},c((u=l.subject)==null?void 0:u.name),9,be)}),128))],512),[[h,s.subjectId]])])]),e("div",Ie,[t[23]||(t[23]=e("div",{class:"title"},"Class",-1)),e("div",Te,[k(e("select",{name:"",id:"","onUpdate:modelValue":t[2]||(t[2]=l=>s.classListId=l)},[t[22]||(t[22]=e("option",{value:null},"Select",-1)),(d(!0),a(b,null,I(n.value.staffClass,(l,m)=>{var i,u;return d(),a("option",{key:m,value:(i=l.classList)==null?void 0:i.id},c((u=l.classList)==null?void 0:u.name),9,we)}),128))],512),[[h,s.classListId]])])]),e("div",ke,[t[25]||(t[25]=e("div",{class:"title"},"Section",-1)),e("div",Se,[k(e("select",{name:"",id:"","onUpdate:modelValue":t[3]||(t[3]=l=>s.classDivId=l)},[t[24]||(t[24]=e("option",{value:null},"Select",-1)),(d(!0),a(b,null,I(n.value.staffDivision,(l,m)=>{var i,u;return d(),a("option",{key:m,value:(i=l.classDiv)==null?void 0:i.id},c((u=l.classDiv)==null?void 0:u.name),9,Ve)}),128))],512),[[h,s.classDivId]])])]),e("div",he,[e("div",Me,[t[26]||(t[26]=e("div",{class:"title"},"Start Time",-1)),s.edit_time_start?(d(),V(f,{key:0,modelValue:s.edit_time_start,"onUpdate:modelValue":t[4]||(t[4]=l=>s.edit_time_start=l)},null,8,["modelValue"])):(d(),V(f,{key:1,modelValue:s.time_start,"onUpdate:modelValue":t[5]||(t[5]=l=>s.time_start=l)},null,8,["modelValue"]))]),e("div",Ce,[t[27]||(t[27]=e("div",{class:"title"},"End Time",-1)),s.edit_time_end?(d(),V(f,{key:0,modelValue:s.edit_time_end,"onUpdate:modelValue":t[6]||(t[6]=l=>s.edit_time_end=l)},null,8,["modelValue"])):(d(),V(f,{key:1,modelValue:s.time_end,"onUpdate:modelValue":t[7]||(t[7]=l=>s.time_end=l)},null,8,["modelValue"]))])])]),e("button",ge,c(s.editMode?"Update":"Add"),1)],32)]),_:1},8,["show"]),r(C,{show:s.confirmModal,"onUpdate:show":t[11]||(t[11]=l=>s.confirmModal=l),class:"confirm-modal",headerClasses:"header-bg"},{header:w(()=>[t[28]||(t[28]=e("div",{class:"title",showHeader:"true"},"Delete",-1)),e("div",{class:"close-btn",onClick:t[9]||(t[9]=S(l=>s.confirmModal=!1,["prevent"]))},[r(M)])]),default:w(()=>[t[29]||(t[29]=e("div",{class:"delete-icon"},[e("img",{src:H,alt:""})],-1)),t[30]||(t[30]=e("h4",null,"Are you sure want to Delete ?",-1)),e("div",De,[e("button",{class:"btn red-btn cancel-btn",onClick:t[10]||(t[10]=S(l=>s.confirmModal=!1,["prevent"]))}," Cancel "),e("button",{class:"btn confirm-btn",onClick:U}," Confirm ")])]),_:1},8,["show"])])}}};export{Le as default};
