import{d as p,u as rt,e as ut,n as ct,C as mt,c as a,a as e,b as r,r as c,w as m,v as f,q as $,j as g,g as u,F as pt,y as vt,h as I,p as ft,s as gt,o as l,t as i,x as bt,m as L,E as C}from"./index-QZaKag1-.js";const ht={class:"faq-page"},_t={class:"container"},yt={class:"table-card card"},St={class:"table-header"},wt={class:"left"},It={class:"title-row"},kt={class:"icon"},Et={class:"right"},Ct={class:"searchbar"},Vt={class:"icon"},Mt={class:"searchbar"},Pt={class:"select-dropdown"},Dt={class:"icons"},Nt={class:"table-body p-16"},At={class:"table-outer"},Tt={class:"table"},xt={key:0,class:"badge success-badge"},Ut={key:1,class:"badge warning-badge"},$t={key:2,class:"badge danger-badge"},Lt={class:"option-btns"},Yt=["onClick"],Gt=["onClick"],zt=["onClick"],Bt={key:0,class:"table-no-data"},Ft={key:1,class:"table-footer"},Rt={class:"title",showHeader:"true"},qt={class:"form mb-16"},Ht={key:0,class:"form-item mb-16"},Kt={class:"form-item mb-16"},Ot={key:0,class:"err-msg"},Zt={class:"form-item mb-16"},jt={key:0,class:"err-msg"},Jt={key:1,class:"form-item mb-16"},Qt={key:0,class:"err-msg"},Wt={class:"row"},Xt={class:"form-item mb-16 col-5"},te={class:"select-dropdown"},ee={key:0,class:"err-msg"},se={class:"form-item mb-16 col-5"},oe=["max"],ne={key:0,class:"err-msg"},ae={class:"form-item mb-16"},le={key:0,class:"err-msg"},ie={key:2,class:"form-item mb-16"},de={key:0,class:"err-msg"},re={class:"modal-footer"},ue={class:"btns"},ce={class:"status-row"},me={for:"approve",class:"data"},pe={class:"data-inner approve-card"},ve={for:"pending",class:"data"},fe={class:"data-inner pending-card"},ge={for:"block",class:"data"},be={class:"data-inner block-card"},he={class:"modal-footer"},_e={class:"btns"},we={__name:"StaffList",setup(ye){const v=rt();ft();const Y=gt(),d=p(()=>v.state.Staff),G=p(()=>v.state.Designation),t=ut({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,staffId:null,staffAccountId:null,changeStatus:null,name:null,emailId:null,phoneNumber:null,password:null,gender:"MALE",dob:null,designation:"",designationId:null,searchKey:null});ct(()=>{h(),z()}),mt(()=>t.keyword,()=>{clearTimeout(t.typingTimer),t.typingTimer=setTimeout(()=>{t.limit=10,t.offset=0,t.currentPage=1,h()},t.typingDelay)});function h(){v.dispatch("Staff/getMyStaff",{limit:t.limit,offset:t.offset,keyword:t.keyword,status:t.status})}function z(){v.dispatch("Designation/getMyDesignation")}function B(){d.value.staffModal=!0,t.editMode=!1,t.name=null,t.emailId=null,t.dob=null,t.gender="MALE",t.designationId=null,t.designation=""}function F(n){var s;d.value.staffModal=!0,t.editMode=!0,t.staffId=n.id,t.staffAccountId=n.accountId,t.name=n.name,t.emailId=n.emailId,t.dob=n.dob,t.gender=n.gender,t.designationId=n.designationId,t.designation=(s=n.designation)==null?void 0:s.name}function R(n,s){t.changeStatus=s,t.staffAccountId=n,d.value.statusModal=!0}function q(){if(t.editMode){if(b.value||_.value||y.value||S.value||w.value||b.value){t.submit=!0;return}t.submit=!1,v.dispatch("Staff/updateStaff",{id:t.staffAccountId,name:t.name,emailId:t.emailId,gender:t.gender,dob:t.dob,designationId:t.designationId,designationName:t.designation})}else{if(b.value||_.value||y.value||k.value||S.value||w.value||b.value||E.value){t.submit=!0;return}t.submit=!1,v.dispatch("Staff/addStaff",{phoneNumber:t.phoneNumber,password:t.password,name:t.name,emailId:t.emailId,gender:t.gender,dob:t.dob,designationId:t.designationId,designationName:t.designation})}}function H(){v.dispatch("Staff/updateStaffStatus",{id:t.staffAccountId,status:t.changeStatus})}const K=n=>{t.currentPage=n,t.offset=t.limit*(n-1),h()};function O(){h()}const Z=n=>{t.designationId=n.id},j=n=>{t.searchKey=n};function J(n,s){Y.push({path:s,query:{id:n}})}function Q(n){return n?L(n).format("DD.MM.YYYY"):"-"}const _=p(()=>{if(!t.name)return"Please Enter Name"}),y=p(()=>{let n=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(t.emailId){if(!n.test(t.emailId))return"Please Enter Valid Email!"}else return"Please Enter Email!"}),k=p(()=>{let n=/^[6-9][0-9]{9}$/;if(t.phoneNumber){if(!n.test(t.phoneNumber))return"Please Enter Valid Phone Number!"}else return"Please Enter Phone Number!"}),b=p(()=>{if(!t.designationId)return"Please Select Designation"}),S=p(()=>{if(!t.gender)return"Please Select Gender"}),w=p(()=>{if(!t.dob)return"Please Select Date of Birth"}),E=p(()=>{let n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$@!%&*?])[A-Za-z\d#$@!%&*?]{8,16}$/;if(t.password){if(!n.test(t.password))return"password must have at least one uppercase and lowercase character,one number and special character!"}else return"Please Enter Password"});function V(n){let s=String.fromCharCode(n.keyCode);if(/^[0-9]+$/.test(s)||n.keyCode===8||n.keyCode===9||n.keyCode===37||n.keyCode===39||n.keyCode>=96&&n.keyCode<=105)return!0;n.preventDefault()}return(n,s)=>{var D,N;const W=c("icon-help"),X=c("icon-search"),tt=c("icon-plus"),et=c("icon-edit"),st=c("icon-permission"),ot=c("icon-setting"),nt=c("Pagination"),M=c("icon-cross"),at=c("SingleSelect"),P=c("Modal"),lt=c("icon-success"),it=c("icon-warning"),dt=c("icon-block");return l(),a("section",ht,[e("div",_t,[e("div",yt,[e("div",St,[e("div",wt,[e("div",It,[e("div",kt,[r(W)]),s[22]||(s[22]=e("div",{class:"titles"},[e("div",{class:"sub-title"},"Staff : List"),e("h5",{class:"main-title"},"Our Staff")],-1))])]),e("div",Et,[e("div",Ct,[m(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>t.keyword=o),placeholder:"Search here"},null,512),[[f,t.keyword]]),e("div",Vt,[r(X)])]),e("div",Mt,[e("div",Pt,[m(e("select",{name:"",id:"","onUpdate:modelValue":s[1]||(s[1]=o=>t.status=o),onChange:O},s[23]||(s[23]=[e("option",{value:"ACTIVE"},"ACTIVE",-1),e("option",{value:"PENDING"},"PENDING",-1),e("option",{value:"DEACTIVE"},"DEACTIVE",-1)]),544),[[$,t.status]])])]),e("div",Dt,[e("div",{class:"icon tooltip-wrapper",onClick:g(B,["prevent"])},[r(tt),s[24]||(s[24]=e("div",{class:"tooltip"},"Add Staff",-1))])])])]),e("div",Nt,[e("div",At,[e("table",Tt,[s[28]||(s[28]=e("thead",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Phone"),e("th",null,"Dob"),e("th",null,"Designation"),e("th",null,"Photo Number"),e("th",null,"Status"),e("th",{class:"text-center"},"Action")],-1)),e("tbody",null,[(l(!0),a(pt,null,vt(d.value.staffData,(o,A)=>{var T,x;return l(),a("tr",{key:A},[e("td",null,i(A+1),1),e("td",null,i(o.name),1),e("td",null,i((T=o.account)==null?void 0:T.phoneNumber),1),e("td",null,i(Q(o.dob)),1),e("td",null,i((x=o.designation)==null?void 0:x.name),1),e("td",null,i(o.photoNumber),1),e("td",null,[o.status==="ACTIVE"?(l(),a("div",xt,i(o.status),1)):u("",!0),o.status==="PENDING"?(l(),a("div",Ut,i(o.status),1)):u("",!0),o.status==="DEACTIVE"?(l(),a("div",$t,i(o.status),1)):u("",!0)]),e("td",null,[e("div",Lt,[e("div",{class:"icon tooltip-wrapper",onClick:U=>F(o)},[r(et),s[25]||(s[25]=e("div",{class:"tooltip"},"Edit",-1))],8,Yt),e("div",{class:"icon tooltip-wrapper",onClick:g(U=>J(o.accountId,"/crm/staff-permission"),["prevent"])},[r(st),s[26]||(s[26]=e("div",{class:"tooltip"},"Permission",-1))],8,Gt),e("div",{class:"icon tooltip-wrapper",onClick:g(U=>R(o.accountId,o.status),["prevent"])},[r(ot),s[27]||(s[27]=e("div",{class:"tooltip"},"Change Status",-1))],8,zt)])])])}),128))])])]),((D=d.value.staffData)==null?void 0:D.length)<=0?(l(),a("div",Bt,s[29]||(s[29]=[e("div",null,"No records Found!",-1)]))):u("",!0),((N=d.value.staffData)==null?void 0:N.length)>0?(l(),a("div",Ft,[r(nt,{currentPage:t.currentPage,totalItem:d.value.totalStaff,itemsPerPage:t.limit,"onUpdate:currentPage":s[2]||(s[2]=o=>K(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):u("",!0)])])]),r(P,{show:d.value.staffModal,"onUpdate:show":s[15]||(s[15]=o=>d.value.staffModal=o),class:"faq-modal",headerClasses:"header-bg"},{header:I(()=>[e("div",Rt,i(t.editMode?"Update Staff":"Add Staff"),1),e("div",{class:"close-btn",onClick:s[3]||(s[3]=g(o=>d.value.staffModal=!1,["prevent"]))},[r(M)])]),default:I(()=>[e("form",qt,[t.editMode?u("",!0):(l(),a("div",Ht,[s[30]||(s[30]=e("div",{class:"title"},"Login Id",-1)),m(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=o=>t.phoneNumber=o),placeholder:"Enter Phone Number",onKeydown:s[5]||(s[5]=o=>V(o)),maxlength:"10",disabled:""},null,544),[[f,t.phoneNumber]])])),e("div",Kt,[s[31]||(s[31]=e("div",{class:"title"},"Name",-1)),m(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=o=>t.name=o),placeholder:"Enter Name",maxlength:"30"},null,512),[[f,t.name]]),t.submit&&_.value?(l(),a("div",Ot,i(_.value),1)):u("",!0)]),e("div",Zt,[s[32]||(s[32]=e("div",{class:"title"},"Email",-1)),m(e("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=o=>t.emailId=o),placeholder:"Enter E-mail ",maxlength:"50"},null,512),[[f,t.emailId]]),t.submit&&y.value?(l(),a("div",jt,i(y.value),1)):u("",!0)]),t.editMode?u("",!0):(l(),a("div",Jt,[s[33]||(s[33]=e("div",{class:"title"},"Phone",-1)),m(e("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=o=>t.phoneNumber=o),placeholder:"Enter Phone Number",onKeydown:s[9]||(s[9]=o=>V(o)),maxlength:"10"},null,544),[[f,t.phoneNumber]]),t.submit&&k.value?(l(),a("div",Qt,i(k.value),1)):u("",!0)])),e("div",Wt,[e("div",Xt,[s[35]||(s[35]=e("div",{class:"title"},"Gender",-1)),e("div",te,[m(e("select",{"onUpdate:modelValue":s[10]||(s[10]=o=>t.gender=o)},s[34]||(s[34]=[e("option",{value:"MALE"},"MALE",-1),e("option",{value:"FEMALE"},"FEMALE",-1),e("option",{value:"OTHER"},"OTHER",-1)]),512),[[$,t.gender]])]),t.submit&&S.value?(l(),a("div",ee,i(S.value),1)):u("",!0)]),e("div",se,[s[36]||(s[36]=e("div",{class:"title"},"Dob",-1)),m(e("input",{type:"date","onUpdate:modelValue":s[11]||(s[11]=o=>t.dob=o),max:bt(L)().format("YYYY-MM-DD")},null,8,oe),[[f,t.dob]]),t.submit&&w.value?(l(),a("div",ne,i(w.value),1)):u("",!0)])]),e("div",ae,[s[37]||(s[37]=e("div",{class:"title"},"Designation",-1)),r(at,{options:G.value.designationData,onSelected:Z,modelValue:t.designation,"onUpdate:modelValue":s[12]||(s[12]=o=>t.designation=o),placeholder:"Select Designation",onSearch:j},null,8,["options","modelValue"]),t.submit&&b.value?(l(),a("div",le,i(b.value),1)):u("",!0)]),t.editMode?u("",!0):(l(),a("div",ie,[s[38]||(s[38]=e("div",{class:"title"},"Password",-1)),m(e("input",{type:"password",name:"password","onUpdate:modelValue":s[13]||(s[13]=o=>t.password=o),placeholder:"Enter Password ",maxlength:"30"},null,512),[[f,t.password]]),t.submit&&E.value?(l(),a("div",de,i(E.value),1)):u("",!0)]))]),e("div",re,[e("div",ue,[e("div",{class:"btn red-btn",onClick:s[14]||(s[14]=g(o=>d.value.staffModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:q},"Submit")])])]),_:1},8,["show"]),r(P,{show:d.value.statusModal,"onUpdate:show":s[21]||(s[21]=o=>d.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:I(()=>[s[39]||(s[39]=e("div",{class:"title",showHeader:"true"},"Change Status",-1)),e("div",{class:"close-btn",onClick:s[16]||(s[16]=g(o=>d.value.statusModal=!1,["prevent"]))},[r(M)])]),default:I(()=>[e("div",ce,[e("label",me,[m(e("input",{type:"radio","onUpdate:modelValue":s[17]||(s[17]=o=>t.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,t.changeStatus]]),e("div",pe,[r(lt),s[40]||(s[40]=e("div",{class:"title"},"ACTIVE",-1))])]),e("label",ve,[m(e("input",{type:"radio","onUpdate:modelValue":s[18]||(s[18]=o=>t.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[C,t.changeStatus]]),e("div",fe,[r(it),s[41]||(s[41]=e("div",{class:"title"},"PENDING",-1))])]),e("label",ge,[m(e("input",{type:"radio","onUpdate:modelValue":s[19]||(s[19]=o=>t.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,t.changeStatus]]),e("div",be,[r(dt),s[42]||(s[42]=e("div",{class:"title"},"DEACTIVE",-1))])])]),e("div",he,[e("div",_e,[e("div",{class:"btn red-btn",onClick:s[20]||(s[20]=g(o=>d.value.statusModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:H},"Submit")])])]),_:1},8,["show"])])}}};export{we as default};
