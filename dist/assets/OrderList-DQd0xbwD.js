import{d as $,u as nt,e as dt,m as T,n as rt,C as ut,c as n,a as t,b as i,r,w as _,v as M,q,j as D,g as p,F as z,y as B,h as N,s as ct,o as d,t as l,i as u,E as vt}from"./index-QZaKag1-.js";const pt={class:"faq-page"},_t={class:"container"},Dt={class:"table-card card"},gt={class:"table-header"},ft={class:"left"},Ct={class:"title-row"},bt={class:"icon"},ht={class:"right"},yt={class:"searchbar"},mt={class:"icon"},wt={class:"searchbar"},Ot={class:"select-dropdown"},St={class:"date-input"},kt={class:"icon"},Et={class:"date-input"},Nt={class:"icon"},Tt={class:"searchbar"},Mt={class:"select-dropdown"},Pt={class:"searchbar"},Lt={class:"table-body p-16"},Vt={class:"table-outer"},At={class:"table"},It={key:0,class:"badge success-badge"},Yt={key:1,class:"badge warning-badge"},Ut={key:2,class:"badge warning-badge"},Rt={key:3,class:"badge danger-badge"},Ft={class:"option-btns"},xt=["onClick"],$t=["onClick"],qt=["onClick"],zt=["onClick"],Bt=["onClick"],Gt=["onClick"],Ht={key:0,class:"table-no-data"},jt={key:1,class:"table-footer"},Qt={key:0,class:"row"},Zt={class:"data-list"},Jt={class:"data"},Kt={class:"title"},Wt={class:"data"},Xt={class:"title"},ts={class:"data"},ss={class:"title"},os={class:"data"},es={class:"title"},as={class:"data"},ls={class:"title"},is={class:"data"},ns={class:"title"},ds={class:"data"},rs={class:"title"},us={class:"data"},cs={class:"title"},vs={class:"data"},ps={class:"title"},_s={class:"data"},Ds={class:"title"},gs={class:"data"},fs={class:"title"},Cs={class:"data"},bs={class:"title"},hs={class:"data"},ys={class:"title"},ms=["src"],ws={key:1},Os={class:"status-row"},Ss={for:"block",class:"data"},ks={class:"data-inner block-card"},Es={class:"modal-footer"},Ns={class:"btns"},Ps={__name:"OrderList",setup(Ts){const v=nt(),g=ct(),c=$(()=>v.state.CardOrder),o=dt({submit:!1,limit:10,offset:0,keyword:"",status:"PENDING",filterType:"ORDER DATE",changeStatus:null,currentPage:1,editMode:!1,fromDate:T().subtract(30,"days").format("YYYY-MM-DD"),toDate:T().format("YYYY-MM-DD"),typingTimer:null,typingDelay:500,id:null,title:null,image:null,file:null,detailsModal:!1,orderDetails:null});rt(()=>{f()}),ut(()=>o.keyword,()=>{clearTimeout(o.typingTimer),o.typingTimer=setTimeout(()=>{o.limit=10,o.offset=0,o.currentPage=1,f()},o.typingDelay)});function f(){v.dispatch("CardOrder/getOrders",{limit:o.limit,offset:o.offset,keyword:o.keyword,status:o.status,fromDate:o.fromDate,toDate:o.toDate,filterType:o.filterType})}function G(a,s){o.changeStatus=s,o.id=a,c.value.statusModal=!0}function H(a){o.detailsModal=!0,o.orderDetails=a}function j(){o.id&&o.changeStatus&&v.dispatch("CardOrder/updateCardOrderStatus",{id:o.id,status:o.changeStatus})}function Q(a,s){s==="STAFF"&&v.dispatch("CardOrder/downloadStaffCSVByOrderId",{id:a}),s==="STUDENT"&&v.dispatch("CardOrder/downloadStudentCSVByOrderId",{id:a})}function Z(a,s){s==="STAFF"&&v.dispatch("CardOrder/downloadStaffFileByOrderId",{id:a}),s==="STUDENT"&&v.dispatch("CardOrder/downloadStudentFileByOrderId",{id:a})}function J(a){v.dispatch("CardOrder/assignOrderToUpper",{id:a})}const K=a=>{o.currentPage=a,o.offset=o.limit*(a-1),f()},W=(a,s,C,k)=>{C==="SCHOOL"&&(k==="STUDENT"?g.push({path:"/crm/organization/setting/class-list",query:{id:a,settingId:s}}):g.push({path:"/crm/organization/setting/designation",query:{id:a,settingId:s}})),C==="SCHOOL"&&(k==="STUDENT"?g.push({path:"/crm/college/setting/class-list",query:{id:a,settingId:s}}):g.push({path:"/crm/college/setting/designation",query:{id:a,settingId:s}})),C==="ORGANIZATION"&&g.push({path:"/crm/organization/setting/designation",query:{id:a,settingId:s}})};function S(a){return a?T(a).format("MMM Do YYYY"):"-"}return $(()=>{if(!o.title)return"Please Enter title"}),(a,s)=>{var A,I;const C=r("icon-help"),k=r("icon-search"),P=r("icon-calendar"),X=r("icon-eye"),tt=r("icon-info"),st=r("icon-down-arrow-round"),ot=r("icon-down-arrow"),et=r("icon-setting"),at=r("icon-card"),lt=r("Pagination"),L=r("icon-cross"),V=r("Modal"),it=r("icon-block");return d(),n("section",pt,[t("div",_t,[t("div",Dt,[t("div",gt,[t("div",ft,[t("div",Ct,[t("div",bt,[i(C)]),s[12]||(s[12]=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Orders : List"),t("h5",{class:"main-title"},"Order List")],-1))])]),t("div",ht,[t("div",yt,[_(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>o.keyword=e),placeholder:"Search here"},null,512),[[M,o.keyword]]),t("div",mt,[i(k)])]),t("div",wt,[t("div",Ot,[_(t("select",{name:"",id:"","onUpdate:modelValue":s[1]||(s[1]=e=>o.status=e),onChange:f},s[13]||(s[13]=[t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"COMPLETED"},"COMPLETED",-1),t("option",{value:"IN_PROCESS"},"IN_PROCESS",-1),t("option",{value:"CANCELLED"},"CANCELLED",-1)]),544),[[q,o.status]])])]),s[15]||(s[15]=t("div",{class:"text"},"From",-1)),t("div",St,[_(t("input",{type:"date",class:"w-12-r-i","onUpdate:modelValue":s[2]||(s[2]=e=>o.fromDate=e)},null,512),[[M,o.fromDate]]),t("div",kt,[i(P)])]),s[16]||(s[16]=t("div",{class:"text"},"To",-1)),t("div",Et,[_(t("input",{type:"date",class:"w-12-r-i","onUpdate:modelValue":s[3]||(s[3]=e=>o.toDate=e)},null,512),[[M,o.toDate]]),t("div",Nt,[i(P)])]),t("div",Tt,[t("div",Mt,[_(t("select",{name:"",id:"","onUpdate:modelValue":s[4]||(s[4]=e=>o.filterType=e)},s[14]||(s[14]=[t("option",{value:"ORDER DATE"},"ORDER DATE",-1),t("option",{value:"DELIVERY DATE"},"DELIVERY DATE",-1)]),512),[[q,o.filterType]])])]),t("div",Pt,[t("button",{class:"btn white-btn w-full",type:"button",onClick:D(f,["prevent"])}," Submit ")])])]),t("div",Lt,[t("div",Vt,[t("table",At,[s[23]||(s[23]=t("thead",null,[t("th",null,"Order Date"),t("th",null,"Delivery Date"),t("th",null,"Type"),t("th",null,"Name"),t("th",null,"Contact NO."),t("th",null,"Student/Staff"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1)),t("tbody",null,[(d(!0),n(z,null,B(c.value.data,(e,b)=>{var E,h,y,m,w;return d(),n("tr",{key:b},[t("td",null,l(S(e.orderDate)),1),t("td",null,l(S(e.deliveryDate)),1),t("td",null,l((y=(h=(E=e.setting)==null?void 0:E.organizationDetail[0])==null?void 0:h.account)==null?void 0:y.roles),1),t("td",null,l((w=(m=e.setting)==null?void 0:m.organizationDetail[0])==null?void 0:w.name),1),t("td",null,l(e.contactNumber),1),t("td",null,l(e.type),1),t("td",null,[e.status==="COMPLETED"?(d(),n("div",It,l(e.status),1)):p("",!0),e.status==="IN_PROCESS"?(d(),n("div",Yt,l(e.status),1)):p("",!0),e.status==="PENDING"?(d(),n("div",Ut,l(e.status),1)):p("",!0),e.status==="CANCELLED"?(d(),n("div",Rt,l(e.status),1)):p("",!0)]),t("td",null,[t("div",Ft,[t("div",{class:"icon tooltip-wrapper",onClick:O=>H(e)},[i(X),s[17]||(s[17]=t("div",{class:"tooltip"},"Order Detail",-1))],8,xt),t("div",{class:"icon tooltip-wrapper",onClick:O=>{var Y,U,R,F,x;return W((U=(Y=e.setting)==null?void 0:Y.organizationDetail[0])==null?void 0:U.id,e.setting.id,(x=(F=(R=e.setting)==null?void 0:R.organizationDetail[0])==null?void 0:F.account)==null?void 0:x.roles,e.type)}},[i(tt),s[18]||(s[18]=t("div",{class:"tooltip"},"View",-1))],8,$t),t("div",{class:"icon tooltip-wrapper",onClick:O=>Q(e.id,e.type)},[i(st),s[19]||(s[19]=t("div",{class:"tooltip"},"Download CSV",-1))],8,qt),t("div",{class:"icon tooltip-wrapper",onClick:O=>Z(e.id,e.type)},[i(ot),s[20]||(s[20]=t("div",{class:"tooltip"},"Download Images",-1))],8,zt),e.status==="PENDING"?(d(),n("div",{key:0,class:"icon tooltip-wrapper",onClick:D(O=>G(e.id,e.status),["prevent"])},[i(et),s[21]||(s[21]=t("div",{class:"tooltip"},"Status Change",-1))],8,Bt)):p("",!0),e.status==="PENDING"?(d(),n("div",{key:1,class:"icon tooltip-wrapper",onClick:D(O=>J(e.id),["prevent"])},[i(at),s[22]||(s[22]=t("div",{class:"tooltip"},"Finalize Order",-1))],8,Gt)):p("",!0)])])])}),128))])])]),((A=c.value.data)==null?void 0:A.length)<=0?(d(),n("div",Ht,s[24]||(s[24]=[t("div",null,"No records Found!",-1)]))):p("",!0),((I=c.value.data)==null?void 0:I.length)>0?(d(),n("div",jt,[i(lt,{currentPage:o.currentPage,totalItem:c.value.total,itemsPerPage:o.limit,"onUpdate:currentPage":s[5]||(s[5]=e=>K(e))},null,8,["currentPage","totalItem","itemsPerPage"])])):p("",!0)])])]),i(V,{show:o.detailsModal,"onUpdate:show":s[7]||(s[7]=e=>o.detailsModal=e),class:"faq-modal",headerClasses:"header-bg"},{header:N(()=>[s[25]||(s[25]=t("div",{class:"title",showHeader:"true"},"Order Details",-1)),t("div",{class:"close-btn",onClick:s[6]||(s[6]=D(e=>o.detailsModal=!1,["prevent"]))},[i(L)])]),default:N(()=>{var e;return[o.orderDetails?(d(),n("div",Qt,[t("div",Zt,[t("div",Jt,[t("div",Kt,[s[26]||(s[26]=t("b",null,"Order Id :",-1)),u(l(o.orderDetails.id),1)])]),t("div",Wt,[t("div",Xt,[s[27]||(s[27]=t("b",null,"Order Number :",-1)),u("Order-"+l(o.orderDetails.orderNumber),1)])]),t("div",ts,[t("div",ss,[s[28]||(s[28]=t("b",null,"Approx Qty. :",-1)),u(l(o.orderDetails.qty),1)])]),t("div",os,[t("div",es,[s[29]||(s[29]=t("b",null,"Contact No. :",-1)),u(l(o.orderDetails.contactNumber),1)])]),t("div",as,[t("div",ls,[s[30]||(s[30]=t("b",null,"Order Date :",-1)),u(l(S(o.orderDetails.orderDate)),1)])]),t("div",is,[t("div",ns,[s[31]||(s[31]=t("b",null,"Delivery Date :",-1)),u(l(S(o.orderDetails.deliveryDate)),1)])]),t("div",ds,[t("div",rs,[s[32]||(s[32]=t("b",null,"Session :",-1)),u(l(o.orderDetails.fromYear)+"-"+l(o.orderDetails.toYear),1)])]),t("div",us,[t("div",cs,[s[33]||(s[33]=t("b",null,"Delivery Address :",-1)),u(l(o.orderDetails.deliveryAddress),1)])]),t("div",vs,[t("div",ps,[s[34]||(s[34]=t("b",null,"Parent Card :",-1)),u(l(o.orderDetails.parentCard?"Yes":"No"),1)])]),t("div",_s,[t("div",Ds,[s[35]||(s[35]=t("b",null,"Type :",-1)),u(l(o.orderDetails.type),1)])]),t("div",gs,[t("div",fs,[s[36]||(s[36]=t("b",null,"Status :",-1)),u(l(o.orderDetails.status),1)])]),(d(!0),n(z,null,B((e=o.orderDetails)==null?void 0:e.cardOrderList,(b,E)=>{var h,y,m,w;return d(),n("div",{key:E},[s[39]||(s[39]=t("hr",null,null,-1)),t("div",Cs,[t("div",bs,[s[37]||(s[37]=t("b",null,"Class :",-1)),u(l((h=b.classList)==null?void 0:h.name),1)])]),t("div",hs,[t("div",ys,[s[38]||(s[38]=t("b",null,"ProClasduct Title :",-1)),u(" "+l((y=b.classList)==null?void 0:y.idCardsStock.title),1)]),t("div",null,[t("img",{src:`${(w=(m=b.classList)==null?void 0:m.idCardsStock)==null?void 0:w.image}?width=200`,alt:""},null,8,ms)])])])}),128))])])):(d(),n("div",ws,"No data available. Please select order!"))]}),_:1},8,["show"]),i(V,{show:c.value.statusModal,"onUpdate:show":s[11]||(s[11]=e=>c.value.statusModal=e),class:"status-modal",headerClasses:"header-bg"},{header:N(()=>[s[40]||(s[40]=t("div",{class:"title",showHeader:"true"},"Change Status",-1)),t("div",{class:"close-btn",onClick:s[8]||(s[8]=D(e=>c.value.statusModal=!1,["prevent"]))},[i(L)])]),default:N(()=>[t("div",Os,[t("label",Ss,[_(t("input",{type:"radio","onUpdate:modelValue":s[9]||(s[9]=e=>o.changeStatus=e),value:"CANCELLED",id:"block",name:"status"},null,512),[[vt,o.changeStatus]]),t("div",ks,[i(it),s[41]||(s[41]=t("div",{class:"title"},"CANCELLED",-1))])])]),t("div",Es,[t("div",Ns,[t("div",{class:"btn red-btn",onClick:s[10]||(s[10]=D(e=>c.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:j},"Submit")])])]),_:1},8,["show"])])}}};export{Ps as default};
