import{d,u as C,e as k,c as l,a as e,f as _,g as n,w as m,v as p,t as f,b as h,h as S,r as V,i as g,o as i}from"./index-QZaKag1-.js";import{_ as N}from"./logo-Bn_1feJI.js";const O={class:"login-inner-card"},E={class:"card"},U={action:"",class:"form"},T={key:0,class:"u-name"},A={class:"form-item mb-16"},D={key:0,class:"err-msg"},Y={key:0,class:"otp"},B={class:"form-item mb-16"},I={key:0,class:"err-msg"},L={class:"remember-row flex align-center justify-end gap-16 mb-16"},F={key:1},H={class:"pass"},M={class:"form-item mb-16"},j={key:0,class:"err-msg"},K={class:"form-item mb-16"},R={key:0,class:"err-msg"},G={__name:"Forgot",setup($){const u=C(),r=d(()=>u.state.Auth),t=k({submit:!1,loginId:null,password:null,cPassword:null,userName:null,otp:null}),P=o=>{if(o.preventDefault(),!r.value.forgotPasswordStatus&&!r.value.forgotOtpStatus){if(v.value){t.submit=!0;return}t.submit=!1,u.dispatch("Auth/forgotPassword",{loginId:t.userName,roles:"SCHOOL"})}else if(!r.value.forgotPasswordStatus&&r.value.forgotOtpStatus){if(w.value){t.submit=!0;return}t.submit=!1,u.dispatch("Auth/forgotVerifyOtp",{loginId:t.userName,otp:t.otp,roles:"SCHOOL"})}else if(r.value.forgotPasswordStatus&&!r.value.forgotOtpStatus){if(c.value||b.value){t.submit=!0;return}t.submit=!1,u.dispatch("Auth/resetPassword",{id:r.value.id,password:t.password,confirmPassword:t.cPassword})}},v=d(()=>{if(!t.userName)return"Please Enter Your Username"}),w=d(()=>{if(!t.otp)return"Please Enter Your OTP"}),c=d(()=>{if(!t.password)return"Please Enter Your Password"}),b=d(()=>{if(t.cPassword){if(t.password!==t.cPassword)return"Password and Confirm Password are not Match"}else return"Please Enter Your Password"});function y(o){let s=String.fromCharCode(o.keyCode);if(/^[0-9]+$/.test(s)||o.keyCode===8||o.keyCode===9||o.keyCode===37||o.keyCode===39||o.keyCode>=96&&o.keyCode<=105)return!0;o.preventDefault()}return(o,s)=>{const x=V("router-link");return i(),l("div",O,[s[13]||(s[13]=e("div",{class:"logo"},[e("img",{src:N,alt:""})],-1)),e("div",E,[e("form",U,[s[12]||(s[12]=_('<div class="login-heading"><h3>Forgot password</h3></div><ul><li class="data-text"> Usernames are in the form of an <span class="text-primary">phone number</span>. </li><li class="data-text">Passwords are case sensitive.</li><li class="data-text"> Enter your <span class="text-primary">username</span> . </li><li class="data-text"> To reset your password, enter your phone number. </li></ul>',2)),r.value.forgotPasswordStatus?n("",!0):(i(),l("div",T,[e("div",A,[s[5]||(s[5]=e("div",{class:"title text-white"},"Username",-1)),m(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>t.userName=a),placeholder:"Enter Username",maxlength:"30"},null,512),[[p,t.userName]]),t.submit&&v.value?(i(),l("div",D,f(v.value),1)):n("",!0)]),r.value.forgotOtpStatus?(i(),l("div",Y,[e("div",B,[s[6]||(s[6]=e("div",{class:"title text-white"},"OTP",-1)),m(e("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=a=>t.otp=a),placeholder:"Enter OTP",maxlength:"4",onKeydown:s[2]||(s[2]=a=>y(a))},null,544),[[p,t.otp]]),t.submit&&w.value?(i(),l("div",I,f(w.value),1)):n("",!0)])])):n("",!0),e("div",L,[h(x,{to:"/login",class:"text-small text-primary f-w-bold"},{default:S(()=>s[7]||(s[7]=[g("Remember Password?")])),_:1})])])),r.value.forgotPasswordStatus?(i(),l("div",F,[e("div",H,[s[10]||(s[10]=e("ul",null,[e("li",{class:"data-text"},[g(" Password must contain atleast : "),e("span",{class:"text-primary"},"8 characters, 1 letter, 1 number"),g(" . ")])],-1)),e("div",M,[s[8]||(s[8]=e("div",{class:"title"},"New Password",-1)),m(e("input",{type:"password",name:"password","onUpdate:modelValue":s[3]||(s[3]=a=>t.password=a),placeholder:"Enter New Password"},null,512),[[p,t.password]]),t.submit&&c.value?(i(),l("div",j,f(c.value),1)):n("",!0)]),e("div",K,[s[9]||(s[9]=e("div",{class:"title"},"Confirm Password",-1)),m(e("input",{type:"password",name:"confirmPassword","onUpdate:modelValue":s[4]||(s[4]=a=>t.cPassword=a),placeholder:"Enter Confirm Password"},null,512),[[p,t.cPassword]]),t.submit&&b.value?(i(),l("div",R,f(b.value),1)):n("",!0)])])])):n("",!0),e("div",{class:"submit-btn flex gap-16"},[s[11]||(s[11]=e("button",{class:"btn white-btn w-50"},"Cancel",-1)),e("button",{type:"button",class:"btn primary-btn w-50",onClick:P}," Continue ")])])])])}}};export{G as default};
